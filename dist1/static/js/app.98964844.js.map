{"version":3,"file":"static/js/app.98964844.js","mappings":"kEAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,gBAAgB,EACnH,EACGG,EAAkB,GCKtB,GACAC,KAAAA,OCRgM,I,UCO5LC,GAAY,OACd,EACAR,EACAM,GACA,EACA,KACA,WACA,MAIF,EAAeE,EAAiB,Q,UClB5BR,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,eAAe,CAACA,EAAG,WAAW,CAACE,YAAY,WAAWI,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAG,UAAU,GAAGA,EAAG,eAAe,CAACA,EAAG,UAAU,CAACA,EAAG,WAAW,IAAI,IAAI,IAAI,EAC9P,EACGG,EAAkB,GCFlBN,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,KAAK,CAACF,EAAIS,GAAG,aAAaP,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,QAAQ,CAACE,YAAY,SAAS,CAACJ,EAAIS,GAAG,kBAAkBP,EAAG,SAAS,CAACQ,IAAI,cAAcF,MAAM,CAAC,GAAK,eAAeG,GAAG,CAAC,OAASX,EAAIY,iBAAiBZ,EAAIa,GAAIb,EAAIc,mBAAmB,SAASC,EAAKC,GAAO,OAAOd,EAAG,SAAS,CAACe,IAAID,EAAME,SAAS,CAAC,MAAQH,EAAKI,QAAQ,CAACnB,EAAIS,GAAGT,EAAIoB,GAAGL,EAAKM,QAAS,IAAE,KAAKnB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,QAAQ,CAACE,YAAY,SAAS,CAACJ,EAAIS,GAAG,yBAAyBP,EAAG,SAAS,CAACQ,IAAI,cAAcF,MAAM,CAAC,GAAK,eAAeG,GAAG,CAAC,OAASX,EAAIsB,iBAAiBtB,EAAIa,GAAIb,EAAIuB,mBAAmB,SAASR,EAAKC,GAAO,OAAOd,EAAG,SAAS,CAACe,IAAID,EAAME,SAAS,CAAC,MAAQH,EAAKI,QAAQ,CAACnB,EAAIS,GAAGT,EAAIoB,GAAGL,EAAKM,QAAS,IAAE,KAAKnB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,QAAQ,CAACE,YAAY,SAAS,CAACJ,EAAIS,GAAG,kBAAkBP,EAAG,SAAS,CAACQ,IAAI,cAAcF,MAAM,CAAC,GAAK,eAAeG,GAAG,CAAC,OAASX,EAAIwB,YAAYxB,EAAIa,GAAIb,EAAIyB,mBAAmB,SAASV,EAAKC,GAAO,OAAOd,EAAG,SAAS,CAACe,IAAID,EAAME,SAAS,CAAC,MAAQH,EAAKI,QAAQ,CAACnB,EAAIS,GAAGT,EAAIoB,GAAGL,EAAKM,QAAS,IAAE,KAAKnB,EAAG,MAAM,CAACwB,WAAW,CAAC,CAACpB,KAAK,OAAOqB,QAAQ,SAASR,MAAmC,sBAA5BnB,EAAI4B,oBAA8CC,WAAW,iDAAiDzB,YAAY,WAAW,CAACF,EAAG,QAAQ,CAACE,YAAY,SAAS,CAACJ,EAAIS,GAAG,YAAYP,EAAG,SAAS,CAACQ,IAAI,SAASF,MAAM,CAAC,GAAK,UAAUG,GAAG,CAAC,OAASX,EAAI8B,YAAY9B,EAAIa,GAAIb,EAAI+B,UAAU,SAAShB,EAAKC,GAAO,OAAOd,EAAG,SAAS,CAACe,IAAID,EAAME,SAAS,CAAC,MAAQH,EAAKI,QAAQ,CAACnB,EAAIS,GAAGT,EAAIoB,GAAGL,EAAKI,SAAU,IAAE,KAAKjB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,QAAQ,CAACE,YAAY,SAAS,CAACJ,EAAIS,GAAG,mBAAmBP,EAAG,SAAS,CAACQ,IAAI,eAAeN,YAAY,kBAAkBO,GAAG,CAAC,OAASX,EAAIgC,kBAAkBhC,EAAIa,GAAIb,EAAIiC,oBAAoB,SAASlB,EAAKC,GAAO,OAAOd,EAAG,SAAS,CAACe,IAAID,EAAME,SAAS,CAAC,MAAQH,EAAKI,QAAQ,CAACnB,EAAIS,GAAGT,EAAIoB,GAAGL,EAAKM,QAAS,IAAE,QAC/6D,EACGhB,EAAkB,GCqCtB,GACAC,KAAAA,QACA4B,OACA,OAEApB,kBAAAA,GACAS,kBAAAA,GACAE,kBAAAA,GACAQ,mBAAAA,CACA,CAAAjB,MAAAA,EAAAK,KAAAA,kBAAAF,MAAAA,mBACA,CAAAH,MAAAA,EAAAK,KAAAA,oBAAAF,MAAAA,sBAGAgB,mBAAAA,GACAC,kBAAAA,GACAC,mBAAAA,GACAT,oBAAAA,GAEAG,SAAAA,CACA,CAAAf,MAAAA,EAAAG,MAAAA,KACA,CAAAH,MAAAA,EAAAG,MAAAA,MAEAmB,OAAAA,GAEA,EACA,gBACA,iBAGA,EAEAC,UACA,wCACA,wCACA,wCACA,qCACA,0CACA,0DACA,oBAAAC,KAAAA,yBAAAC,QAAAA,KAAAA,qBAEA,EACAC,QAAAA,CACAC,WAAAA,EAAAA,GACAC,QAAAA,IAAAA,EAAAA,EACA,EACAC,YAAAA,EAAAA,GACAD,QAAAA,IAAAA,EAAAA,EACA,EAEAE,aAEA,gEAGAC,UAAAA,aAAAA,mBACAC,KAAA,iBACAC,OAAAC,IACAN,QAAAA,IAAAA,EAAAA,KAAAA,IAAAA,EAAAA,QAAAA,IALAA,QAAAA,IAAAA,aAUA,EAEAO,WAAAA,GACA,aACAC,EAAAA,SAAAA,SAAAA,GACA,OACA/B,KAAAA,EAAAA,MACAF,MAAAA,EAAAA,UAGA,wDACA,sBACAkC,EAAAA,kBAAAA,KAAAA,GACA,uBACAA,EAAAA,kBAAAA,KAAAA,GACA,uBACAA,EAAAA,kBAAAA,KAAAA,GAGA,IAEAA,EAAAA,mBAAAA,EAAAA,kBAAAA,GAAAA,MACAA,EAAAA,kBAAAA,EAAAA,kBAAAA,GAAAA,MACAA,EAAAA,mBAAAA,EAAAA,kBAAAA,GAAAA,MAIAA,EAAAA,OAAAA,OAAAA,CAAAb,KAAAA,wBAAAC,QAAAA,EAAAA,qBACAY,EAAAA,OAAAA,OAAAA,CAAAb,KAAAA,wBAAAC,QAAAA,EAAAA,oBACAY,EAAAA,OAAAA,OAAAA,CAAAb,KAAAA,wBAAAC,QAAAA,EAAAA,qBACA,oBAAAD,KAAAA,eAAAC,QAAAA,MAAAA,EAAAA,cAAAA,QAEAG,QAAAA,KAAAA,eAAAA,EAAAA,OACA,EAEAhC,iBACA,+CAEA,0CAAA6B,QAAAA,KAAAA,oBAEA,EAEAnB,iBACA,8CAEA,0CAAAmB,QAAAA,KAAAA,mBACA,EAEAjB,YACA,+CACA,0CAAAiB,QAAAA,KAAAA,oBACA,EAEAT,kBACA,iDACA,2CAAAS,QAAAA,KAAAA,qBACA,EACAa,aAAAA,EAAAA,GACA,8BACAC,EAAAA,UAAAA,GACAP,MAAA,KACAJ,QAAAA,IAAAA,0CAAAA,IAAAA,IAEAK,OAAAO,IACA,QACA,2BACAC,EAAAA,4DAAAA,KAEAb,QAAAA,MAAAA,GAEAc,kBAAAA,cAAAA,CAAAA,IAGAd,QAAAA,KAAAA,oDAEA,EAEA,4BACAA,QAAAA,IAAAA,2BACA,OACAe,MAAAA,CACAC,MAAAA,CACAC,SAAAA,KAAAA,oBAEAC,kBAAAA,EACAC,kBAAAA,IAIA,8BACA,IACA,qDACA,qCACA,uBAAAC,OAAAA,EAAAxB,KAAAA,QAAAyB,KAAAA,IACA,oBAAAzB,KAAAA,iBAAAC,QAAAA,IACAG,QAAAA,IAAAA,8BAGA,CAFA,SACAA,QAAAA,IAAAA,uBAAAA,IACA,CAEA,EAEAd,YACA,qCACA,wCAAAW,QAAAA,GAIA,EAEAyB,iBAAAA,GACA,qEACA,mDACAtB,QAAAA,KAAAA,aAAAA,EAAAA,MACA,QACA,2CACAA,QAAAA,KAAAA,8BACAV,EAAAA,OAAAA,iBAAAA,GAAAA,SAAAA,EACA,iBAGA,2CACAU,QAAAA,KAAAA,gCACAV,EAAAA,OAAAA,iBAAAA,GAAAA,SAAAA,EACA,eAKA,ICtO4M,ICQxM,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,QCnB5BnC,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,UAAU,CAA6B,oBAA3BJ,EAAI4B,oBAA0C1B,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,eAAe,CAACM,MAAM,CAAC,qBAAuBR,EAAImE,yBAAyB,GAAGnE,EAAIoE,KAAiC,sBAA3BpE,EAAI4B,oBAA4C1B,EAAG,MAAM,CAACA,EAAG,gBAAgB,CAACM,MAAM,CAAC,uBAAyBR,EAAIqE,2BAA2B,GAAGrE,EAAIoE,MACza,EACG/D,EAAkB,GCFlBN,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,SAAS,CAACQ,IAAI,sBAAsBN,YAAY,kBAAkBO,GAAG,CAAC,OAASX,EAAIsE,yBAAyBtE,EAAIa,GAAIb,EAAIqE,wBAAwB,SAAStD,EAAKC,GAAO,OAAOd,EAAG,SAAS,CAACe,IAAID,EAAME,SAAS,CAAC,MAAQH,EAAKI,QAAQ,CAACnB,EAAIS,GAAGT,EAAIoB,GAAGL,EAAKM,QAAS,IAAE,GAAGnB,EAAG,MAAM,CAACwB,WAAW,CAAC,CAACpB,KAAK,OAAOqB,QAAQ,SAASR,MAAiC,0BAA1BnB,EAAIuE,kBAAgD1C,WAAW,mDAAmDnB,IAAI,iBAAiBN,YAAY,aAAa,CAACF,EAAG,SAAS,CAACQ,IAAI,iBAAiBC,GAAG,CAAC,MAAQX,EAAIwE,oBAAoB,CAACxE,EAAIS,GAAG,YAAYP,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,SAAS,CAACQ,IAAI,WAAWN,YAAY,WAAWO,GAAG,CAAC,MAAQX,EAAIyE,eAAe,CAACzE,EAAIS,GAAG,2BAA2BP,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAA4B,8BAA1BJ,EAAIuE,kBAAoDrE,EAAG,MAAM,CAACA,EAAG,eAAe,GAAGF,EAAIoE,KAAgC,0BAA1BpE,EAAIuE,kBAAgDrE,EAAG,MAAM,CAACA,EAAG,mBAAmB,GAAGF,EAAIoE,KAAgC,eAA1BpE,EAAIuE,kBAAqCrE,EAAG,MAAM,CAACA,EAAG,cAAc,GAAGF,EAAIoE,KAAgC,mBAA1BpE,EAAIuE,kBAAyCrE,EAAG,MAAM,CAACA,EAAG,kBAAkB,GAAGF,EAAIoE,QAClyC,EACG/D,EAAkB,GCFlBN,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACQ,IAAI,cAAcN,YAAY,cAAcsE,YAAY,CAAC,aAAa,SAAS,QAAU,SAAS,CAACxE,EAAG,SAAS,CAACE,YAAY,eAAeO,GAAG,CAAC,MAAQX,EAAI2E,WAAW,CAAC3E,EAAIS,GAAG,kBAAkBP,EAAG,SAAS,CAACE,YAAY,eAAeO,GAAG,CAAC,MAAQX,EAAI4E,cAAc,CAAC5E,EAAIS,GAAG,oBAAoBP,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,QAAQ,CAACQ,IAAI,kBAAkBN,YAAY,kBAAkBsE,YAAY,CAAC,UAAY,YAAYlE,MAAM,CAAC,MAAQ,cACnmB,EACGH,EAAkB,G,QCAtB,IAAKwE,EAAc,SAAUC,GAC3B,IAAIC,EAAOD,EAAKE,cACZC,EAAIH,EAAKI,WAAa,EACtBC,EAAIL,EAAKM,UACTC,EAAIP,EAAKQ,WACTC,EAAKT,EAAKU,aACVC,EAAMX,EAAKY,aACXC,EAAOb,EAAKc,kBAEZC,EAAMZ,EAAI,GAAK,IAAMA,EAAIA,EACzBa,EAAMX,EAAI,GAAK,IAAMA,EAAIA,EACzBY,EAAMV,EAAI,GAAK,IAAMA,EAAIA,EACzBW,EAAMT,EAAK,GAAK,IAAMA,EAAKA,EAC3BU,EAAMR,EAAM,GAAK,IAAMA,EAAMA,EAC7BS,EAAMP,EAAO,GAAK,KAAOA,EAASA,EAAO,IAAM,IAAMA,EAAOA,EAEhE,MAAO,GAAGQ,OAAOpB,GAAMoB,OAAO,KAAKA,OAAON,GAAIM,OAAO,KAAKA,OAAOL,GAAIK,OAAO,KAAKA,OAAOJ,GAAII,OAAO,KAAKA,OAAOH,GAAKG,OAAO,KAAKA,OAAOF,GAAIE,OAAO,KAAKA,OAAOD,EAC/J,EACD,Q,mBCnBO,MAAME,EAAM,IAAIC,EAAAA,WAAI,CACzBnE,OACE,MAAO,CACLA,KAAK,CAAC,EAET,EACDoE,UACErG,KAAKsG,IAAI,WAAWpF,IAClBlB,KAAKiC,KAAOf,EAAMe,IAAlB,GAEH,ICUH,OACA5B,KAAAA,mBACA4B,OACA,OACAI,OAAAA,GAEA,EAEAC,UAKA,GAJA,sCACA,6CAEAK,QAAAA,KAAAA,cAAAA,KAAAA,QACA,oEACA,4DACA,kBACA,CAEA,qBACAA,QAAAA,KAAAA,uCACAwD,EAAAA,IAAAA,kBAAAA,IACAxD,QAAAA,KAAAA,QAAAA,GACA,sBACA,0BACA,yBAIAwD,EAAAA,IAAAA,UAAAA,IACAxD,QAAAA,KAAAA,QAAAA,GACA,oBACA,aACA,uBAAAoB,OAAAA,KAAAA,OAAAxB,KAAAA,QAAAyB,KAAAA,KAAAA,QACA,GALA,GASA,EACAvB,QAAAA,CACA8D,iBACA,WACA,qCAWA,OAVAnD,EAAAA,OAAAA,UAAAA,EACAA,EAAAA,OAAAA,qBAAAA,EACAoD,YAAAA,WACApD,EAAAA,OAAAA,UAAAA,EACAA,EAAAA,OAAAA,qBAAAA,CACA,aAIAA,EAAAA,SAAAA,cAAAA,EAAAA,uBAIAA,EAAAA,MAAAA,YAAAA,MAAAA,QAAAA,OACAA,EAAAA,eAAAA,SAAAA,GACAA,EAAAA,OAAAA,EAEAA,EAAAA,iBAAAA,GACAA,EAAAA,eAAAA,SAAAA,GACAA,EAAAA,OAAAA,EACA,UACAA,EAAAA,iBAAAA,CAAAW,OAAAA,EAAAA,OAAAxB,KAAAA,QAAAyB,KAAAA,EAAAA,SAEAZ,EAAAA,iBAAAA,GAEAqD,EAAAA,MAAAA,OAAAA,OAAAA,MACAA,EAAAA,OAAAA,OAAAA,OAAAA,OACAA,EAAAA,YAAAA,EACA9D,QAAAA,KAAAA,iBAAAA,EAAAA,MAAAA,OAAAA,EAAAA,QAEA+D,EAAAA,MAAAA,IACAA,EAAAA,OAAAA,IACAA,EAAAA,IAAAA,EAAAA,OAAAA,EAAAA,OACAA,EAAAA,KAAAA,EAAAA,MAAAA,EAAAA,MAEAtD,EAAAA,OAAAA,MAAAA,iBACA+C,EAAAA,MAAAA,sBAAAA,CAAAQ,aAAAA,EAAAzF,MAAAA,mBAGAkC,EAAAA,SAAAA,IAAAA,CAAAA,EAAAA,GAAAA,CACAb,KAAAA,QACAqE,SAAAA,aACAC,cAAAA,SAAAA,GACAlE,QAAAA,KAAAA,KAAAA,GACAmE,OAAAA,OAAAA,EACA1D,EAAAA,MAAAA,OAAAA,EACAA,EAAAA,MAAAA,UAAAA,EACAA,EAAAA,MAAAA,MAEA,IAEAA,EAAAA,SAAAA,gBAEA,gBACAT,QAAAA,MAAAA,GACAoE,MAAAA,uBAAAA,EACA,GACA,GACA,EACAC,cAAAA,GACArE,QAAAA,KAAAA,YAAAA,GACA,WACAS,EAAAA,uBAAAA,SAAAA,GACAA,EAAAA,sBAAAA,GAAAA,YACA,qBACAA,EAAAA,SAAAA,cAAAA,EAAAA,sBAEA,IACA6D,EAAAA,EACA,gBACAtE,QAAAA,MAAAA,GACAoE,MAAAA,8DAAAA,EACA,GACA,EACAG,cAAAA,GACA,OACAxD,MAAAA,CACAC,MAAAA,KAAAA,OAAAA,QAAAA,uBAEAwD,MAAAA,CACAxD,MAAAA,CACAC,SAAAA,KAAAA,OAAAA,QAAAA,uBAEAC,kBAAAA,EACAC,kBAAAA,IAGAnB,QAAAA,KAAAA,0BAAAA,GACAG,UAAAA,aAAAA,aAAAA,GAAAA,KAAAA,EACA,EACAsE,sBAAAA,EAAAA,GACA,OACAD,MAAAA,CACAE,eAAAA,UACAC,gBAAAA,EACAC,OAAAA,WAMAC,EAAAA,CACA9D,OAAAA,EACAyD,OAAAA,GAGA,uCACArE,UAAAA,aAAAA,gBAAAA,GAAAA,KAAAA,GAAAA,MAAAA,GAGAA,UAAAA,gBAAAA,GAAAA,KAAAA,GAAAA,MAAAA,EAEA,EACA2E,sBAAAA,EAAAA,GACA1D,EAAAA,iBAAAA,SAAAA,WACAkD,IACAA,EAAAA,WAAAA,CACA,OACAlD,EAAAA,iBAAAA,YAAAA,WACAkD,IACAA,EAAAA,WAAAA,CACA,OACAlD,EAAAA,YAAAA,SAAAA,SAAAA,GACA2D,EAAAA,iBAAAA,SAAAA,WACAT,IACAA,EAAAA,WAAAA,CACA,OACAS,EAAAA,iBAAAA,YAAAA,WACAT,IACAA,EAAAA,WAAAA,CACA,MACA,GACA,EACAU,iBAAAA,GACA,sCACAR,EAAAA,OAAAA,EACAA,EAAAA,UAAAA,EACAA,EAAAA,MAAAA,QAAAA,OACAA,EAAAA,MAAAA,OAAAA,KACA,uDACA,EACAS,wBACA,WACAxE,EAAAA,KAAAA,EAAAA,SAAAA,UACAA,EAAAA,MAAAA,UAAAA,KACAA,EAAAA,IAAAA,IAAAA,gBAAAA,EAAAA,MACAA,EAAAA,MAAAA,IAAAA,EAAAA,IACAA,EAAAA,MAAAA,OAAAA,EACAA,EAAAA,MAAAA,OACAA,EAAAA,MAAAA,UAAAA,EAEAA,EAAAA,SAAAA,UACAA,EAAAA,SAAAA,KAEAA,EAAAA,OAAAA,MAAAA,kBACA+C,EAAAA,MAAAA,sBAAAA,CAAAQ,aAAAA,EAAAzF,MAAAA,oBACAkC,EAAAA,MAAAA,YAAAA,MAAAA,QAAAA,QACA,0BACAyE,EAAAA,SAAAA,SAAAA,GACA9D,EAAAA,YAAAA,SAAAA,SAAAA,GACA2D,EAAAA,MACA,GACA,IACAtE,EAAAA,OAAAA,EAAAA,OAAAA,IACA,EACAsB,WACA,MACAnC,EAAAA,CAAAA,KAAAA,cACA,+CACAuF,EAAAA,EAAAA,GACA,kCACAC,EAAAA,OAAAA,SACAA,EAAAA,MAAAA,QAAAA,OACAA,EAAAA,KAAAA,KAAAA,IACAA,EAAAA,SAAAA,WAAAA,EAAAA,OACAC,SAAAA,KAAAA,YAAAA,GACAD,EAAAA,OAKA,EACApD,cACA,+CACAmD,EAAAA,EAAAA,GACA,4BACA,0BAAAvF,KAAAA,eACAuE,OAAAA,KAAAA,IAAAA,gBAAAA,GACA,EACA7C,iBAAAA,GACA,qEACA,mDACAtB,QAAAA,KAAAA,aAAAA,EAAAA,MACA,QACA,2CACAA,QAAAA,KAAAA,8BACAV,EAAAA,OAAAA,iBAAAA,GAAAA,SAAAA,EACA,iBAGA,2CACAU,QAAAA,KAAAA,gCACAV,EAAAA,OAAAA,iBAAAA,GAAAA,SAAAA,EACA,eAKA,GAEAgG,gBACA9B,EAAAA,KAAAA,kBACAA,EAAAA,KAAAA,SACA,GCpRyN,ICQrN,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,QCnB5BrG,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACQ,IAAI,cAAcN,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACQ,IAAI,kBAAkBN,YAAY,sBAAsB,CAACF,EAAG,QAAQ,CAACQ,IAAI,uBAAuBN,YAAY,mBAAmBsE,YAAY,CAAC,UAAY,YAAYlE,MAAM,CAAC,MAAQ,OAAO,OAAS,QAAQG,GAAG,CAAC,UAAYX,EAAImI,gBAAgB,QAAUnI,EAAIoI,qBAAqBlI,EAAG,MAAM,CAACQ,IAAI,gBAAgBN,YAAY,sBAAsB,CAACF,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACF,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,SAAS,CAACQ,IAAI,mBAAmBN,YAAY,oBAAoBsE,YAAY,CAAC,UAAY,YAAYlE,MAAM,CAAC,MAAQ,OAAO,OAAS,gBAAgBN,EAAG,MAAM,CAACQ,IAAI,gBAAgBN,YAAY,sBAAsB,CAACF,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,MAAM,CAACQ,IAAI,cAAcN,YAAY,YAAYsE,YAAY,CAAC,aAAa,SAAS,QAAU,SAAS,CAACxE,EAAG,SAAS,CAACS,GAAG,CAAC,MAAQ,SAAS0H,GAAQ,OAAOrI,EAAIsI,UAAW,IAAG,CAACtI,EAAIS,GAAG,UAAUP,EAAG,SAAS,CAACS,GAAG,CAAC,MAAQ,SAAS0H,GAAQ,OAAOrI,EAAIuI,YAAa,IAAG,CAACvI,EAAIS,GAAG,oBAAoBP,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,QAAQ,CAACQ,IAAI,oBAAoBN,YAAY,oBAAoBsE,YAAY,CAAC,UAAY,YAAYlE,MAAM,CAAC,MAAQ,OAAO,OAAS,mBACj3C,EACGH,EAAkB,GC0CtB,GACAC,KAAAA,WACA4B,OACA,OAEAsG,MAAAA,GACAC,mBAAAA,EACAC,kBAAAA,KAGA,EACApC,UACA,wEACA,iEACA,kBACA,CACA,EACA/D,UACA,wEACA,4DACA,kBACA,CACA,gDACA,wCACA,4CACA,4CACA,wCAEA,sCACA,8CACA,6CAEA,qBACA6D,EAAAA,IAAAA,eAAAA,IACA,8BACA,kCACA,0BAGAA,EAAAA,IAAAA,UAAAA,IACA,oBACA,kBACA,uBAAApC,OAAAA,KAAAA,YAAAxB,KAAAA,QAAAyB,KAAAA,KAAAA,QACA,GAJA,IAQAmC,EAAAA,IAAAA,wBAAAA,IACA,4BACA,gCACA,wBAGA,EACA1D,QAAAA,CACA,uBACAE,QAAAA,IAAAA,2BACA,OACAe,MAAAA,CACAC,MAAAA,CACAC,SAAAA,KAAAA,OAAAA,QAAAA,uBAEAC,kBAAAA,EACAC,kBAAAA,IAIA,8BACA,IACA,qDACA,mBACA,aACA,uBAAAC,OAAAA,KAAAA,YAAAxB,KAAAA,QAAAyB,KAAAA,KAAAA,SAEArB,QAAAA,IAAAA,8BAIA,CAHA,SACAA,QAAAA,IAAAA,uBAAAA,KACAoE,MAAAA,EACA,CAEA,EACA2B,kBACA,WACA,eACA,WACAvB,EAAAA,IAAAA,EAAAA,UAAAA,KACA,OACAzD,OAAAA,EACAyD,MAAAA,CACAwB,MAAAA,CAAAC,IAAAA,MACAC,OAAAA,CAAAD,IAAAA,MACAE,UAAAA,CAAAF,IAAAA,MAIA,uCACA9F,UAAAA,aAAAA,gBAAAA,GAAAA,MAAAA,SAAAA,GACAH,QAAAA,KAAAA,sBACAS,EAAAA,iBACAA,EAAAA,mBAAAA,EACAA,EAAAA,kBAAAA,EACAA,EAAAA,WAAAA,UAAAA,EACA+D,EAAAA,UAAAA,WACAA,EAAAA,OACAA,EAAAA,OAAAA,EACAA,EAAAA,MAAAA,MAAAA,EAAAA,WAAAA,EAAAA,KACAA,EAAAA,MAAAA,OAAAA,EAAAA,YAAAA,EAAAA,KACA4B,EAAAA,MAAAA,MAAAA,EAAAA,WAAAA,EAAAA,KACAA,EAAAA,MAAAA,OAAAA,EAAAA,YAAAA,EAAAA,IACA,EACA3F,EAAAA,cAAAA,MAAAA,QAAAA,QACAA,EAAAA,cAAAA,MAAAA,QAAAA,OACA,qBACA+C,EAAAA,MAAAA,eAAAA,CAAAjF,OAAAA,IAEAkC,EAAAA,sBAAAA,GAAAA,WAEA,GADAT,QAAAA,KAAAA,+CACA,WACAS,EAAAA,SAAAA,cAAAA,EAAAA,2BACA,CACA,0CACAyE,EAAAA,SAAAA,SAAAA,GACA9D,EAAAA,YAAAA,SAAAA,SAAAA,GACA2D,EAAAA,MACA,GACA,IAEAtE,EAAAA,kBAAAA,KACAA,EAAAA,YAAAA,KACAA,EAAAA,WAAAA,UAAAA,KAEA,iCACA4E,SAAAA,eAAAA,QAAAA,SAEA5E,EAAAA,IAAAA,UAAAA,EAAAA,EAAAA,EAAAA,OAAAA,MAAAA,EAAAA,OAAAA,QACA+C,EAAAA,MAAAA,eAAAA,CAAAjF,OAAAA,GACA,CACA,GAEA,IAAA8B,OAAA,YACA+D,MAAAA,EACA,IAGAjE,UAAAA,aAAAA,gBAAAA,GAAAA,MAAAA,SAAAA,GACAH,QAAAA,KAAAA,sBACAS,EAAAA,iBACAA,EAAAA,mBAAAA,EACAA,EAAAA,kBAAAA,EACAA,EAAAA,WAAAA,OAAAA,EACAA,EAAAA,WAAAA,UAAAA,EACA+D,EAAAA,UAAAA,WACAA,EAAAA,OACAA,EAAAA,OAAAA,EACAA,EAAAA,MAAAA,MAAAA,EAAAA,WAAAA,EAAAA,KACAA,EAAAA,MAAAA,OAAAA,EAAAA,YAAAA,EAAAA,KACA4B,EAAAA,MAAAA,MAAAA,EAAAA,WAAAA,EAAAA,KACAA,EAAAA,MAAAA,OAAAA,EAAAA,YAAAA,EAAAA,IACA,EACA,qBACA5C,EAAAA,MAAAA,eAAAA,CAAAjF,OAAAA,IAEAkC,EAAAA,cAAAA,MAAAA,QAAAA,QACAA,EAAAA,cAAAA,MAAAA,QAAAA,OACAA,EAAAA,sBAAAA,GAAAA,WACA,cACAA,EAAAA,SAAAA,cAAAA,EAAAA,2BACA,CAEA,0CACAyE,EAAAA,SAAAA,SAAAA,GACA9D,EAAAA,YAAAA,SAAAA,SAAAA,GACA2D,EAAAA,MACA,GACA,IAEAtE,EAAAA,kBAAAA,KACAA,EAAAA,YAAAA,KACAA,EAAAA,WAAAA,UAAAA,KAEA,iCACA4E,SAAAA,eAAAA,QAAAA,SAEA5E,EAAAA,IAAAA,UAAAA,EAAAA,EAAAA,EAAAA,OAAAA,MAAAA,EAAAA,OAAAA,QACA+C,EAAAA,MAAAA,eAAAA,CAAAjF,OAAAA,GACA,CACA,GACA,IAAA8B,OAAA,YACA+D,MAAAA,EACA,GAEA,EACAmB,gBAAAA,GACA,WACA,eACA,6BACA,iCACAF,SAAAA,eAAAA,QAAAA,SAEAgB,EAAAA,OAAAA,OAAAA,EAGA,6BACA,wBACA,2CACA,0CACAC,GAAAA,EACAC,GAAAA,EAEA9F,EAAAA,OAAAA,EACAA,EAAAA,OAAAA,EAIA,oCAgBA,OAfA+F,EAAAA,GAAAA,OACAC,EAAAA,YAAAA,GACAD,EAAAA,MAAAA,QAAAA,4FAEAhC,EAAAA,YAAAA,SAAAA,GACA6B,EAAAA,OAAAA,OAAAA,EAEA,6BACA,wBAEAG,EAAAA,MAAAA,MAAAA,EAAAA,EAAAA,EAAAA,GAAAA,KACAA,EAAAA,MAAAA,KAAAA,EAAAA,EAAAA,EAAAA,GAAAA,KACAA,EAAAA,MAAAA,MAAAA,KAAAA,IAAAA,EAAAA,GAAAA,KACAA,EAAAA,MAAAA,OAAAA,KAAAA,IAAAA,EAAAA,GAAAA,IACA,GACA,CACA,EACAhB,cAAAA,GACA,WACA,WACA,eACAhB,EAAAA,YAAAA,KAKA,sCACA4B,EAAAA,MAAAA,MAAAA,EAAAA,YAAAA,KACAA,EAAAA,MAAAA,OAAAA,EAAAA,aAAAA,KAGA,iDACA,gDAgBA,0BAEAM,EAAAA,UAAAA,EAAAA,EAAAA,EAAAA,MAAAA,EAAAA,QACAC,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EACA,CAEA,0BACAD,EAAAA,UAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,MAAAA,EAAAA,QACAjG,EAAAA,MAAAA,uBAAAA,KACA,qBACAkG,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EACA,GAEA,CAtBAlG,EAAAA,cAAAA,MAAAA,QAAAA,QACAA,EAAAA,cAAAA,MAAAA,QAAAA,OAGA+D,EAAAA,aAAAA,WACAxE,QAAAA,KAAAA,uBAEA4G,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,OAAAA,EAAAA,OAAAA,EAAAA,EACA,CAeA,EACAC,aAAAA,EAAAA,GAEA,GADA7G,QAAAA,KAAAA,wBACA,MAEA,YADAA,QAAAA,KAAAA,mCAGA,WAEAmE,OAAAA,aAAAA,OAAAA,cAAAA,OAAAA,oBAAAA,OAAAA,iBAAAA,OAAAA,eAEA,qBACA,qBACA1D,EAAAA,iBAAAA,QACAA,EAAAA,iBAAAA,MAEAA,EAAAA,iBAAAA,IAAAA,OAAAA,cAEAT,QAAAA,MAAAA,6BAIA,wDACA,MACA,oDACA8G,EAAAA,QAAAA,EACA,CACA,MACA,oDACAC,EAAAA,QAAAA,EACA,CAEA,eACA,EACAnD,iBACA,WACA,wDAIA,2CAGA,CACAnD,EAAAA,cAAAA,MAAAA,QAAAA,OACAA,EAAAA,cAAAA,MAAAA,QAAAA,QACAA,EAAAA,MAAAA,YAAAA,MAAAA,QAAAA,OACA,iCACA,kCAQA,GAPAA,EAAAA,YAAAA,MAAAA,MAAAA,EAAAA,YAAAA,KACAA,EAAAA,YAAAA,MAAAA,OAAAA,EAAAA,aAAAA,KACAA,EAAAA,YAAAA,UAAAA,EACAA,EAAAA,YAAAA,OACAA,EAAAA,YAAAA,OAAAA,EAGA,wCACA,uEAEA,wDACA,wBACAqD,EAAAA,SAAAA,EACA,MACAA,EAAAA,SAAAA,EAAAA,YAAAA,iBAAAA,IAIArD,EAAAA,SAAAA,IAAAA,EAAAA,CAAAb,KAAAA,UACAa,EAAAA,SAAAA,iBAEA+C,EAAAA,MAAAA,iBAAAA,CAAAQ,aAAAA,EAAAzF,MAAAA,kBACA,MA9BAkC,EAAAA,qBAJA2D,MAAAA,wBAqCA,EACAa,wBACA,6CACA,0BACA,gCACA,kCACAjF,QAAAA,KAAAA,QAAAA,KAAAA,MACA,wCACA,8BACA,wBACA,6BACA,0BAEA,mDAEA,aACAA,QAAAA,KAAAA,0DACAmE,OAAAA,qBAAAA,KAAAA,QAGAkB,SAAAA,eAAAA,QAAAA,SACA,kCACA,gCACA,gCACA,kCACA,mDACA,6BAEA,6DACA,gDACAH,EAAAA,SAAAA,SAAAA,GACA9D,EAAAA,YAAAA,SAAAA,SAAAA,GACA2D,EAAAA,MACA,GACA,IACA,4BACA,wBACA,mBAEAvB,EAAAA,MAAAA,iBAAAA,CAAAQ,aAAAA,EAAAzF,MAAAA,oBACAiF,EAAAA,MAAAA,eAAAA,CAAAjF,OAAAA,GACA,EACAyI,gBACA,WACAvG,EAAAA,SAAAA,cAAAA,EAAAA,sBACA,EACAqE,sBAAAA,EAAAA,GACA1D,EAAAA,iBAAAA,SAAAA,WACAkD,IACAA,EAAAA,WAAAA,CACA,OACAlD,EAAAA,iBAAAA,YAAAA,WACAkD,IACAA,EAAAA,WAAAA,CACA,OACAlD,EAAAA,YAAAA,SAAAA,SAAAA,GACA2D,EAAAA,iBAAAA,SAAAA,WACAT,IACAA,EAAAA,WAAAA,CACA,OACAS,EAAAA,iBAAAA,YAAAA,WACAT,IACAA,EAAAA,WAAAA,CACA,MACA,GACA,EACAvC,WACA,+CACAoD,EAAAA,EAAAA,GACA,kCACAC,EAAAA,OAAAA,SACAA,EAAAA,MAAAA,QAAAA,OACApF,QAAAA,KAAAA,YAAAA,KAAAA,KACAoF,EAAAA,KAAAA,KAAAA,IACAA,EAAAA,SAAAA,aAAAA,EAAAA,OACAC,SAAAA,KAAAA,YAAAA,GACAD,EAAAA,OAKA,EACAO,aACA,+CACAR,EAAAA,EAAAA,GACA,4BACA,0BAAAvF,KAAAA,eACAuE,OAAAA,KAAAA,IAAAA,gBAAAA,GACA,EACA7C,iBAAAA,GACA,qEACA,mDACAtB,QAAAA,KAAAA,aAAAA,EAAAA,MACA,QACA,2CACAA,QAAAA,KAAAA,8BACAV,EAAAA,OAAAA,iBAAAA,GAAAA,SAAAA,EACA,iBAGA,2CACAU,QAAAA,KAAAA,gCACAV,EAAAA,OAAAA,iBAAAA,GAAAA,SAAAA,EACA,eAKA,GAEAgG,gBACA9B,EAAAA,KAAAA,wBACAA,EAAAA,KAAAA,eACAA,EAAAA,KAAAA,UACA,wBACA,8BACA,2BAEA,GCjgB6N,ICQzN,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,QCnB5BrG,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,KAAK,CAACQ,IAAI,QAAQ,CAACV,EAAIS,GAAG,0CAA0CP,EAAG,MAAM,CAACQ,IAAI,cAAcN,YAAY,cAAcsE,YAAY,CAAC,aAAa,SAAS,QAAU,SAAS,CAACxE,EAAG,SAAS,CAACE,YAAY,eAAeO,GAAG,CAAC,MAAQX,EAAI2E,WAAW,CAAC3E,EAAIS,GAAG,kBAAkBP,EAAG,SAAS,CAACE,YAAY,eAAeO,GAAG,CAAC,MAAQX,EAAI4E,cAAc,CAAC5E,EAAIS,GAAG,oBAAoBP,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACQ,IAAI,MAAMN,YAAY,kBAAkBsE,YAAY,CAAC,UAAY,YAAYlE,MAAM,CAAC,MAAQ,cAC5pB,EACGH,EAAkB,GCkBtB,GACAC,KAAAA,gBACAiC,UACA,0BACA,0BACA6D,EAAAA,IAAAA,gBAAAA,IACA,sBACA,0BACA,wBAEA,EACA1D,QAAAA,CACA8D,iBACA,WACA,qCASA,OARAnD,EAAAA,OAAAA,UAAAA,EACAA,EAAAA,OAAAA,qBAAAA,EACAoD,YAAAA,WACApD,EAAAA,OAAAA,UAAAA,EACAA,EAAAA,OAAAA,qBAAAA,CACA,aAEAA,EAAAA,SAAAA,cAAAA,EAAAA,uBAGAA,EAAAA,MAAAA,YAAAA,MAAAA,QAAAA,OACAA,EAAAA,eAAAA,SAAAA,GACA+C,EAAAA,MAAAA,oBAAAA,CAAAQ,aAAAA,EAAAzF,MAAAA,mBACAkC,EAAAA,KAAAA,UAAAA,uCACAA,EAAAA,SAAAA,IAAAA,EAAAA,CACAb,KAAAA,MACAuG,UAAAA,GACAc,QAAAA,EACAjB,MAAAA,IACAkB,OAAAA,IACAC,sBAAAA,WACA1G,EAAAA,KAAAA,UAAAA,wBACA,EACA2G,aAAAA,SAAAA,GACA3G,EAAAA,MAAAA,IAAAA,CACA,IAGAA,EAAAA,SAAAA,iBAEAA,EAAAA,SAAAA,OAAAA,CAEA,GACA,EACA8D,cAAAA,GACApE,UAAAA,aAAAA,aAAAA,CAAAqE,OAAAA,IAAA,kBACAF,EAAAA,EACA,IAAAjE,OAAA,YACA+D,MAAAA,6DACApE,QAAAA,MAAAA,EACA,GACA,EACAgH,gBACA,WACAvG,EAAAA,cAAAA,EAAAA,sBACA,EACAwE,wBACA,WACAxE,EAAAA,KAAAA,UAAAA,0BAAAA,EAAAA,YAAAA,EAAAA,SAAAA,UAAAA,MACAA,EAAAA,KAAAA,EAAAA,SAAAA,UACAA,EAAAA,IAAAA,IAAAA,gBAAAA,EAAAA,MACAA,EAAAA,MAAAA,IAAAA,EAAAA,IACAA,EAAAA,SAAAA,OAAAA,OACAA,EAAAA,SAAAA,UACAA,EAAAA,SAAAA,KACA+C,EAAAA,MAAAA,oBAAAA,CAAAQ,aAAAA,EAAAzF,MAAAA,oBACAkC,EAAAA,MAAAA,YAAAA,MAAAA,QAAAA,OACA,EACA4G,YAAAA,GACA,UACA,gCACA,SACA,gBAEA,uDACA,+CACA,EACAtF,WACA,MACAnC,EAAAA,CAAAA,KAAAA,cACA,+CACAuF,EAAAA,EAAAA,GACA,kCACAC,EAAAA,OAAAA,SACAA,EAAAA,MAAAA,QAAAA,OACAA,EAAAA,KAAAA,KAAAA,IACAA,EAAAA,SAAAA,WAAAA,EAAAA,OACAC,SAAAA,KAAAA,YAAAA,GACAD,EAAAA,OAKA,EACApD,cAOAmC,OAAAA,KAAAA,KAAAA,IACA,GAEAmB,gBACA9B,EAAAA,KAAAA,eACA,GCnIkN,ICQ9M,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,QCnB5BrG,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACQ,IAAI,cAAcN,YAAY,cAAcsE,YAAY,CAAC,aAAa,SAAS,QAAU,SAAS,CAACxE,EAAG,SAAS,CAACE,YAAY,eAAeO,GAAG,CAAC,MAAQX,EAAI2E,WAAW,CAAC3E,EAAIS,GAAG,kBAAkBP,EAAG,SAAS,CAACE,YAAY,eAAeO,GAAG,CAAC,MAAQX,EAAI4E,cAAc,CAAC5E,EAAIS,GAAG,oBAAoBP,EAAG,KAAK,CAACQ,IAAI,KAAKgE,YAAY,CAAC,QAAU,WAAWxE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,QAAQ,CAACQ,IAAI,kBAAkBN,YAAY,kBAAkBsE,YAAY,CAAC,UAAY,YAAYlE,MAAM,CAAC,MAAQ,cACvpB,EACGH,EAAkB,GCFtB,SAAS6J,IACP,IAAIC,EAAWlK,KAEXmK,EAAyB,WAAa,EA0B1C,SAASC,EAAWnD,EAAUoD,EAAUC,GACtCrD,EAAWA,GAAY,WAAa,EAEpC,IAAIsD,EAAOvC,SAASwC,cAAc,SAClCD,EAAKhI,KAAO,OAER8H,IACFE,EAAKF,UAAW,GAGdC,IACFC,EAAKE,iBAAkB,GAGzBF,EAAKG,OAASR,EAASQ,OAEvBH,EAAKI,QAAU,WACbJ,EAAKK,cAAe,CACrB,EAED5C,SAAS6C,KAAKC,QAAU,WACtBtE,YAAW,WACJ+D,EAAKK,eACVL,EAAKK,cAAe,EAEfL,EAAKrJ,OACRiJ,IAEH,GAAE,IACJ,EAEDI,EAAKQ,SAAW,WACd,GAAIV,EAAU,CACZ,IAAKE,EAAKS,MAAMC,OAEd,YADAtI,QAAQY,MAAM,qBAIhB,IAAI2H,EAAM,GAMV,OALAC,MAAMC,KAAKb,EAAKS,OAAOK,SAAQ,SAASd,GACtCA,EAAKe,IAAMf,EAAKgB,mBAChBL,EAAIM,KAAKjB,EACV,SACDtD,EAASiE,EAEV,CAEIX,EAAKS,MAAM,IAKhB/D,EAASsD,EAAKS,MAAM,IAEpBT,EAAKkB,WAAWC,YAAYnB,IAN1B5H,QAAQY,MAAM,oBAOjB,EACDgH,EAAKoB,MAAMC,QAAU,QACpB5D,SAAS6C,MAAQ7C,SAAS6D,iBAAiBC,YAAYvB,GACxDwB,EAAexB,EAChB,CAeD,SAASwB,EAAezI,GACtB,GAA6B,oBAAlBA,EAAQ0I,MAKnB,GAA8B,oBAAnB1I,EAAQ2I,OAAnB,CAKA,GAA6C,qBAAlCjE,SAASkE,YAAY,SAA0B,CACxD,IAAIC,EAAQnE,SAASkE,YAAY,SAEjC,GAA+B,oBAApBC,EAAMC,WAA6D,oBAA1B9I,EAAQ+I,cAG1D,OAFAF,EAAMC,UAAU,SAAS,GAAM,QAC/B9I,EAAQ+I,cAAcF,EAGzB,CAEGA,EAAQ,IAAIG,WAAW,QAAS,CAClCC,KAAMzF,OACN0F,SAAS,EACTC,YAAY,IAGdnJ,EAAQ+I,cAAcF,EAlBrB,MAFC7I,EAAQ2I,cALR3I,EAAQ0I,OA0BX,CA9HD9B,EAASwC,iBAAmB,SAASzF,EAAU0F,GACzCA,IACFxC,EAAyBwC,GAG3BvC,EAAWnD,EACZ,EACDiD,EAAS0C,oBAAsB,SAAS3F,EAAU0F,GAC5CA,IACFxC,EAAyBwC,GAG3BvC,EAAWnD,GAAU,EACtB,EACDiD,EAAS2C,gBAAkB,SAAS5F,EAAU0F,GACxCA,IACFxC,EAAyBwC,GAG3BvC,EAAWnD,GAAU,GAAM,EAC5B,EAEDiD,EAASQ,OAAS,KAyGnB,CAED,Q,gCCqjBA,I,mBCpqBA,GACArK,KAAAA,yBACAiC,UACA,WACAc,EAAAA,MAAAA,EAAAA,MAAAA,gBACAA,EAAAA,GAAAA,EAAAA,MAAAA,GACAA,EAAAA,OAAAA,EAAAA,OAAAA,QAAAA,aACA+C,EAAAA,IAAAA,0BAAAA,IACA/C,EAAAA,OAAAA,EAAAA,QACAA,EAAAA,OAAAA,MAAAA,EAAAA,MACAA,EAAAA,gBAAAA,IAEA+C,EAAAA,IAAAA,UAAAA,IACA/C,EAAAA,OAAAA,EAAAA,MACA,eACAA,EAAAA,iBAAAA,CAAAW,OAAAA,EAAAA,YAAAxB,KAAAA,QAAAyB,KAAAA,EAAAA,QACA,GAEA,EACAvB,QAAAA,CACA8D,iBACA,WACA,qCASA,OARAnD,EAAAA,OAAAA,UAAAA,EACAA,EAAAA,OAAAA,qBAAAA,EACAoD,YAAAA,WACApD,EAAAA,OAAAA,UAAAA,EACAA,EAAAA,OAAAA,qBAAAA,CACA,aAEAA,EAAAA,SAAAA,cAAAA,EAAAA,uBAGAA,EAAAA,MAAAA,YAAAA,MAAAA,QAAAA,OACAA,EAAAA,cAAAA,SAAAA,GACAA,EAAAA,UAAAA,EACA,OACAM,MAAAA,CACAC,MAAAA,CACAC,SAAAA,EAAAA,OAAAA,QAAAA,uBAEAC,kBAAAA,EACAC,kBAAAA,IAGAhB,UAAAA,aAAAA,aAAAA,GAAAA,MAAAA,SAAAA,GACAM,EAAAA,YAAAA,EACA,eACAA,EAAAA,iBAAAA,CAAAW,OAAAA,EAAAA,YAAAxB,KAAAA,QAAAyB,KAAAA,EAAAA,SAEA,sBAEA,sCACA8I,EAAAA,UAAAA,EACAA,EAAAA,UAAAA,EAEAA,EAAAA,UAAAA,EAAAA,iBAEA1J,EAAAA,MAAAA,YAAAA,GACAA,EAAAA,MAAAA,EAEA,SACA,aACA2J,IAEA,IACA3J,EAAAA,GAAAA,UAAAA,yBAGAA,EAAAA,GAAAA,UAAAA,iBAAAA,EACAoD,WAAAA,EAAAA,KARA,KAWApD,EAAAA,SAAAA,IAAAA,EAAAA,iBAAAA,CAEAwD,SAAAA,aACAoG,UAAAA,IACAzK,KAAAA,UAEA4D,EAAAA,MAAAA,oBAAAA,CAAAQ,aAAAA,EAAAzF,MAAAA,mBACAkC,EAAAA,SAAAA,gBAWA,GACA,GACA,EACA6J,aAAAA,GACA,YACA/C,EAAAA,OAAAA,QACAA,EAAAA,kBAAAA,SAAAA,GACApD,OAAAA,aAAAA,OAAAA,cAAAA,OAAAA,mBACA,uBACA,iBACAoG,EAAAA,QAAAA,EAAAA,aACAA,EAAAA,KAAAA,MAAAA,EAEA,qBAQA,cACA,6BACAC,EAAAA,OAAAA,EACAA,EAAAA,MAAAA,EAAAA,GACAA,EAAAA,QAAAA,GACA,uCACAA,EAAAA,QAAAA,GAGAlG,EAAAA,EAAAA,OAAAA,IAAAA,EAAAA,SACA,CAjBAmG,EAAAA,OAAAA,SAAAA,GAGAC,EAAAA,gBAAAA,EAAAA,OAAAA,OAAAA,EACA,EACAD,EAAAA,kBAAAA,EAaA,eACApF,SAAAA,cAAAA,yBAAAA,UAAAA,EACAjB,MAAAA,0BACA,GACA,EACA9C,iBAAAA,GACA,qEACA,mDACAtB,QAAAA,KAAAA,aAAAA,EAAAA,MACA,QACA,2CACAA,QAAAA,KAAAA,8BACAV,EAAAA,OAAAA,iBAAAA,GAAAA,SAAAA,EACA,iBAGA,2CACAU,QAAAA,KAAAA,gCACAV,EAAAA,OAAAA,iBAAAA,GAAAA,SAAAA,EACA,eAKA,EACA2F,wBACA,WACAxE,EAAAA,KAAAA,EAAAA,SAAAA,UACAA,EAAAA,MAAAA,UAAAA,KACAA,EAAAA,IAAAA,IAAAA,gBAAAA,EAAAA,MACAA,EAAAA,MAAAA,IAAAA,EAAAA,IACAA,EAAAA,MAAAA,OAAAA,EACAA,EAAAA,MAAAA,OACAA,EAAAA,MAAAA,UAAAA,EAEAA,EAAAA,SAAAA,UACAA,EAAAA,SAAAA,KAEAA,EAAAA,OAAAA,MAAAA,kBACA+C,EAAAA,MAAAA,oBAAAA,CAAAQ,aAAAA,EAAAzF,MAAAA,oBACAkC,EAAAA,MAAAA,YAAAA,MAAAA,QAAAA,QACA,kCACAyE,EAAAA,SAAAA,SAAAA,GACA9D,EAAAA,YAAAA,SAAAA,SAAAA,GACA2D,EAAAA,MACA,GACA,IACAtE,EAAAA,UAAAA,EAAAA,YAAAA,IACA,EACAsB,WACA,MACAnC,EAAAA,CAAAA,KAAAA,cACA,+CACAuF,EAAAA,EAAAA,GACA,kCACAC,EAAAA,OAAAA,SACAA,EAAAA,MAAAA,QAAAA,OACAA,EAAAA,KAAAA,KAAAA,IACAA,EAAAA,SAAAA,WAAAA,EAAAA,OACAC,SAAAA,KAAAA,YAAAA,GACAD,EAAAA,OAKA,EACApD,cACA,+CACAmD,EAAAA,EAAAA,GACA,4BACA,0BAAAvF,KAAAA,eACAuE,OAAAA,KAAAA,IAAAA,gBAAAA,GACA,GAEAmB,gBACA9B,EAAAA,KAAAA,0BACAA,EAAAA,KAAAA,SACA,GC/N+N,KCQ3N,IAAY,OACd,GACA,EACA,GACA,EACA,KACA,WACA,MAIF,GAAe,GAAiB,QC4BhC,IACA9F,KAAAA,gBACA4B,OACA,OACAqC,kBAAAA,GAEA,EACAgJ,MAAAA,CAAAA,0BACAC,WAAAA,CAAAC,cAAAA,GAAAC,UAAAA,EAAAC,eAAAA,EAAAC,WAAAA,GACArL,UACA,6HACA,2CACA,8CACA6D,EAAAA,IAAAA,uBAAAA,IACAxD,QAAAA,KAAAA,QAAAA,GACA,4CAEAwD,EAAAA,IAAAA,kBAAAA,IACA,4CAEAA,EAAAA,IAAAA,qBAAAA,IACA,4CAEAA,EAAAA,IAAAA,qBAAAA,IACA,4CAEAA,EAAAA,IAAAA,gBAAAA,IACA,QACA,0CAEA,wCACA,GAEA,EACA1D,QAAAA,CACA4B,yBACA,4HACA,EACAG,eACA,iDACA2B,EAAAA,MAAAA,uBAAAA,CAAAQ,aAAAA,EAAArD,QAAAA,KAAAA,kBAAApC,MAAAA,KAAAA,kBAAAA,YACA,qDACAiF,EAAAA,MAAAA,iBAAAA,CAAAQ,aAAAA,EAAArD,QAAAA,KAAAA,kBAAApC,MAAAA,KAAAA,kBAAAA,YACA,sCACAiF,EAAAA,MAAAA,eAAAA,CAAAQ,aAAAA,EAAArD,QAAAA,KAAAA,kBAAApC,MAAAA,KAAAA,kBAAAA,YACA,2CACAiF,EAAAA,MAAAA,yBAAAA,CAAAQ,aAAAA,EAAArD,QAAAA,KAAAA,kBAAApC,MAAAA,KAAAA,kBAAAA,WAEA,EACAqD,oBACA4B,EAAAA,MAAAA,cAAAA,CAAAyH,SAAAA,EAAAtK,QAAAA,KAAAA,eAAApC,MAAAA,KAAAA,eAAAA,WACA,GAEA+G,gBACA9B,EAAAA,KAAAA,uBACAA,EAAAA,KAAAA,kBACAA,EAAAA,KAAAA,gBACAA,EAAAA,KAAAA,eACAA,EAAAA,KAAAA,iBACA,GC1GgN,MCQ5M,IAAY,OACd,GACA,EACA,GACA,EACA,KACA,WACA,MAIF,GAAe,GAAiB,QCnB5BrG,GAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACA,EAAG,SAAS,CAACQ,IAAI,oBAAoBN,YAAY,kBAAkBO,GAAG,CAAC,OAASX,EAAI8N,uBAAuB9N,EAAIa,GAAIb,EAAImE,sBAAsB,SAASpD,EAAKC,GAAO,OAAOd,EAAG,SAAS,CAACe,IAAID,EAAME,SAAS,CAAC,MAAQH,EAAKI,QAAQ,CAACnB,EAAIS,GAAGT,EAAIoB,GAAGL,EAAKM,QAAS,IAAE,KAAKnB,EAAG,MAAM,CAACA,EAAG,SAAS,CAACQ,IAAI,yBAAyBN,YAAY,oBAAoBO,GAAG,CAAC,OAASX,EAAI+N,2BAA2B/N,EAAIa,GAAIb,EAAIgO,kBAAkB,SAASjN,EAAKC,GAAO,OAAOd,EAAG,SAAS,CAACe,IAAID,EAAME,SAAS,CAAC,MAAQH,EAAKI,QAAQ,CAACnB,EAAIS,GAAGT,EAAIoB,GAAGL,EAAKM,QAAS,IAAE,KAAKnB,EAAG,MAAM,CAACA,EAAG,SAAS,CAACQ,IAAI,wBAAwBN,YAAY,mBAAmBO,GAAG,CAAC,OAASX,EAAIiO,2BAA2BjO,EAAIa,GAAIb,EAAIkO,iBAAiB,SAASnN,EAAKC,GAAO,OAAOd,EAAG,SAAS,CAACe,IAAID,EAAME,SAAS,CAAC,MAAQH,EAAKI,QAAQ,CAACnB,EAAIS,GAAGT,EAAIoB,GAAGL,EAAKM,QAAS,IAAE,KAAKnB,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,SAAS,CAACQ,IAAI,WAAWN,YAAY,WAAWO,GAAG,CAAC,MAAQX,EAAIyE,eAAe,CAACzE,EAAIS,GAAG,4BAA4BP,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACQ,IAAI,kBAAkBF,MAAM,CAAC,GAAK,qBAAqB,CAACN,EAAG,MAAM,CAACQ,IAAI,cAAcgE,YAAY,CAAC,aAAa,SAAS,QAAU,OAAO,OAAS,SAAS,CAACxE,EAAG,SAAS,CAACE,YAAY,eAAeO,GAAG,CAAC,MAAQX,EAAI2E,WAAW,CAAC3E,EAAIS,GAAG,kBAAkBP,EAAG,SAAS,CAACE,YAAY,eAAeO,GAAG,CAAC,MAAQX,EAAI4E,cAAc,CAAC5E,EAAIS,GAAG,oBAAoBP,EAAG,MAAM,CAACQ,IAAI,eAAeN,YAAY,sBAAsB,CAACF,EAAG,QAAQ,CAACQ,IAAI,gBAAgBN,YAAY,mBAAmBsE,YAAY,CAAC,UAAY,WAAW,MAAQ,iBAChsD,EACGrE,GAAkB,GC6CtB,IACAC,KAAAA,iBACA4B,OACA,OACA8L,iBAAAA,CACA,CACAhN,MAAAA,EACAK,KAAAA,sBACAF,MAAAA,WAEA,CACAH,MAAAA,EACAK,KAAAA,QACAF,MAAAA,aAEA,CACAH,MAAAA,EACAK,KAAAA,OACAF,MAAAA,YAEA,CACAH,MAAAA,EACAK,KAAAA,OACAF,MAAAA,WAEA,CACAH,MAAAA,EACAK,KAAAA,OACAF,MAAAA,YAGA+M,gBAAAA,CACA,CACAlN,MAAAA,EACAK,KAAAA,qBACAF,MAAAA,WAEA,CACAH,MAAAA,EACAK,KAAAA,QACAF,MAAAA,KAEA,CACAH,MAAAA,EACAK,KAAAA,SACAF,MAAAA,MAEA,CACAH,MAAAA,EACAK,KAAAA,SACAF,MAAAA,MAEA,CACAH,MAAAA,EACAK,KAAAA,SACAF,MAAAA,OAMAoD,kBAAAA,GACA4J,mBAAAA,GACAC,kBAAAA,GAEA,EACAb,MAAAA,CAAAA,wBACAhL,UACA,2BACA,oCACA,oCACA,yJACA,uDACA,oDACA,GACA,EACAG,QAAAA,CAGA2L,OACA,WAQA,GAPA,qCACAhL,EAAAA,KAAAA,aAEAA,EAAAA,KAAAA,aAEAA,EAAAA,OAAAA,KAAAA,MAAAA,SAEA,sCAYA,OAVAA,EAAAA,OAAAA,UAAAA,EAEAA,EAAAA,OAAAA,qBAAAA,EACAoD,YAAAA,WACApD,EAAAA,OAAAA,UAAAA,EACAA,EAAAA,OAAAA,qBAAAA,CACA,QAEAA,EAAAA,OAAAA,UAAAA,uBACAA,EAAAA,SAAAA,cAAAA,EAAAA,uBAIA,iBACAA,EAAAA,OAAAA,UAAAA,EACAA,EAAAA,MAAAA,YAAAA,MAAAA,QAAAA,OACAA,EAAAA,OAAAA,sBAAAA,WACAT,QAAAA,KAAAA,8FACA,OACAiE,SAAAA,EAAAA,KACAoG,UAAAA,IACAzK,KAAAA,SAGAa,EAAAA,SAAAA,IAAAA,EAAAA,OAAAA,OAAAA,GAEAA,EAAAA,SAAAA,gBACA,EAEA,OACAiL,gBAAAA,SAAAA,GAIA,GAHAjL,EAAAA,OAAAA,OAAAA,EACA0D,OAAAA,OAAAA,EACA1D,EAAAA,MAAAA,IAAAA,EAAAA,MAAAA,UAAAA,KACA,sCAMA,sCACA0J,EAAAA,UAAAA,EACAA,EAAAA,UAAAA,EACAA,EAAAA,UAAAA,EACA1J,EAAAA,MAAAA,YAAAA,GACAA,EAAAA,MAAAA,CAEA,MACA,UAAAuF,EAAAA,OAAAE,GAAA,uCACAlG,QAAAA,KAAAA,kBAAAA,EAAAA,GAEAS,EAAAA,MAAAA,UAAAA,EACAA,EAAAA,MAAAA,OAAAA,EAEAA,EAAAA,MAAAA,UAAAA,WACAA,EAAAA,MAAAA,MACA,EACAA,EAAAA,MAAAA,iBAAAA,uBACA,eACAA,EAAAA,MAAAA,OAAAA,EACA,+BACAA,EAAAA,MAAAA,MAAAA,MAAAA,IAAAA,EAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KACAA,EAAAA,MAAAA,MAAAA,OAAAA,IAAAA,EAAAA,KAAAA,EAAAA,OAAAA,EAAAA,OACA,iCAIAA,EAAAA,MAAAA,MAAAA,OAAAA,EAAAA,KAAAA,EAAAA,OAAAA,KACAA,EAAAA,MAAAA,MAAAA,QAAAA,EAAAA,KAAAA,EAAAA,OAAAA,OAJAA,EAAAA,MAAAA,MAAAA,MAAAA,IAAAA,EAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KACAA,EAAAA,MAAAA,MAAAA,OAAAA,IAAAA,EAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KAKA,CACA,CACA,gCACAA,EAAAA,OAAAA,wBAGAA,EAAAA,OAAAA,UAAAA,iBACAA,EAAAA,OAAAA,UAAAA,CAGA,EACAkL,eAAAA,WACA3L,QAAAA,KAAAA,oBACAS,EAAAA,OAAAA,UAAAA,kBAEA,+BACAA,EAAAA,OAAAA,UAAAA,GAEA,iBACAA,EAAAA,SAAAA,cAAAA,EAAAA,sBAIA,EACAmL,uBAAAA,SAAAA,GACA5L,QAAAA,MAAAA,0BAAAA,GACAoE,MAAAA,0BAAAA,IAEA,gEACAA,MAAAA,mFAOAyH,EAAAA,gBACA,GAEA,oDAEA,cACApL,EAAAA,iBAAAA,CAAA+D,OAAAA,EAAAzD,OAAAA,IAAA,YAEA+K,EAAAA,gBAAAA,GAEA,mBACAC,EAAAA,SAAAA,SAAAA,GACAtL,EAAAA,sBAAAA,GAAAA,WACAqL,EAAAA,gBACA,GACA,IAIArL,EAAAA,sBAAAA,GAAAA,WACAqL,EAAAA,gBACA,GACA,gBACAA,EAAAA,uBAAAA,EACA,GACA,CArBAE,EAAAA,EAsBA,+CAEA,cACAvL,EAAAA,iBAAAA,CAAAM,OAAAA,IAAA,YACA+K,EAAAA,gBAAAA,GAEArL,EAAAA,sBAAAA,GAAAA,WACAqL,EAAAA,gBACA,GACA,gBACAA,EAAAA,uBAAAA,EACA,GACA,CAXAG,EAAAA,EAYA,gDAEA,cACA,6BACA9L,UAAAA,gBAAAA,CACAY,OAAAA,EACAyD,MAAAA,CACAwB,MAAAA,CAAAC,IAAAA,MACAC,OAAAA,CAAAD,IAAAA,MACAE,UAAAA,CAAAF,IAAAA,OAEA7F,MAAA8L,IACAJ,EAAAA,gBAAAA,GAEArL,EAAAA,sBAAAA,GAAAA,WACAqL,EAAAA,gBACA,IAEAK,YAAAA,GAAAA,EAAAA,IACA9L,OAAA,YACAyL,EAAAA,uBAAAA,EACA,SACA,0CACA3L,UAAAA,aAAAA,gBAAAA,CACAY,OAAAA,EACAyD,MAAAA,CACAwB,MAAAA,CAAAC,IAAAA,MACAC,OAAAA,CAAAD,IAAAA,MACAE,UAAAA,CAAAF,IAAAA,OAEA7F,MAAA8L,IACAJ,EAAAA,gBAAAA,GAEArL,EAAAA,sBAAAA,GAAAA,WACAqL,EAAAA,gBACA,GAFA,IAGAzL,OAAA,YACAyL,EAAAA,uBAAAA,EACA,QACA,CACA,+DACAA,EAAAA,uBAAAA,GACA1H,MAAAA,EACA,CACA,CA3CAC,EAAAA,EA6CA,2DAEA,cACA,6BACAlE,UAAAA,gBAAAA,CACAY,OAAAA,EACAyD,MAAAA,CACAwB,MAAAA,CAAAC,IAAAA,MACAC,OAAAA,CAAAD,IAAAA,MACAE,UAAAA,CAAAF,IAAAA,OAEA7F,MAAA8L,IACAzL,EAAAA,iBAAAA,CAAAM,OAAAA,IAAA,YAGA,MAFAN,EAAAA,MAAAA,EAGA,SACA,gCAEA,oDACA2L,EAAAA,KAAAA,GACAA,EAAAA,KAAAA,EAAAA,iBAAAA,IACAhL,EAAAA,IAAAA,YAAAA,EACA,MACAgL,EAAAA,KAAAA,EAAAA,MAAAA,iBAAAA,IACAA,EAAAA,KAAAA,EAAAA,iBAAAA,IACAhL,EAAAA,IAAAA,YAAAA,GAEA0K,EAAAA,gBAAAA,GACArL,EAAAA,sBAAAA,GAAAA,WACAqL,EAAAA,gBACA,GACA,gBACA9L,QAAAA,KAAAA,UAAAA,GACAoE,MAAAA,UAAAA,EACA,GAvBA,IAwBA/D,OAAA,YACAyL,EAAAA,uBAAAA,EACA,SACA,0CACA3L,UAAAA,aAAAA,gBAAAA,CACAY,OAAAA,EACAyD,MAAAA,CACAwB,MAAAA,CAAAC,IAAAA,MACAC,OAAAA,CAAAD,IAAAA,MACAE,UAAAA,CAAAF,IAAAA,OAEA7F,MAAA8L,IACAzL,EAAAA,iBAAAA,CAAAM,OAAAA,IAAA,YAIA,MAHAN,EAAAA,MAAAA,EAIA,SACA,gCAEA,oDACA2L,EAAAA,KAAAA,GACAA,EAAAA,KAAAA,EAAAA,iBAAAA,IACAhL,EAAAA,IAAAA,YAAAA,EACA,MACAgL,EAAAA,KAAAA,EAAAA,MAAAA,iBAAAA,IACAA,EAAAA,KAAAA,EAAAA,iBAAAA,IACAhL,EAAAA,IAAAA,YAAAA,GAEA0K,EAAAA,gBAAAA,GACArL,EAAAA,sBAAAA,GAAAA,WACAqL,EAAAA,gBACA,GACA,gBACA9L,QAAAA,KAAAA,UAAAA,GACAoE,MAAAA,UAAAA,EACA,GAxBA,IAyBA/D,OAAA,YACAyL,EAAAA,uBAAAA,EACA,QACA,CACA,+DACAA,EAAAA,uBAAAA,GACA1H,MAAAA,EACA,CACA,CAhFAiI,EAAAA,EAiFA,CAEA,EAEAnB,uBACA,wHACA,EAEAC,2BACA,8HACA,EACAE,2BACA,4HACA,EACAxJ,eACA,WACA,EAEAyK,iBAAAA,EAAAA,EAAAA,GAEAC,EAAAA,KAAAA,oBAAAA,GACAA,EAAAA,KAAAA,cAAAA,GAEAvM,QAAAA,KAAAA,oBAAAA,GAEAG,UAAAA,aAAAA,aAAAA,GAAAA,MAAAA,SAAAA,GACAqM,EAAAA,EAEA,IAAAnM,OAAA,aACA,2EAGA,aACA+D,MAAAA,EAAAA,SAGAA,MAAAA,2EANAA,MAAAA,0HASAqI,EAAAA,EACA,GACA,EACA3H,sBAAAA,EAAAA,GACA1D,EAAAA,iBAAAA,SAAAA,WACAkD,IACAA,EAAAA,WAAAA,CACA,OACAlD,EAAAA,iBAAAA,YAAAA,WACAkD,IACAA,EAAAA,WAAAA,CACA,OACAlD,EAAAA,YAAAA,SAAAA,SAAAA,GACA2D,EAAAA,iBAAAA,SAAAA,WACAT,IACAA,EAAAA,WAAAA,CACA,OACAS,EAAAA,iBAAAA,YAAAA,WACAT,IACAA,EAAAA,WAAAA,CACA,MACA,GACA,EAEAoI,oBAAAA,GACA,QAQA,GAPA,aACAH,EAAAA,MAAAA,CAAAA,GAEA,aACAA,EAAAA,MAAAA,CAAAA,IAGA,kBACAA,EAAAA,MAAAA,SAAAA,CAAAA,EACA,gDACAA,EAAAA,MAAAA,SAAAA,CACAvL,MAAAA,EAEA,CAEA,YACA,SAGA,oCACAuL,EAAAA,MAAAA,MAAAA,CAAAA,EACAA,EAAAA,MAAAA,OAAAA,CAAAA,EACA,gDACAA,EAAAA,MAAAA,SAAAA,CACAvL,MAAAA,EAEA,CAEA,8BAEA,4BACA2L,EAAAA,IACAC,EAAAA,MAEArO,EAAAA,EAAAA,MAAAA,KACAoO,EAAAA,SAAAA,EAAAA,IACAC,EAAAA,SAAAA,EAAAA,KAIA,4EAYA,OAVA,GACAL,EAAAA,MAAAA,MAAAA,CAAAtG,IAAAA,GACAsG,EAAAA,MAAAA,OAAAA,CAAAtG,IAAAA,KAGAsG,EAAAA,MAAAA,MAAAA,CAAAvL,MAAAA,GACAuL,EAAAA,MAAAA,OAAAA,CAAAvL,MAAAA,IAGAhB,QAAAA,KAAAA,qBAAAA,GACA,CACA,EAEA6M,cAAAA,GACA,YACA,SAGA,6BAEA,gBACA,SAGAtO,EAAAA,SAAAA,GAGA,gCACAgO,EAAAA,MAAAA,MAAAA,CAAAA,EACAA,EAAAA,MAAAA,OAAAA,CAAAA,GAGA,4EAOA,OALAA,EAAAA,MAAAA,UADA,EACAA,CAAAtG,IAAAA,GAGAsG,CAAAvL,MAAAA,GAEA,CACA,EACAiE,wBACA,WACAxE,EAAAA,MAAAA,YAAAA,MAAAA,QAAAA,QACAA,EAAAA,KAAAA,EAAAA,SAAAA,UACAA,EAAAA,IAAAA,IAAAA,gBAAAA,EAAAA,MAEAA,EAAAA,MAAAA,IAAAA,EAAAA,MAAAA,UAAAA,KACAA,EAAAA,MAAAA,IAAAA,EAAAA,IACAA,EAAAA,MAAAA,OAAAA,EACAA,EAAAA,MAAAA,UAAAA,EACAA,EAAAA,MAAAA,OAKAA,EAAAA,SAAAA,UACAA,EAAAA,SAAAA,KAEA,wBACA,SACAyE,EAAAA,KAAAA,EAAAA,OAEAA,EAAAA,SAAAA,SAAAA,GACA9D,EAAAA,YAAAA,SAAAA,SAAAA,GACA2D,EAAAA,MACA,GACA,IACAtE,EAAAA,OAAAA,OAAAA,IACA,EACAoG,aAAAA,EAAAA,GAEA,GADA7G,QAAAA,KAAAA,wBACA,MAEA,YADAA,QAAAA,KAAAA,mCAGA,WAEAmE,OAAAA,aAAAA,OAAAA,cAAAA,OAAAA,oBAAAA,OAAAA,iBAAAA,OAAAA,eAEA,qBACA,qBACA1D,EAAAA,iBAAAA,QACAA,EAAAA,iBAAAA,MAEAA,EAAAA,iBAAAA,IAAAA,OAAAA,cAEAT,QAAAA,MAAAA,6BAIA,wDACA,MACA,oDACA8G,EAAAA,QAAAA,EACA,CACA,MACA,oDACAC,EAAAA,QAAAA,EACA,CAEA,eACA,EACA+F,YAAAA,GACA,MAIA9M,QAAAA,KAAAA,oBAAAA,EAAAA,IAGA,IACAoB,EAAAA,WAAAA,KACA,oBACA,eACA2L,EAAAA,GAAAA,QAAAA,KACA/M,QAAAA,KAAAA,gBACA+M,EAAAA,GAAAA,MAKA,CAHA,SACA/M,QAAAA,KAAAA,uCACAA,QAAAA,KAAAA,EACA,CAbA,MAJAA,QAAAA,KAAAA,6BAkBA,EACA+B,WACA,+CACAoD,EAAAA,EAAAA,GACA,kCACAC,EAAAA,OAAAA,SACAA,EAAAA,MAAAA,QAAAA,OACAA,EAAAA,KAAAA,KAAAA,IACAA,EAAAA,SAAAA,YAAAA,EAAAA,OACAC,SAAAA,KAAAA,YAAAA,GACAD,EAAAA,OAKA,EACApD,cACA,+CACAmD,EAAAA,EAAAA,GACA,4BACA,0BAAAvF,KAAAA,KAAAA,OACAuE,OAAAA,KAAAA,IAAAA,gBAAAA,GACA,GAEAmB,gBACA,wBACA,8BACA,2BAEA,GC7pB+M,MCQ3M,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIF,GAAe,GAAiB,Q,UC6ChC,IACA5H,KAAAA,SACAkN,WAAAA,CAAAoC,aAAAA,GAAAC,cAAAA,IACA3N,OACA,OAEAiC,qBAAAA,CACA,CACAnD,MAAAA,EACAK,KAAAA,oBACAF,MAAAA,2BAEA,CACAH,MAAAA,EACAK,KAAAA,aACAF,MAAAA,gBAEA,CACAH,MAAAA,EACAK,KAAAA,cACAF,MAAAA,iBAEA,CACAH,MAAAA,EACAK,KAAAA,oBACAF,MAAAA,6BAIAkD,uBAAAA,CACA,CACArD,MAAAA,EACAK,KAAAA,gBACAF,MAAAA,6BAEA,CACAH,MAAAA,EACAK,KAAAA,kBACAF,MAAAA,yBAEA,CACAH,MAAAA,EACAK,KAAAA,aACAF,MAAAA,cAEA,CACAH,MAAAA,EACAK,KAAAA,iBACAF,MAAAA,mBAGAoD,kBAAAA,GAEA,EACA+B,UAEA,EACAwJ,SAAAA,KACA,oCC1HyM,MCOrM,IAAY,OACd,GACA,EACA,GACA,EACA,KACA,WACA,MAIF,GAAe,GAAiB,QCChC,IACAxP,KAAAA,WACAkN,WAAAA,CAAAuC,MAAAA,EAAAC,OAAAA,KCrBiN,MCQ7M,IAAY,OACd,GACA,EACA,GACA,EACA,KACA,WACA,MAIF,GAAe,GAAiB,QCdhC3J,EAAAA,WAAAA,IAAQ4J,EAAAA,GAER,MAAMC,GAAS,CACb,CACEC,KAAM,IACN7P,KAAM,WACNC,UAAW6P,KAKTC,GAAS,IAAIJ,EAAAA,EAAU,CAC3BC,YAGF,UCpBA,IACII,aAAa,EACbC,UAAY,GACZC,aAAc,GACdC,YAAa,GACbC,WAAY,GAGZC,cAAc,EAEdxO,mBAAoB,GACpBC,kBAAmB,GACnBC,mBAAoB,GACpBT,oBAAqB,ICbzB,IACIgP,eAAgBC,GACLA,EAAMP,YAGjBQ,aAAcD,GACLA,EAAMN,UAGfQ,gBAAiBF,GACRA,EAAML,aAEfQ,cAAeH,GACNA,EAAMH,WAEfO,eAAgBJ,GACPA,EAAMJ,YAGfS,gBAAiBL,GACRA,EAAML,aAGfW,sBAAuBN,GACbA,EAAM1O,mBAEhBiP,qBAAsBP,GACZA,EAAMzO,kBAEhBiP,sBAAuBR,GACbA,EAAMxO,mBAEhBiP,uBAAwBT,GACfA,EAAMjP,oBAEf2P,aAAcV,GACLA,EAAMF,cCnCnB,IACIa,wBAAwBlE,SAGdA,EAAQmE,OAAO,iBAAkB,CAAChP,QAAS,SAEpD,EACF+O,yBAAyBlE,SAChBA,EAAQmE,OAAO,kBAAkB,CAAChP,QAAS,MACnD,EACD+O,sBAAsBlE,SACdA,EAAQmE,OAAO,eAAe,CAAChP,QAAS,MAC/C,EAED+O,wBAAwBlE,EAAQpL,SACxBoL,EAAQmE,OAAO,wBAAwB,CAAChP,QAASP,EAAKO,SAC7D,EACD+O,wBAAwBlE,EAAQpL,SACxBoL,EAAQmE,OAAO,wBAAwB,CAAChP,QAASP,EAAKO,SAC7D,EACD+O,wBAAwBlE,EAAQpL,SACvBoL,EAAQmE,OAAO,wBAAwB,CAAChP,QAASP,EAAKO,SAC9D,EACD+O,yBAAyBlE,EAAQpL,SACzBoL,EAAQmE,OAAO,yBAAyB,CAAChP,QAASP,EAAKO,SAC9D,EACD+O,sBAAsBlE,EAAQpL,SACrBoL,EAAQmE,OAAO,eAAe,CAACnE,QAAQpL,EAAKO,UAClD2D,EAAIsL,MAAM,SAAS,CAACvQ,MAAMe,EAAKO,SACjC,GC9BJ,IACIkP,aAAa,CAACd,EAAOe,KAClBf,EAAMN,UAAYqB,EAAQnP,OAA1B,EAGHoP,eAAe,CAAChB,EAAOe,KACrBf,EAAMP,YAAesB,EAAQnP,OAA7B,EAGFqP,gBAAgB,CAACjB,EAAMe,KACrBf,EAAML,aAAeoB,EAAQnP,OAA7B,EAGFsP,cAAc,CAAClB,EAAMe,KACnBf,EAAMH,WAAakB,EAAQnP,OAA3B,EAEFuP,eAAe,CAACnB,EAAMe,KACpBf,EAAMJ,YAAcmB,EAAQnP,QAC5BG,QAAQqP,KAAK,SAASpB,EAAtB,EAGFqB,gBAAgB,CAACrB,EAAMe,KACrBf,EAAMsB,aAAeP,EAAQnP,OAA7B,EAEF2P,sBAAsB,CAACvB,EAAOe,KAC3Bf,EAAM1O,mBAAqByP,EAAQnP,OAAnC,EAEH4P,sBAAsB,CAACxB,EAAMe,KAC1Bf,EAAMzO,kBAAoBwP,EAAQnP,OAAlC,EAEH6P,sBAAsB,CAACzB,EAAMe,KAC1Bf,EAAMxO,mBAAqBuP,EAAQnP,OAAnC,EAEH8P,uBAAuB,CAAC1B,EAAMe,KAC5Bf,EAAMjP,oBAAsBgQ,EAAQnP,OAApC,EAEFkO,aAAa,CAACE,EAAMe,KAClBf,EAAMF,aAAeiB,EAAQnP,OAA7B,GC9BN4D,EAAAA,WAAAA,IAAQmM,GAAAA,IAER,WAAmBA,GAAAA,GAAAA,MAAW,CAC5B3B,MAD4B,GAE5B4B,QAF4B,GAG5BC,UAH4B,GAI5BC,QAJ4B,GAK5BC,QAAS,CAAC,I,sBCdL,MAAMC,GAAS,CAapBnQ,QAAS,CACPoQ,aAAarQ,GACXsE,OAAOtE,QAAUA,EACjBG,QAAQqP,KAAK,WAAWxP,EAAQ2J,OAChC,IAOI2G,EAAY7Q,EAPZmB,EAAOpD,KAoCX,SAAS+S,EAAU9Q,EAAM6Q,GAEvB,SAASE,EAAoBjP,GAC3BpB,QAAQsQ,KAAK,mCAAqCC,KAAKC,UAAUL,EAAa,KAAM,OACpF7Q,EAAKgF,SAAS,CAAClD,OAAQA,GAAS9B,EAAK8B,QACtC,CAED,SAASqP,EAAmB7P,GAC1BtB,EAAKsB,MAAQA,EACbZ,QAAQqP,KAAK,sBAAwBkB,KAAKC,UAAUL,EAAa,KAAM,OACvEnQ,QAAQqP,KAAK,oCAAsCzO,EAAM8P,SACzD1Q,QAAQqP,KAAK,eAAiBzO,EAAMlD,MACpCsC,QAAQqP,KAAK,qBAAuBzO,EAAMuP,aACvB,yBAAfvP,EAAMlD,MAAkD,gCAAfkD,EAAMlD,MAAyD,UAAfkD,EAAMlD,MAEjGsC,QAAQsQ,KAAK,kDACbhR,EAAKgF,SAAS,CAAE1D,MAAOA,EAAOuP,YAAaA,MAExB,kBAAfvP,EAAMlD,MAA2C,wBAAfkD,EAAMlD,KAE1CsC,QAAQsQ,KAAK,4BACW,qBAAf1P,EAAMlD,MAA8C,oBAAfkD,EAAMlD,KAEpDsC,QAAQsQ,KAAK,oCACW,oBAAf1P,EAAMlD,MAA6C,0BAAfkD,EAAMlD,MAAmD,6BAAfkD,EAAMlD,KAE7FsC,QAAQsQ,KAAK,gCACW,cAAf1P,EAAMlD,KAEfsC,QAAQsQ,KAAK,4BAGbtQ,QAAQsQ,KAAK,gBAAkB1P,EAAMlD,MAEvC4B,EAAKgF,SAAS,CAAE1D,MAAOA,IAE1B,CAED,GArCAZ,QAAQqP,KAAK,YAqCW,UAApB/P,EAAKqR,WACPxQ,UAAUyQ,aAAaV,aAAaC,GAAa/P,KAAKiQ,GAAoBhQ,MAAMoQ,QAE3E,GAAuB,UAApBnR,EAAKqR,WACb,IAAKrR,EAAKuR,WAAavR,EAAK8B,QAAU9B,EAAK8B,OAAO0P,iBAAiBxI,QAAUhJ,EAAK8B,OAAO2P,OAAQ,CAC/F,IAAIC,EACAC,EAAqB,CACvBjL,MAAM,CAAChF,MAAOmP,EAAY3L,MAAMwB,MAAMhF,OACtCkF,OAAO,CAAClF,MAAOmP,EAAY3L,MAAM0B,OAAOlF,QAE1CgQ,EAAa1R,EAAK8B,OAAO0P,iBAAiB,GACtCE,GAAcA,EAAWE,mBAC3BlR,QAAQsQ,KAAK,iCAAmCC,KAAKC,UAAUS,EAAoB,KAAM,SACzFD,EAAWE,iBAAiBD,GAAoB7Q,MAAK,WACnDJ,QAAQsQ,KAAK,mCACbhR,EAAKgF,SAAS,CAAElD,OAAQ9B,EAAK8B,QAC9B,IAAEf,MAAMoQ,GAEZ,MACCtQ,UAAUyQ,aAAaV,aAAaC,GAAa/P,KAAKiQ,GAAoBhQ,MAAMoQ,OAGrD,gBAApBnR,EAAKqR,aACXxM,OAAOgN,aACRnR,QAAQsQ,KAAK,uCACbnQ,UAAUyQ,aAAaV,aAAaC,GAAa/P,KAAKiQ,GAAoBhQ,MAAMoQ,IAE5EtQ,UAAU4F,gBAEZ5F,UAAU4F,gBAAgBoK,GAAa/P,KAAKiQ,GAAoBhQ,MAAMoQ,GAC7DtQ,UAAUyQ,aAAa7K,gBAEhC5F,UAAUyQ,aAAa7K,gBAAgBoK,GAAa/P,KAAKiQ,GAAoBhQ,MAAMoQ,GAC1EtQ,UAAUyQ,aAAaV,aAChC/P,UAAUyQ,aAAaV,aAAaC,GAAa/P,KAAKiQ,GAAoBhQ,MAAMoQ,GAEhFzQ,QAAQsQ,KAAK,uDAIpB,CAjHqC,OAAnCzQ,EAAQ2J,MAAM4H,OAAOC,UACtB5Q,EAAK6Q,OAAOzC,OAAO,CAACjP,KAAK,eAAeC,QAAQ,OACN,OAAnCA,EAAQ2J,MAAM4H,OAAOC,WAC5B5Q,EAAK6Q,OAAOzC,OAAO,CAACjP,KAAK,eAAeC,QAAQ,OAI9B,gBAAjBA,EAAQD,OACTuQ,EAAY,CACVpP,OAAO,EACPyD,MAAO,CACLwB,MAAO,CAAEC,IAAM,MACfC,OAAQ,CAAED,IAAM,MAChBE,UAAW,CAAEF,IAAK,MAOtB3G,EAAM,CACJqR,WAAY9Q,EAAQD,KACpB0E,SAAS,SAASkF,GAChB,GAAGA,EAAMpI,OAAO,CACd,IAAIA,EAASoI,EAAMpI,OACnBX,EAAK6Q,OAAOzC,OAAO,CAACjP,KAAM,kBAAkBC,QAASuB,IACrDX,EAAK6Q,OAAOC,SAAS,oBAEtB,MACCvR,QAAQqP,KAAK,SAAS7F,EAAM5I,MAE/B,IAGLwP,EAAS9Q,EAAK6Q,EAgFf,EACDrD,YAAY1L,GACV,GAAKA,EAAL,CAIEoQ,IAAIlB,KAAK,oBAAsBlP,EAAOqQ,IAGxC,IACErQ,EAAOsQ,WAAa,KACpB,IAAI3E,EAAS3L,EAAOuQ,YACpB,IAAK,IAAI5M,KAASgI,EAChBA,EAAOhI,GAAO6M,QAAU,KACxBJ,IAAIlB,KAAK,gBACTvD,EAAOhI,GAAO8M,MAKjB,CAHC,MAAOjR,GACP4Q,IAAIlB,KAAK,uCACTkB,IAAIlB,KAAK1P,EACV,CACDQ,EAAS,IAdR,MAJCoQ,IAAIlB,KAAK,6BAmBZ,EACDhP,iBAAiBhC,GACf,GAAIA,GAAQA,EAAK8B,QAAwB,UAAd9B,EAAKM,MAAoBN,EAAK8B,OAAO0Q,iBAAiBxJ,OAAS,EACxF,IAAK,IAAIyJ,EAAI,EAAGA,EAAIzS,EAAK8B,OAAO0Q,iBAAiBxJ,OAAQyJ,IACvD/R,QAAQqP,KAAK,aAAa/P,EAAK+B,MAC3B/B,EAAK+B,MACyC,IAA5C/B,EAAK8B,OAAO0Q,iBAAiBC,GAAGC,UAClChS,QAAQsQ,KAAK,8BACbhR,EAAK8B,OAAO0Q,iBAAiBC,GAAGC,SAAU,EAC1C3U,KAAKqC,QAAS,IAGgC,IAA5CJ,EAAK8B,OAAO0Q,iBAAiBC,GAAGC,UAClChS,QAAQsQ,KAAK,gCACbhR,EAAK8B,OAAO0Q,iBAAiBC,GAAGC,SAAU,EAC1C3U,KAAKqC,QAAS,EAKvB,ICtKL+D,EAAAA,WAAAA,IAAQwO,MAGRxO,EAAAA,WAAAA,MAAUwM,IAGVxM,EAAAA,WAAAA,OAAAA,eAA2B,EAE3B,IAAIA,EAAAA,WAAI,CACNgK,OADM,GAENyE,MAFM,GAGN/U,OAAQsF,GAAKA,EAAE0P,KACdC,OAAO,O,GCnBNC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,OACf,CAGAJ,EAAoBjQ,EAAIuQ,E,WCzBxB,IAAIC,EAAW,GACfP,EAAoBQ,EAAI,SAASC,EAAQC,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASrB,EAAI,EAAGA,EAAIc,EAASvK,OAAQyJ,IAAK,CACrCiB,EAAWH,EAASd,GAAG,GACvBkB,EAAKJ,EAASd,GAAG,GACjBmB,EAAWL,EAASd,GAAG,GAE3B,IAJA,IAGIsB,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAAS1K,OAAQgL,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAaK,OAAOC,KAAKlB,EAAoBQ,GAAGW,OAAM,SAASpV,GAAO,OAAOiU,EAAoBQ,EAAEzU,GAAK2U,EAASM,GAAK,IAChKN,EAASU,OAAOJ,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbR,EAASa,OAAO3B,IAAK,GACrB,IAAI4B,EAAIV,SACER,IAANkB,IAAiBZ,EAASY,EAC/B,CACD,CACA,OAAOZ,CArBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAInB,EAAIc,EAASvK,OAAQyJ,EAAI,GAAKc,EAASd,EAAI,GAAG,GAAKmB,EAAUnB,IAAKc,EAASd,GAAKc,EAASd,EAAI,GACrGc,EAASd,GAAK,CAACiB,EAAUC,EAAIC,EAwB/B,C,eC5BAZ,EAAoBsB,EAAI,SAASjB,GAChC,IAAIkB,EAASlB,GAAUA,EAAOmB,WAC7B,WAAa,OAAOnB,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAL,EAAoB/P,EAAEsR,EAAQ,CAAEzO,EAAGyO,IAC5BA,CACR,C,eCNAvB,EAAoB/P,EAAI,SAASmQ,EAASqB,GACzC,IAAI,IAAI1V,KAAO0V,EACXzB,EAAoB0B,EAAED,EAAY1V,KAASiU,EAAoB0B,EAAEtB,EAASrU,IAC5EkV,OAAOU,eAAevB,EAASrU,EAAK,CAAE6V,YAAY,EAAMC,IAAKJ,EAAW1V,IAG3E,C,eCPAiU,EAAoB8B,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOhX,MAAQ,IAAIiX,SAAS,cAAb,EAGhB,CAFE,MAAOC,GACR,GAAsB,kBAAXpQ,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxBmO,EAAoB0B,EAAI,SAASQ,EAAKC,GAAQ,OAAOlB,OAAOmB,UAAUC,eAAeC,KAAKJ,EAAKC,EAAO,C,eCCtGnC,EAAoBqB,EAAI,SAASjB,GACX,qBAAXmC,QAA0BA,OAAOC,aAC1CvB,OAAOU,eAAevB,EAASmC,OAAOC,YAAa,CAAEvW,MAAO,WAE7DgV,OAAOU,eAAevB,EAAS,aAAc,CAAEnU,OAAO,GACvD,C,eCDA,IAAIwW,EAAkB,CACrB,IAAK,GAaNzC,EAAoBQ,EAAEQ,EAAI,SAAS0B,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4B5V,GAC/D,IAKIiT,EAAUyC,EALVhC,EAAW1T,EAAK,GAChB6V,EAAc7V,EAAK,GACnB8V,EAAU9V,EAAK,GAGIyS,EAAI,EAC3B,GAAGiB,EAASqC,MAAK,SAAS5D,GAAM,OAA+B,IAAxBsD,EAAgBtD,EAAW,IAAI,CACrE,IAAIc,KAAY4C,EACZ7C,EAAoB0B,EAAEmB,EAAa5C,KACrCD,EAAoBjQ,EAAEkQ,GAAY4C,EAAY5C,IAGhD,GAAG6C,EAAS,IAAIrC,EAASqC,EAAQ9C,EAClC,CAEA,IADG4C,GAA4BA,EAA2B5V,GACrDyS,EAAIiB,EAAS1K,OAAQyJ,IACzBiD,EAAUhC,EAASjB,GAChBO,EAAoB0B,EAAEe,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAO1C,EAAoBQ,EAAEC,EAC9B,EAEIuC,EAAqBC,KAAK,2BAA6BA,KAAK,4BAA8B,GAC9FD,EAAmB5M,QAAQuM,EAAqBO,KAAK,KAAM,IAC3DF,EAAmBzM,KAAOoM,EAAqBO,KAAK,KAAMF,EAAmBzM,KAAK2M,KAAKF,G,IC/CvF,IAAIG,EAAsBnD,EAAoBQ,OAAEL,EAAW,CAAC,MAAM,WAAa,OAAOH,EAAoB,KAAO,IACjHmD,EAAsBnD,EAAoBQ,EAAE2C,E","sources":["webpack://record_demo/./src/App.vue","webpack://record_demo/src/App.vue","webpack://record_demo/./src/App.vue?14ae","webpack://record_demo/./src/App.vue?0e40","webpack://record_demo/./src/components/index/HomePage.vue","webpack://record_demo/./src/components/AsideView.vue","webpack://record_demo/src/components/AsideView.vue","webpack://record_demo/./src/components/AsideView.vue?c4d3","webpack://record_demo/./src/components/AsideView.vue?071f","webpack://record_demo/./src/components/Record.vue","webpack://record_demo/./src/views/AdvanceRecord.vue","webpack://record_demo/./src/views/recordType/RecordMutistream.vue","webpack://record_demo/./src/api/day.js","webpack://record_demo/./src/common/Bus.js","webpack://record_demo/src/views/recordType/RecordMutistream.vue","webpack://record_demo/./src/views/recordType/RecordMutistream.vue?4935","webpack://record_demo/./src/views/recordType/RecordMutistream.vue?11a7","webpack://record_demo/./src/views/recordType/RecordRegionalScreen.vue","webpack://record_demo/src/views/recordType/RecordRegionalScreen.vue","webpack://record_demo/./src/views/recordType/RecordRegionalScreen.vue?02d3","webpack://record_demo/./src/views/recordType/RecordRegionalScreen.vue?72e3","webpack://record_demo/./src/views/recordType/GifRecord.vue","webpack://record_demo/src/views/recordType/GifRecord.vue","webpack://record_demo/./src/views/recordType/GifRecord.vue?233b","webpack://record_demo/./src/views/recordType/GifRecord.vue?6101","webpack://record_demo/./src/views/recordType/MicrophoneAndMp3Record.vue","webpack://record_demo/./src/api/fileSelector.js","webpack://record_demo/./src/api/StereoAudioRecorder.js","webpack://record_demo/src/views/recordType/MicrophoneAndMp3Record.vue","webpack://record_demo/./src/views/recordType/MicrophoneAndMp3Record.vue?316d","webpack://record_demo/./src/views/recordType/MicrophoneAndMp3Record.vue?e5ed","webpack://record_demo/src/views/AdvanceRecord.vue","webpack://record_demo/./src/views/AdvanceRecord.vue?202f","webpack://record_demo/./src/views/AdvanceRecord.vue?b398","webpack://record_demo/./src/views/NormalRecord.vue","webpack://record_demo/src/views/NormalRecord.vue","webpack://record_demo/./src/views/NormalRecord.vue?447a","webpack://record_demo/./src/views/NormalRecord.vue?a10a","webpack://record_demo/src/components/Record.vue","webpack://record_demo/./src/components/Record.vue?83cf","webpack://record_demo/./src/components/Record.vue?db17","webpack://record_demo/src/components/index/HomePage.vue","webpack://record_demo/./src/components/index/HomePage.vue?f3cc","webpack://record_demo/./src/components/index/HomePage.vue?00a6","webpack://record_demo/./src/router/index.js","webpack://record_demo/./src/store/state/state.js","webpack://record_demo/./src/store/state/getters.js","webpack://record_demo/./src/store/state/actions.js","webpack://record_demo/./src/store/state/mutations.js","webpack://record_demo/./src/store/index.js","webpack://record_demo/./src/mixmin/mixmin.js","webpack://record_demo/./src/main.js","webpack://record_demo/webpack/bootstrap","webpack://record_demo/webpack/runtime/chunk loaded","webpack://record_demo/webpack/runtime/compat get default export","webpack://record_demo/webpack/runtime/define property getters","webpack://record_demo/webpack/runtime/global","webpack://record_demo/webpack/runtime/hasOwnProperty shorthand","webpack://record_demo/webpack/runtime/make namespace object","webpack://record_demo/webpack/runtime/jsonp chunk loading","webpack://record_demo/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app\"},[_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"app\",\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=559d8a16&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"559d8a16\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app\"},[_c('el-container',[_c('el-aside',{staticClass:\"el-aside\",attrs:{\"width\":\"260px\"}},[_c('Aside')],1),_c('el-container',[_c('el-main',[_c('Record')],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h2',[_vm._v(\"Options\")]),_c('div',{staticClass:\"setDevicesWrapper\"},[_c('div',{staticClass:\"setDevices\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"audio Source\")]),_c('select',{ref:\"audioSource\",attrs:{\"id\":\"audioSource\"},on:{\"change\":_vm.getAudioSource}},_vm._l((_vm.audioSourceOption),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.text))])}),0)]),_c('div',{staticClass:\"setDevices\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"audio output device\")]),_c('select',{ref:\"audioOutput\",attrs:{\"id\":\"audioOutput\"},on:{\"change\":_vm.getAudiooutput}},_vm._l((_vm.audioOutputOption),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.text))])}),0)]),_c('div',{staticClass:\"setDevices\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"video Source\")]),_c('select',{ref:\"videoSource\",attrs:{\"id\":\"videoSource\"},on:{\"change\":_vm.getCamera}},_vm._l((_vm.videoSourceOption),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.text))])}),0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentRecordMethod === 'advanced-Recorded' ),expression:\"currentRecordMethod === 'advanced-Recorded' \"}],staticClass:\"setMute\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"isMute\")]),_c('select',{ref:\"isMute\",attrs:{\"id\":\"isMute\"},on:{\"change\":_vm.isSetMute}},_vm._l((_vm.muteData),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.value))])}),0)]),_c('div',{staticClass:\"recordMethod\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"record method\")]),_c('select',{ref:\"recordMethod\",staticClass:\"recording-media\",on:{\"change\":_vm.getRecordMethod}},_vm._l((_vm.recordMethodOption),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.text))])}),0)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h2>Options</h2>\r\n    <div class=\"setDevicesWrapper\">\r\n      <div class=\"setDevices\">\r\n        <label class=\"label\">audio Source</label>\r\n        <select id=\"audioSource\" ref=\"audioSource\" @change=\"getAudioSource\">\r\n          <option v-for=\"(item,index) in audioSourceOption\" :key=\"index\" :value=\"item.value\">{{ item.text }}</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"setDevices\">\r\n        <label class=\"label\">audio output device</label>\r\n        <select id=\"audioOutput\" ref=\"audioOutput\" @change=\"getAudiooutput\">\r\n          <option v-for=\"(item,index) in audioOutputOption\" :key=\"index\" :value=\"item.value\">{{ item.text }}</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"setDevices\">\r\n        <label class=\"label\">video Source</label>\r\n        <select id=\"videoSource\" ref=\"videoSource\" @change=\"getCamera\">\r\n          <option v-for=\"(item,index) in videoSourceOption\" :key=\"index\" :value=\"item.value\">{{ item.text }}</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"setMute\" v-show=\"currentRecordMethod === 'advanced-Recorded' \">\r\n        <label class=\"label\">isMute</label>\r\n        <select id=\"isMute\" ref=\"isMute\" @change=\"isSetMute\">\r\n          <option v-for=\"(item,index) in muteData\" :key=\"index\" :value=\"item.value\">{{ item.value}}</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"recordMethod\">\r\n        <label class=\"label\">record method</label>\r\n        <select class=\"recording-media\" ref=\"recordMethod\" @change=\"getRecordMethod\">\r\n          <option v-for=\"(item,index) in recordMethodOption\" :key=\"index\" :value=\"item.value\">{{ item.text}}</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"Aside\",\r\n    data() {\r\n      return {\r\n        // source\r\n        audioSourceOption: [],\r\n        audioOutputOption: [],\r\n        videoSourceOption: [],\r\n        recordMethodOption:[\r\n          {index: 0, text: 'normal-Recorded', value: 'normal-Recorded'},\r\n          {index: 1, text: 'advanced-Recorded', value: 'advanced-Recorded'}\r\n        ],\r\n\r\n        currentAudioSource: '',\r\n        currentAudioutput: '',\r\n        currentVideoSource: '',\r\n        currentRecordMethod: '',\r\n\r\n        muteData: [\r\n          {index: 0, value: '否'},\r\n          {index: 1, value: '是'}\r\n        ],\r\n        isMute: '',\r\n      }\r\n    },\r\n    async created() {\r\n      this.getDevices()\r\n      // await this.getUserMediaOfAudio()\r\n      // await this.getAudioVideo()\r\n    },\r\n\r\n    mounted() {\r\n      this.audioSource = this.$refs.audioSource;\r\n      this.audiooutput = this.$refs.audioOutput;\r\n      this.videoSource = this.$refs.videoSource;\r\n      this.isMuteElement = this.$refs.isMute\r\n      this.recordMethod = this.$refs.recordMethod\r\n      this.currentRecordMethod = this.recordMethodOption[0].value\r\n      this.$store.commit({type: 'setCurrentRecordMethod', content: this.currentRecordMethod})\r\n\r\n    },\r\n    methods: {\r\n      handleOpen(key, keyPath) {\r\n        console.log(key, keyPath);\r\n      },\r\n      handleClose(key, keyPath) {\r\n        console.log(key, keyPath);\r\n      },\r\n      // 获取设备信息\r\n      getDevices() {\r\n        let This = this\r\n        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\r\n          console.log('不支持获取设备信息！')\r\n        } else {\r\n          navigator.mediaDevices.enumerateDevices()\r\n            .then(this.showDevice)\r\n            .catch((err) => {\r\n              console.log(err.name + ':' + err.message)\r\n            })\r\n          // let devices = await navigator.mediaDevices.enumerateDevices()\r\n          // await This.showDevice(devices)\r\n        }\r\n      },\r\n      // 展示设备信息\r\n      showDevice(deviceInfos) {\r\n        const This = this\r\n        deviceInfos.forEach(function (deviceinfo) {\r\n          var option = {\r\n            text: deviceinfo.label,\r\n            value: deviceinfo.deviceId\r\n          }\r\n          // console.log(deviceinfo);\r\n          if (deviceinfo.deviceId !== 'default' && deviceinfo.deviceId !== 'communications') {\r\n            if (deviceinfo.kind === 'audioinput') {\r\n              This.audioSourceOption.push(option)\r\n            } else if (deviceinfo.kind === 'audiooutput') {\r\n              This.audioOutputOption.push(option)\r\n            } else if (deviceinfo.kind === 'videoinput') {\r\n              This.videoSourceOption.push(option)\r\n            }\r\n          }\r\n        })\r\n\r\n        This.currentAudioSource = This.audioSourceOption[0].value\r\n        This.currentAudioutput = This.audioOutputOption[0].value\r\n        This.currentVideoSource = This.videoSourceOption[0].value\r\n\r\n\r\n        // console.warn(\"This.videoSourceOption:\", This.videoSourceOption)\r\n        This.$store.commit({type: 'setCurrentAudioSource', content: This.currentAudioSource})\r\n        This.$store.commit({type: 'setCurrentAudioOutput', content: This.currentAudioutput})\r\n        This.$store.commit({type: 'setCurrentVideoSource', content: This.currentVideoSource})\r\n        this.$store.commit({type: 'setMuteState', content: This.isMuteElement.value === '是' ? true : false })\r\n        // This.getUserMediaOfAudio()\r\n        console.warn(\"This.$store:\",This.$store)\r\n      },\r\n      // 获取当前麦克风输入设备\r\n      getAudioSource() {\r\n        this.currentAudioSource = this.audioSource.value;\r\n        // console.warn(\"this.currentAudioSource:\",this.currentAudioSource)\r\n        this.$store.dispatch(\"modifyAudioSource\", {content: this.currentAudioSource})\r\n        // this.getUserMediaOfAudio()\r\n      },\r\n      // 获取当前麦克风输出设备\r\n      getAudiooutput() {\r\n        this.currentAudioutput = this.audiooutput.value;\r\n        // this.attachSinkId()\r\n        this.$store.dispatch(\"modifyAudioOutput\", {content: this.currentAudioutput})\r\n      },\r\n      // 获取当前摄像头\r\n      getCamera() {\r\n        this.currentVideoSource = this.videoSource.value;\r\n        this.$store.dispatch(\"modifyVideoSource\", {content: this.currentVideoSource})\r\n      },\r\n      // 获取当前页面的录制方式\r\n      getRecordMethod(){\r\n        this.currentRecordMethod = this.recordMethod.value\r\n        this.$store.dispatch(\"modifyRecordMethod\", {content: this.currentRecordMethod})\r\n      },\r\n      attachSinkId(element, sinkId) {\r\n        if (typeof element.sinkId !== 'undefined') {\r\n          element.setSinkId(sinkId)\r\n            .then(() => {\r\n              console.log(`Success, audio output device attached: ${sinkId}`);\r\n            })\r\n            .catch(error => {\r\n              let errorMessage = error;\r\n              if (error.name === 'SecurityError') {\r\n                errorMessage = `You need to use HTTPS for selecting audio output device: ${error}`;\r\n              }\r\n              console.error(errorMessage);\r\n              // Jump back to first output device in the list as it's the default.\r\n              audioOutputSelect.selectedIndex = 0;\r\n            });\r\n        } else {\r\n          console.warn('Browser does not support output device selection.');\r\n        }\r\n      },\r\n      // 拿到音频媒体流\r\n      async getUserMediaOfAudio() {\r\n        console.log(`Requesting audio stream`)\r\n        let constraints = {\r\n          audio: {\r\n            exact: {\r\n              deviceId: this.currentAudioSource\r\n            },\r\n            noiseSuppression: true,\r\n            echoCancellation: true\r\n          }\r\n        }\r\n\r\n        if ('mediaDevices' in navigator) {\r\n          try {\r\n            const stream = await navigator.mediaDevices.getUserMedia(constraints)\r\n            let isMute = this.isMuteElement.value === '是' ? true : false ;\r\n            this.streamMuteSwitch({stream: stream, type: 'audio', mute: isMute})\r\n            this.$store.commit({type: 'setAudioStream', content: stream})\r\n            console.log('Received local audio stream')\r\n          } catch (error) {\r\n            console.log(`getUserMedia error: ${error}`)\r\n          }\r\n        }\r\n      },\r\n      // 获取页面当前是否静音\r\n      isSetMute() {\r\n        let isMute = this.isMuteElement.value === '是' ? true : false ;\r\n        this.$store.dispatch(\"modifyMuteState\", {content: isMute})\r\n        // let audioStream = this.$store.getters.getAudioStream\r\n        //\r\n        // this.streamMuteSwitch({stream: audioStream, type: 'audio', mute: isMute})\r\n      },\r\n      // 处理当前静音/非静音逻辑\r\n      streamMuteSwitch(data) {\r\n        if (data && data.stream && data.type === 'audio' && data.stream.getAudioTracks().length > 0) {\r\n          for (let i = 0; i < data.stream.getAudioTracks().length; i++) {\r\n            console.warn(\"data.mute:\",data.mute)\r\n            if (data.mute) {\r\n              if (data.stream.getAudioTracks()[i].enabled === true) {\r\n                console.info('MuteStream exec mute audio')\r\n                data.stream.getAudioTracks()[i].enabled = false\r\n                this.isMute = true\r\n              }\r\n            } else {\r\n              if (data.stream.getAudioTracks()[i].enabled === false) {\r\n                console.info('MuteStream exec unmute audio')\r\n                data.stream.getAudioTracks()[i].enabled = true\r\n                this.isMute = false\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  h2{\r\n    width: 100%;\r\n    height: 30px;\r\n    text-align: center;\r\n    margin: 20px 0;\r\n  }\r\n  .setDevicesWrapper{\r\n    margin-top: 20px;\r\n  }\r\n  .setDevices, .setMute, .recordMethod{\r\n    width: 100%;\r\n    height: 80px;\r\n    margin: 5px ;\r\n  }\r\n  .label{\r\n    color: white;\r\n    font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n    margin: 2px ;\r\n  }\r\n  select{\r\n    width: 240px;\r\n    height: 40px;\r\n    margin: 5px;\r\n  }\r\n  /*option{*/\r\n  /*width:240px;*/\r\n  /*}*/\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AsideView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AsideView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AsideView.vue?vue&type=template&id=e71b608e&scoped=true&\"\nimport script from \"./AsideView.vue?vue&type=script&lang=js&\"\nexport * from \"./AsideView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AsideView.vue?vue&type=style&index=0&id=e71b608e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e71b608e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"record\"},[(_vm.currentRecordMethod ==='normal-Recorded')?_c('div',{staticClass:\"recordWrapper\"},[_c('NormalRecord',{attrs:{\"normalRecordingMedia\":_vm.normalRecordingMedia}})],1):_vm._e(),(_vm.currentRecordMethod ==='advanced-Recorded')?_c('div',[_c('AdvanceRecord',{attrs:{\"advancedRecordingMedia\":_vm.advancedRecordingMedia}})],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"advanceRecord\"},[_c('div',{staticClass:\"recordBttonWrapper\"},[_c('div',{staticClass:\"recordBtton\"},[_c('select',{ref:\"advancedRecordMedia\",staticClass:\"recording-media\",on:{\"change\":_vm.getAdavncedRecordMedia}},_vm._l((_vm.advancedRecordingMedia),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.text))])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentRecordType === 'record-regionalScreen' ),expression:\"currentRecordType === 'record-regionalScreen' \"}],ref:\"shareScreenBtn\",staticClass:\"recordBtn\"},[_c('button',{ref:\"shareScreenBtn\",on:{\"click\":_vm.handleShareStream}},[_vm._v(\"开启共享\")])]),_c('div',{staticClass:\"recordBtn\"},[_c('button',{ref:\"startBtn\",staticClass:\"startBtn\",on:{\"click\":_vm.handleRecord}},[_vm._v(\"Start Recording\")])])])]),_c('div',{staticClass:\"recordContent\"},[(_vm.currentRecordType === 'record-camera-plus-screen' )?_c('div',[_c('MutiStream')],1):_vm._e(),(_vm.currentRecordType === 'record-regionalScreen' )?_c('div',[_c('RegionalStream')],1):_vm._e(),(_vm.currentRecordType === 'gif-record' )?_c('div',[_c('GifRecord')],1):_vm._e(),(_vm.currentRecordType === 'microphone-mp3' )?_c('div',[_c('MicrophoneMp3')],1):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"recordMutistream\"},[_c('div',{staticClass:\"recordContainer\"},[_c('div',{ref:\"downLoadBtn\",staticClass:\"downLoadBtn\",staticStyle:{\"text-align\":\"center\",\"display\":\"none\"}},[_c('button',{staticClass:\"save-to-disk\",on:{\"click\":_vm.downLoad}},[_vm._v(\"Save To Disk\")]),_c('button',{staticClass:\"open-new-tab\",on:{\"click\":_vm.startNewTab}},[_vm._v(\"Open New Tab\")])]),_c('div',{staticClass:\"mutistreamContent\"},[_c('video',{ref:\"mutistreamVideo\",staticClass:\"mutistreamVideo\",staticStyle:{\"transform\":\"scale(1)\"},attrs:{\"width\":\"640\"}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n/***********************时间处理*************************/\r\nlet  beautyDate =  function (date) {\r\n  var yyyy = date.getFullYear();\r\n  var m = date.getMonth() + 1; // getMonth() is zero-based\r\n  var d = date.getDate();\r\n  var h = date.getHours();\r\n  var mi = date.getMinutes();\r\n  var sec = date.getSeconds();\r\n  var msec = date.getMilliseconds();\r\n\r\n  var mm  = m < 10 ? \"0\" + m : m;\r\n  var dd  = d < 10 ? \"0\" + d : d;\r\n  var hh  = h < 10 ? \"0\" + h : h;\r\n  var min = mi < 10 ? \"0\" + mi : mi;\r\n  var ss  = sec < 10 ? \"0\" + sec : sec;\r\n  var mss = msec < 10 ? \"00\" + msec : ( msec < 100 ? \"0\" + msec : msec );\r\n\r\n  return \"\".concat(yyyy).concat(\"-\").concat(mm).concat(\"-\").concat(dd).concat(\"@\").concat(hh).concat(\":\").concat(min).concat(\":\").concat(ss).concat(\".\").concat(mss);\r\n}\r\nexport default beautyDate\r\n","import Vue from 'vue'\r\nexport const Bus = new Vue({\r\n  data(){\r\n    return {\r\n      data:{}\r\n    }\r\n  },\r\n  created(){\r\n    this.$on('getData',(value)=>{\r\n      this.data = value.data\r\n    })\r\n  },\r\n})\r\n","<template>\r\n  <div class=\"recordMutistream\">\r\n    <div class=\"recordContainer\">\r\n      <div class=\"downLoadBtn\" style=\"text-align: center; display:none;\" ref=\"downLoadBtn\">\r\n        <button class=\"save-to-disk\" @click=\"downLoad\">Save To Disk</button>\r\n        <!--<button id=\"upload-to-php\">Upload to PHP</button>-->\r\n        <button class=\"open-new-tab\" @click=\"startNewTab\">Open New Tab</button>\r\n      </div>\r\n      <div class=\"mutistreamContent\" >\r\n        <!--<video class=\"mutistreamVideo\" ref=\"mutistreamVideo\" style=\"width: 100%;\"></video>-->\r\n        <video class=\"mutistreamVideo\" ref=\"mutistreamVideo\" width=\"640\"  style=\"transform: scale(1)\"></video>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import beautyDate from '@/api/day.js'\r\n    import RecordRTC from 'recordrtc'\r\n    import {Bus} from \"@/common/Bus.js\"\r\n\r\n    export default {\r\n        name: \"RecorsMutistream\",\r\n        data(){\r\n          return{\r\n             isMute: '',  //是否静音\r\n          }\r\n        },\r\n\r\n        mounted(){\r\n          this.video = this.$refs.mutistreamVideo\r\n          this.isMute = this.$store.getters.getMuteState\r\n          // this.button = this.$refs.startRecording\r\n          console.warn(\"this.video:\",this.video)\r\n          if(!navigator.getDisplayMedia && !navigator.mediaDevices.getDisplayMedia) {\r\n            let error = 'Your browser does NOT supports getDisplayMedia API.';\r\n            throw new Error(error);\r\n          }\r\n\r\n          this.$nextTick(()=>{\r\n            console.warn(\"nextTick nextTick nextTick nextTick\")\r\n            Bus.$on(\"startRecording\",(data)=>{\r\n              console.warn(\"data:\",data)\r\n              this.button = data.element\r\n              this.button.value = data.value\r\n              this.startRecording()\r\n\r\n            })\r\n\r\n            Bus.$on(\"isMute\",(data)=>{\r\n              console.warn(\"data:\",data)\r\n              this.isMute = data.value\r\n              if(this.camera){\r\n                this.streamMuteSwitch({stream: this.camera, type: 'audio', mute:this.isMute})\r\n              }\r\n            })\r\n\r\n          })\r\n        },\r\n        methods:{\r\n          startRecording(){\r\n             let This = this\r\n            if(This.button.value === 'Stop Recording'){\r\n               This.button.disabled = true;\r\n               This.button.disableStateWaiting = true;\r\n               setTimeout(function() {\r\n                 This.button.disabled = false;\r\n                 This.button.disableStateWaiting = false;\r\n               }, 2000);\r\n\r\n               // This.button.innerHTML = 'Start Recording';\r\n\r\n               This.recorder.stopRecording(This.stopRecordingCallback)\r\n               return\r\n             }\r\n\r\n            This.$refs.downLoadBtn.style.display = \"none\"\r\n             This.captureScreen(function(screen) {\r\n               This.screen = screen\r\n\r\n               This.keepStreamActive(screen);\r\n               This.captureCamera(function(camera) {\r\n                 This.camera = camera\r\n                 if(This.isMute){\r\n                   This.streamMuteSwitch({stream: This.camera, type: 'audio', mute: This.isMute})\r\n                 }\r\n                 This.keepStreamActive(camera);\r\n\r\n                 screen.width = window.screen.width;\r\n                 screen.height = window.screen.height;\r\n                 screen.fullcanvas = true;\r\n                 console.warn(\"screen.width :\", screen.width + \"  * \" + screen.height)\r\n\r\n                 camera.width = 320;\r\n                 camera.height = 240;\r\n                 camera.top = screen.height - camera.height ;\r\n                 camera.left = screen.width - camera.width ;\r\n\r\n                 This.button.value = 'Stop Recording'\r\n                 Bus.$emit(\"startRecordingValue\", {isRecording: false, value: 'Stop Recording'})\r\n                 // This.button.innerHTML = \"stop Recording\"\r\n\r\n                 This.recorder = RecordRTC([screen, camera], {\r\n                   type: 'video',\r\n                   mimeType: 'video/webm',\r\n                   previewStream: function(s) {\r\n                     console.warn(\"s:\",s)\r\n                     window.stream = s\r\n                     This.video.muted = true;\r\n                     This.video.srcObject = s;\r\n                     This.video.play()\r\n                     // This.video.controls = true\r\n                   }\r\n                 });\r\n                 This.recorder.startRecording();\r\n\r\n               },function(error) {\r\n                 console.error(error);\r\n                 alert('get camera failed.\\n' + error);\r\n               });\r\n             });\r\n          },\r\n          captureScreen(callback) {\r\n            console.warn(\"callback:\",callback)\r\n            let This = this\r\n            This.invokeGetDisplayMedia(function(screen) {\r\n              This.addStreamStopListener(screen, function() {\r\n                if(This.screen  || This.camera){\r\n                  This.recorder.stopRecording(This.stopRecordingCallback)\r\n                }\r\n              });\r\n              callback(screen);\r\n            }, function(error) {\r\n              console.error(error);\r\n              alert('Unable to capture your screen. Please check console logs.\\n' + error);\r\n            });\r\n          },\r\n          captureCamera(cb) {\r\n            let constraints = {\r\n              audio: {\r\n                exact: this.$store.getters.getCurrentAudioSource,\r\n              },\r\n              video: {\r\n                exact: {\r\n                  deviceId: this.$store.getters.getCurrentVideoSource\r\n                },\r\n                noiseSuppression: true,\r\n                echoCancellation: true\r\n              }\r\n            }\r\n            console.warn(\"mutiStream constraints:\", constraints)\r\n            navigator.mediaDevices.getUserMedia(constraints).then(cb);\r\n          },\r\n          invokeGetDisplayMedia(success, error) {\r\n            var displaymediastreamconstraints = {\r\n              video: {\r\n                displaySurface: 'monitor', // monitor, window, application, browser\r\n                logicalSurface: true,\r\n                cursor: 'always' // never, always, motion\r\n              }\r\n            };\r\n\r\n            // above constraints are NOT supported YET\r\n            // that's why overridnig them\r\n            displaymediastreamconstraints = {\r\n              audio: true,\r\n              video: true\r\n            };\r\n\r\n            if(navigator.mediaDevices.getDisplayMedia) {\r\n              navigator.mediaDevices.getDisplayMedia(displaymediastreamconstraints).then(success).catch(error);\r\n            }\r\n            else {\r\n              navigator.getDisplayMedia(displaymediastreamconstraints).then(success).catch(error);\r\n            }\r\n          },\r\n          addStreamStopListener(stream, callback) {\r\n            stream.addEventListener('ended', function() {\r\n              callback();\r\n              callback = function() {};\r\n            }, false);\r\n            stream.addEventListener('inactive', function() {\r\n              callback();\r\n              callback = function() {};\r\n            }, false);\r\n            stream.getTracks().forEach(function(track) {\r\n              track.addEventListener('ended', function() {\r\n                callback();\r\n                callback = function() {};\r\n              }, false);\r\n              track.addEventListener('inactive', function() {\r\n                callback();\r\n                callback = function() {};\r\n              }, false);\r\n            });\r\n          },\r\n          keepStreamActive(stream) {\r\n            var video = document.createElement('video');\r\n            video.muted = true;\r\n            video.srcObject = stream;\r\n            video.style.display = 'none';\r\n            video.style.zIndex ='1' ;\r\n            (document.body || document.documentElement).appendChild(video);\r\n          },\r\n          stopRecordingCallback(){\r\n            let This = this\r\n            This.file = This.recorder.getBlob();\r\n            This.video.srcObject = null;\r\n            This.url = URL.createObjectURL(This.file)\r\n            This.video.src = This.url;\r\n            This.video.muted = false;\r\n            This.video.play()\r\n            This.video.controls = true;\r\n\r\n            This.recorder.destroy()\r\n            This.recorder = null\r\n            // This.button.innerHTML = \"start Recording\"\r\n            This.button.value = 'Start Recording'\r\n            Bus.$emit(\"startRecordingValue\", {isRecording: true, value: 'Start Recording'})\r\n            This.$refs.downLoadBtn.style.display = \"block\"\r\n            let mutiStream = [This.screen, This.camera]\r\n            mutiStream.forEach(function(stream) {\r\n              stream.getTracks().forEach(function(track) {\r\n                track.stop();\r\n              });\r\n            });\r\n            This.screen = This.camera = null\r\n          },\r\n          downLoad(){\r\n            let type\r\n            type = {type: 'video/webm'}\r\n            let logTime = new Date(parseInt((new Date()).getTime()))\r\n            logTime = beautyDate(logTime)\r\n            let a = document.createElement('a');\r\n            a.target = \"_blank\";\r\n            a.style.display = 'none';\r\n            a.href = this.url;\r\n            a.download = 'record- '+ logTime +'.mp4';\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            // setTimeout(function() {\r\n            //   document.body.removeChild(a);\r\n            //   window.URL.revokeObjectURL(this.url);\r\n            // }, 100);\r\n          },\r\n          startNewTab(){\r\n            let logTime = new Date(parseInt((new Date()).getTime()))\r\n            logTime = beautyDate(logTime)\r\n            let fileName = 'recorder_'+ logTime +'.webm'\r\n            let file = new File([this.file], fileName, { type: 'video/webm'});\r\n            window.open(URL.createObjectURL(file));\r\n          },\r\n          streamMuteSwitch(data) {\r\n            if (data && data.stream && data.type === 'audio' && data.stream.getAudioTracks().length > 0) {\r\n              for (let i = 0; i < data.stream.getAudioTracks().length; i++) {\r\n                console.warn(\"data.mute:\",data.mute)\r\n                if (data.mute) {\r\n                  if (data.stream.getAudioTracks()[i].enabled === true) {\r\n                    console.info('MuteStream exec mute audio')\r\n                    data.stream.getAudioTracks()[i].enabled = false\r\n                    this.isMute = true\r\n                  }\r\n                } else {\r\n                  if (data.stream.getAudioTracks()[i].enabled === false) {\r\n                    console.info('MuteStream exec unmute audio')\r\n                    data.stream.getAudioTracks()[i].enabled = true\r\n                    this.isMute = false\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          },\r\n        },\r\n        beforeDestroy(){\r\n          Bus.$off('startRecording')\r\n          Bus.$off('isMute')\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n  .recordMutistream{\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n  }\r\n  .recordBtn{\r\n    background-color: #dde3e3;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    text-align:center;\r\n    marign: 5px;\r\n    width: 100%;\r\n  }\r\n  button{\r\n    width: 100px;\r\n    height: 40px;\r\n    border-radius: 5px;\r\n    border:none;\r\n  }\r\n  .recordContainer{\r\n    border: 1px solid #ccc;\r\n    width: 100%;\r\n    height:500px;\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    margin: 5px;\r\n    border-radius: 10px;\r\n    background-color: white;\r\n  }\r\n  .downLoadBtn{\r\n    width:100%;\r\n    height: 50px;\r\n  }\r\n  .mutistreamContent{\r\n    width:640px;\r\n    height:360px;\r\n    overflow: hidden;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .mutistreamVideo{\r\n    z-index: 999;\r\n  }\r\n  .save-to-disk{\r\n    margin: 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n  .open-new-tab{\r\n    margin: 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RecordMutistream.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RecordMutistream.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RecordMutistream.vue?vue&type=template&id=5d34fa4a&scoped=true&\"\nimport script from \"./RecordMutistream.vue?vue&type=script&lang=js&\"\nexport * from \"./RecordMutistream.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecordMutistream.vue?vue&type=style&index=0&id=5d34fa4a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d34fa4a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"videoContent\"},[_c('div',{ref:\"shareScreen\",staticClass:\"screenContrainter\"},[_c('div',{ref:\"shareLocalVideo\",staticClass:\"shareScreenContent\"},[_c('video',{ref:\"showScreenLocalVideo\",staticClass:\"shareScreenVideo\",staticStyle:{\"transform\":\"scale(1)\"},attrs:{\"width\":\"1920\",\"height\":\"1080\"},on:{\"mousedown\":_vm.handleMouseMove,\"mouseup\":_vm.handleMouseUP}})])]),_c('div',{ref:\"canvasWrapper\",staticClass:\"screenContrainter2\"},[_c('div',{staticClass:\"shareScreenContentWrapper\"},[_c('div',{staticClass:\"shareScreenContent2\"},[_c('canvas',{ref:\"showScreenCanvas\",staticClass:\"shareScreenCanvas\",staticStyle:{\"transform\":\"scale(1)\"},attrs:{\"width\":\"1920\",\"height\":\"1080\"}})])])]),_c('div',{ref:\"recordWrapper\",staticClass:\"screenContrainter3\"},[_c('div',{staticClass:\"shareScreenContentWrapper2\"},[_c('div',{ref:\"downLoadBtn\",staticClass:\"recordBtn\",staticStyle:{\"text-align\":\"center\",\"display\":\"none\"}},[_c('button',{on:{\"click\":function($event){return _vm.download()}}},[_vm._v(\"下载视频\")]),_c('button',{on:{\"click\":function($event){return _vm.openNewTab()}}},[_vm._v(\"open new tab\")])]),_c('div',{staticClass:\"shareScreenContentWrapper3\"},[_c('video',{ref:\"shareScreenRecord\",staticClass:\"shareScreenRecord\",staticStyle:{\"transform\":\"scale(1)\"},attrs:{\"width\":\"1920\",\"height\":\"1080\"}})])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"main\">\r\n    <div class=\"videoContent\">\r\n      <div class=\"screenContrainter\" ref=\"shareScreen\" >\r\n        <div class=\"shareScreenContent\" ref=\"shareLocalVideo\">\r\n          <video\r\n            class=\"shareScreenVideo\"\r\n            ref=\"showScreenLocalVideo\"\r\n            width=\"1920\"\r\n            height=\"1080\"\r\n            style=\"transform: scale(1)\"\r\n            @mousedown=\"handleMouseMove\"\r\n            @mouseup=\"handleMouseUP\"\r\n          ></video>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"screenContrainter2\" ref=\"canvasWrapper\" >\r\n        <div class=\"shareScreenContentWrapper\">\r\n          <div class=\"shareScreenContent2\" >\r\n            <canvas class=\"shareScreenCanvas\"  ref=\"showScreenCanvas\" width=\"1920\" height=\"1080\" style=\"transform: scale(1);\"></canvas>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"screenContrainter3\" ref=\"recordWrapper\">\r\n        <div class=\"shareScreenContentWrapper2\">\r\n          <div class=\"recordBtn\" style=\"text-align: center; display:none;\" ref=\"downLoadBtn\">\r\n            <button @click=\"download()\">下载视频</button>\r\n            <button @click=\"openNewTab()\">open new tab</button>\r\n          </div>\r\n          <div class=\"shareScreenContentWrapper3\" >\r\n            <video  class=\"shareScreenRecord\"  ref=\"shareScreenRecord\" width=\"1920\" height=\"1080\" style=\"transform: scale(1);\" ></video>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import RecordRTC from 'recordrtc'\r\n  import beautyDate from '@/api/day.js'\r\n  import {Bus} from \"@/common/Bus.js\"\r\n  export default {\r\n    name: \"MainView\",\r\n    data(){\r\n      return {\r\n        // showShareScreen: false,   // 是否显示演示流\r\n        timer:'',\r\n        isOpenShareScreen: false,       // 是否开启演示\r\n        shareScreenStream: null,        // 演示流\r\n\r\n      }\r\n    },\r\n    created() {\r\n      if (!navigator.getDisplayMedia && !navigator.mediaDevices.getDisplayMedia) {\r\n        const error = 'Your browser does NOT support the getDisplayMedia API.'\r\n        throw new Error(error)\r\n      }\r\n    },\r\n    mounted() {\r\n      if(!navigator.getDisplayMedia && !navigator.mediaDevices.getDisplayMedia) {\r\n        let error = 'Your browser does NOT supports getDisplayMedia API.';\r\n        throw new Error(error);\r\n      }\r\n      this.localVideo = this.$refs.showScreenLocalVideo\r\n      this.canvas = this.$refs.showScreenCanvas;\r\n      this.canvasWrapper = this.$refs.canvasWrapper;\r\n      this.recordWrapper = this.$refs.recordWrapper\r\n      this.recordWrapper.style.display = \"none\"\r\n\r\n      this.ctx = this.canvas.getContext(\"2d\");\r\n      this.recordVideo = this.$refs.shareScreenRecord\r\n      this.isMute = this.$store.getters.getMuteState\r\n\r\n      this.$nextTick(()=>{\r\n        Bus.$on(\"shareScreen\",(data)=>{\r\n          this.shareScreenBtn = data.element\r\n          this.shareScreenBtn.value = data.value\r\n          this.getDisplayMedia()\r\n        })\r\n\r\n        Bus.$on(\"isMute\",(data)=>{\r\n          this.isMute = data.value\r\n          if(this.audioStream){\r\n            this.streamMuteSwitch({stream: this.audioStream, type: 'audio', mute:this.isMute})\r\n          }\r\n        })\r\n\r\n      })\r\n      Bus.$on(\"startRecordingScreen\",(data)=>{\r\n        this.recordingBtn = data.element\r\n        this.recordingBtn.value = data.value\r\n        this.startRecording()\r\n      })\r\n\r\n    },\r\n    methods:{\r\n      async getAudioStream() {\r\n        console.log(`Requesting audio stream`)\r\n        let constraints = {\r\n          audio: {\r\n            exact: {\r\n              deviceId: this.$store.getters.getCurrentAudioSource,\r\n            },\r\n            noiseSuppression: true,\r\n            echoCancellation: true\r\n          }\r\n        }\r\n\r\n        if ('mediaDevices' in navigator) {\r\n          try {\r\n            const stream = await navigator.mediaDevices.getUserMedia(constraints)\r\n            this.audioStream  = stream\r\n            if(this.isMute){\r\n              this.streamMuteSwitch({stream: this.audioStream, type: 'audio', mute:this.isMute})\r\n            }\r\n            console.log('Received local audio stream')\r\n          } catch (error) {\r\n            console.log(`getUserMedia error: ${error}`)\r\n            alert(error)\r\n          }\r\n        }\r\n      },\r\n      getDisplayMedia() {\r\n        let This = this\r\n        let video = This.localVideo\r\n        let canvas = This.canvas\r\n        video.src = video.srcObject = null\r\n        let displaymediastreamconstraints = {\r\n          audio: true,\r\n          video: {\r\n            width: { max:  1920 },\r\n            height: { max:  1080 },\r\n            frameRate: { max: 15 },\r\n          }\r\n        };\r\n\r\n        if(navigator.mediaDevices.getDisplayMedia) {\r\n          navigator.mediaDevices.getDisplayMedia(displaymediastreamconstraints).then(function(stream){\r\n            console.warn(\"get stream success\")\r\n            This.getAudioStream()\r\n            This.isOpenShareScreen = true,\r\n            This.shareScreenStream = stream\r\n            This.localVideo.srcObject = stream\r\n            video.oncanplay = function () {\r\n              video.play()\r\n              video.muted = true\r\n              video.style.width = video.videoWidth / 3 + 'px'\r\n              video.style.height = video.videoHeight / 3 + 'px'\r\n              canvas.style.width = video.videoWidth / 3 + 'px'\r\n              canvas.style.height = video.videoHeight / 3 + 'px'\r\n            }\r\n            This.canvasWrapper.style.display = \"block\"\r\n            This.recordWrapper.style.display = \"none\"\r\n            if(This.shareScreenStream){\r\n              Bus.$emit(\"isDisplayBtn\",{value: false})\r\n            }\r\n            This.addStreamStopListener(stream, function() {\r\n              console.warn(\"addStreamStopListener addStreamStopListener\")\r\n              if(This.recorder){\r\n                This.recorder.stopRecording(This.stopRecordingCallback)\r\n              }else{\r\n                let mutiStream = [This.shareScreenStream, This.audioStream]\r\n                mutiStream.forEach(function(stream) {\r\n                  stream.getTracks().forEach(function(track) {\r\n                    track.stop();\r\n                  });\r\n                });\r\n\r\n                This.shareScreenStream = null\r\n                This.audioStream = null\r\n                This.localVideo.srcObject = null\r\n\r\n                if(document.getElementById(\"mask\") ){\r\n                  document.getElementById(\"mask\").remove()\r\n                }\r\n                This.ctx.clearRect(0,0, This.canvas.width,This.canvas.height)\r\n                Bus.$emit(\"isDisplayBtn\",{value: true})\r\n              }\r\n            });\r\n\r\n          }).catch(function(error){\r\n            alert(error)\r\n          });\r\n        }\r\n        else {\r\n          navigator.mediaDevices.getDisplayMedia(displaymediastreamconstraints).then(function(stream){\r\n            console.warn(\"get stream success\")\r\n            This.getAudioStream()\r\n            This.isOpenShareScreen = true\r\n            This.shareScreenStream = stream\r\n            This.localVideo.stream = stream\r\n            This.localVideo.srcObject = stream\r\n            video.oncanplay = function () {\r\n              video.play()\r\n              video.muted = true\r\n              video.style.width = video.videoWidth / 3 + 'px'\r\n              video.style.height = video.videoHeight / 3 + 'px'\r\n              canvas.style.width = video.videoWidth / 3 + 'px'\r\n              canvas.style.height = video.videoHeight / 3 + 'px'\r\n            }\r\n            if(This.shareScreenStream){\r\n              Bus.$emit(\"isDisplayBtn\",{value: false})\r\n            }\r\n            This.canvasWrapper.style.display = \"block\"\r\n            This.recordWrapper.style.display = \"none\"\r\n            This.addStreamStopListener(stream, function() {\r\n              if(This.recorder){\r\n                This.recorder.stopRecording(This.stopRecordingCallback)\r\n              }else{\r\n\r\n                let mutiStream = [This.shareScreenStream, This.audioStream]\r\n                mutiStream.forEach(function(stream) {\r\n                  stream.getTracks().forEach(function(track) {\r\n                    track.stop();\r\n                  });\r\n                });\r\n\r\n                This.shareScreenStream = null\r\n                This.audioStream = null\r\n                This.localVideo.srcObject = null\r\n\r\n                if(document.getElementById(\"mask\") ){\r\n                  document.getElementById(\"mask\").remove()\r\n                }\r\n                This.ctx.clearRect(0,0, This.canvas.width,This.canvas.height)\r\n                Bus.$emit(\"isDisplayBtn\",{value: true})\r\n              }\r\n            });\r\n          }).catch(function(error){\r\n            alert(error)\r\n          });\r\n        }\r\n      },\r\n      handleMouseMove (ev) {\r\n        let This = this\r\n        let video = This.localVideo\r\n        let container = this.$refs.shareLocalVideo\r\n        if(document.getElementById(\"mask\")){\r\n          document.getElementById(\"mask\").remove()\r\n        }\r\n        ev = window.event || ev;\r\n        //1.获取按下的点\r\n\r\n        let x1 = ev.clientX  - container.offsetLeft;\r\n        let y1 = ev.clientY  - container.offsetTop;\r\n        let startX = ev.clientX - video.getBoundingClientRect().left  ;\r\n        let startY = ev.clientY - video.getBoundingClientRect().top ;\r\n        startX = startX * 3;\r\n        startY = startY * 3;\r\n\r\n        This.startX = startX\r\n        This.startY = startY\r\n\r\n\r\n        //2.创建div\r\n        var oDiv = document.createElement(\"div\");\r\n        oDiv.id = \"mask\"\r\n        container.appendChild(oDiv);\r\n        oDiv.style.cssText=\"width: 0; height: 0; background: lightblue; opacity: 0.4; position: absolute; z-index:999\";\r\n\r\n        video.onmousemove = function (ev) {\r\n          ev = window.event || ev;\r\n\r\n          var x2 = ev.clientX  - container.offsetLeft;\r\n          var y2 = ev.clientY  - container.offsetTop ;\r\n          //3.设置div的样式\r\n          oDiv.style.left = (x2 > x1 ? x1 : x2) +\"px\";\r\n          oDiv.style.top = (y2 > y1 ? y1 : y2) +\"px\";\r\n          oDiv.style.width = Math.abs(x2-x1)+\"px\";\r\n          oDiv.style.height = Math.abs(y2-y1)+\"px\";\r\n        }\r\n        return false;  //解除在划动过程中鼠标样式改变的BUG\r\n      },\r\n      handleMouseUP (e) {\r\n        let This = this\r\n        let canvas = This.canvas\r\n        let video = This.localVideo\r\n        video.onmousemove = null;\r\n        // let endX = e.clientX - video.getBoundingClientRect().left  ;\r\n        // let endY = e.clientY - video.getBoundingClientRect().top ;\r\n\r\n        /***设置canvas绘制的大小****/\r\n        let mask = document.getElementById(\"mask\")\r\n        canvas.style.width = mask.offsetWidth + 'px'\r\n        canvas.style.height = mask.offsetHeight + 'px'\r\n\r\n        /**得到设置区域的像素大小**/\r\n        let rangeW = video.videoWidth * (mask.offsetWidth / video.offsetWidth);\r\n        let rangeH = video.videoHeight * (mask.offsetHeight / video.offsetHeight) ;\r\n\r\n        // This.rangeW = rangeW\r\n        // This.rangeH = rangeH\r\n        /**在canvas中绘制区域大小**/\r\n        // startDraw(video, canvas, ctx, startX , startY, rangeW, rangeH)\r\n\r\n        This.canvasWrapper.style.display = \"block\"\r\n        This.recordWrapper.style.display = \"none\"\r\n\r\n        // /************切换页面时获取流******************/\r\n        video.ontimeupdate = function(){\r\n          console.warn(\"draw draw draw draw\")\r\n\r\n          startDraw(video, canvas, This.ctx, This.startX , This.startY, rangeW, rangeH)\r\n        }\r\n        function startDraw(video, canvas, ctx, startX, startY, rangeW, rangeH){\r\n\r\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n          playCanvas(video, canvas, ctx, startX, startY, rangeW, rangeH)\r\n        }\r\n\r\n        function playCanvas(video,canvas,ctx,sx,sy,rangeW,rangeH){\r\n          ctx.drawImage(video, sx, sy, rangeW, rangeH, 0, 0, canvas.width, canvas.height);\r\n          This.timer = requestAnimationFrame(() => {\r\n            if(This.shareScreenStream){\r\n              playCanvas(video, canvas, ctx, sx, sy, rangeW, rangeH);\r\n            }\r\n          })\r\n        }\r\n      },\r\n      mixingStream (stream1, stream2) {\r\n        console.info('mixing audio stream')\r\n        if(!stream1 || !stream2){\r\n          console.info(\"invalid parameters to mixStream\")\r\n          return\r\n        }\r\n        let This = this\r\n        // 混音参数\r\n        window.AudioContext = (window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext)\r\n\r\n        if (window.AudioContext) {\r\n          if(This.mixStreamContext){\r\n            This.mixStreamContext.close()\r\n            This.mixStreamContext = null\r\n          }\r\n          This.mixStreamContext = new window.AudioContext()\r\n        } else {\r\n          console.error('not support web audio api')\r\n        }\r\n\r\n        // 混音\r\n        let destinationParticipant1 = This.mixStreamContext.createMediaStreamDestination()\r\n        if (stream1) {\r\n          let source1 = This.mixStreamContext.createMediaStreamSource(stream1)\r\n          source1.connect(destinationParticipant1)\r\n        }\r\n        if (stream2) {\r\n          let source2 = This.mixStreamContext.createMediaStreamSource(stream2)\r\n          source2.connect(destinationParticipant1)\r\n        }\r\n\r\n        return destinationParticipant1.stream\r\n      },\r\n      startRecording(){\r\n        let This = this\r\n        if( !This.shareScreenStream || !document.getElementById(\"mask\") ){\r\n          alert(\"当前没有获取流，请检查； 或者没有选取区域\")\r\n          return\r\n        }\r\n        if(This.recordingBtn.value === \"Stop Recording\"){\r\n          This.stopRecording()\r\n          return\r\n        }else{\r\n          This.canvasWrapper.style.display = \"none\"\r\n          This.recordWrapper.style.display = \"block\"\r\n          This.$refs.downLoadBtn.style.display = \"none\"\r\n          let screen = This.canvas.captureStream(60)\r\n          let mask = document.getElementById(\"mask\")\r\n          This.recordVideo.style.width = mask.offsetWidth + 'px'\r\n          This.recordVideo.style.height = mask.offsetHeight + 'px'\r\n          This.recordVideo.srcObject = screen\r\n          This.recordVideo.play()\r\n          This.recordVideo.muted = true\r\n          // let mixStream = []\r\n\r\n          if(This.audioStream.getAudioTracks().length > 0){\r\n            if(This.shareScreenStream && This.shareScreenStream.getAudioTracks().length > 0){\r\n              // screen.addTrack(This.shareScreenStream.getAudioTracks()[0])\r\n              let mixAudioStream = This.mixingStream(This.shareScreenStream, This.audioStream)\r\n              let audioTrack = mixAudioStream.getAudioTracks()[0]\r\n              screen.addTrack(audioTrack)\r\n            }else{\r\n              screen.addTrack(This.audioStream.getAudioTracks()[0])\r\n            }\r\n          }\r\n\r\n          This.recorder = RecordRTC(screen, {type: 'video'})\r\n          This.recorder.startRecording()\r\n          // This.button.value = 'Stop Recording'\r\n          Bus.$emit(\"recordingValue\", {isRecording: false, value: 'Stop Recording'})\r\n        }\r\n\r\n\r\n      },\r\n      stopRecordingCallback() {\r\n        this.$refs.downLoadBtn.style.display = \"block\"\r\n        this.recordVideo.src = null\r\n        this.recordVideo.srcObject = null\r\n        this.file = this.recorder.getBlob()\r\n        console.warn(\"file:\",this.file)\r\n        this.url = URL.createObjectURL(this.file)\r\n        this.recordVideo.src = this.url\r\n        this.recordVideo.play()\r\n        this.recordVideo.controls = true;\r\n        this.recordVideo.muted = false\r\n\r\n        this.localVideo.srcObject =  this.localVideo.src = null\r\n\r\n        if(this.timer){\r\n          console.warn(\"this.timer this.timer this.timer this.timer this.timer\")\r\n          window.cancelAnimationFrame(this.timer);\r\n        }\r\n\r\n        document.getElementById(\"mask\").remove()\r\n        this.localVideo.onmousermove = null\r\n        this.localVideo.onmouserup = null\r\n        this.localVideo.onmouserup = null\r\n        this.localVideo.ontimeupdate = null\r\n        this.localVideo.src = this.localVideo.srcObject = null\r\n        this.startX =  this.startY = null\r\n\r\n        this.ctx.clearRect(0,0, this.canvas.width,this.canvas.height)\r\n        let mutiStream = [this.shareScreenStream, this.audioStream]\r\n        mutiStream.forEach(function(stream) {\r\n          stream.getTracks().forEach(function(track) {\r\n            track.stop();\r\n          });\r\n        });\r\n        this.shareScreenStream = null\r\n        this.recorder.destroy()\r\n        this.recorder = null\r\n        // this.button.value = 'Start Recording'\r\n        Bus.$emit(\"recordingValue\", {isRecording: false, value: 'Start Recording'})\r\n        Bus.$emit(\"isDisplayBtn\",{value: true})\r\n      },\r\n      stopRecording() {\r\n        let This = this\r\n        This.recorder.stopRecording(This.stopRecordingCallback)\r\n      },\r\n      addStreamStopListener(stream, callback) {\r\n        stream.addEventListener('ended', function() {\r\n          callback();\r\n          callback = function() {};\r\n        }, false);\r\n        stream.addEventListener('inactive', function() {\r\n          callback();\r\n          callback = function() {};\r\n        }, false);\r\n        stream.getTracks().forEach(function(track) {\r\n          track.addEventListener('ended', function() {\r\n            callback();\r\n            callback = function() {};\r\n          }, false);\r\n          track.addEventListener('inactive', function() {\r\n            callback();\r\n            callback = function() {};\r\n          }, false);\r\n        });\r\n      },\r\n      downLoad(){\r\n        let logTime = new Date(parseInt((new Date()).getTime()))\r\n        logTime = beautyDate(logTime)\r\n        let a = document.createElement('a');\r\n        a.target = \"_blank\";\r\n        a.style.display = 'none';\r\n        console.warn(\"this.url:\",this.url)\r\n        a.href = this.url;\r\n        a.download = 'recorded- '+ logTime +'.mp4';\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        // setTimeout(function() {\r\n        //   document.body.removeChild(a);\r\n        //   window.URL.revokeObjectURL(this.url);\r\n        // }, 100);\r\n      },\r\n      openNewTab(){\r\n        let logTime = new Date(parseInt((new Date()).getTime()))\r\n        logTime = beautyDate(logTime)\r\n        let fileName = 'recorder_'+ logTime +'.webm'\r\n        let file = new File([this.file], fileName, { type: 'video/webm'});\r\n        window.open(URL.createObjectURL(file));\r\n      },\r\n      streamMuteSwitch(data) {\r\n        if (data && data.stream && data.type === 'audio' && data.stream.getAudioTracks().length > 0) {\r\n          for (let i = 0; i < data.stream.getAudioTracks().length; i++) {\r\n            console.warn(\"data.mute:\",data.mute)\r\n            if (data.mute) {\r\n              if (data.stream.getAudioTracks()[i].enabled === true) {\r\n                console.info('MuteStream exec mute audio')\r\n                data.stream.getAudioTracks()[i].enabled = false\r\n                this.isMute = true\r\n              }\r\n            } else {\r\n              if (data.stream.getAudioTracks()[i].enabled === false) {\r\n                console.info('MuteStream exec unmute audio')\r\n                data.stream.getAudioTracks()[i].enabled = true\r\n                this.isMute = false\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n    },\r\n    beforeDestroy(){\r\n      Bus.$off('startRecordingScreen')\r\n      Bus.$off('shareScreen')\r\n      Bus.$off(\"isMute\")\r\n      if(this.mixStreamContext){\r\n        this.mixStreamContext.close()\r\n        this.mixStreamContext = null\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .main{\r\n    width:100%;\r\n    height:100%;\r\n  }\r\n  .selectScreen{\r\n    width:100%;\r\n    height:400px;\r\n    background-color: white;\r\n    border-radius:10px;\r\n    font-family:\"Microsoft YaHei UI\",Arial,\"Times New Roman\";\r\n    position: relative;\r\n  }\r\n\r\n  .select-top{\r\n    width:100%;\r\n    height: 40px;\r\n    border-top-left-radius:10px;\r\n    border-top-right-radius: 10px;\r\n    background-color: #dde3e3;\r\n    display:flex;\r\n    justify-content: flex-end;\r\n    line-height:40px;\r\n  }\r\n  .select-top .title{\r\n    width: 95%;\r\n    font-weight: bolder;\r\n  }\r\n  .select-top .icon{\r\n    width: 5%;\r\n  }\r\n  .select-top .icon:hover{\r\n    background-color: #ccc;\r\n  }\r\n\r\n  .select-middle{\r\n    width:100%;\r\n    height:40px;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n  }\r\n  .select-middle .title{\r\n    background-color: #dde3e3;\r\n    /*width: 40px;*/\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .select-middle .title div{\r\n    width: 100px;\r\n    text-align: center;\r\n  }\r\n\r\n  .select-middle .title div:hover{\r\n    background-color: dodgerblue;\r\n    color:white;\r\n  }\r\n\r\n  .select-bottom{\r\n    position: absolute;\r\n    bottom:0;\r\n    left:0;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width:100%;\r\n  }\r\n\r\n  /*.videoContent{*/\r\n    /*!*width: 100%;*!*/\r\n    /*!*height: 100%;*!*/\r\n    /*display:flex;*/\r\n    /*justify-content: center;*/\r\n    /*align-items: center;*/\r\n  /*}*/\r\n\r\n  .screenContrainter{\r\n    border: 1px solid #ccc;\r\n    width: 100%;\r\n    height:400px;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin-bottom: 5px;\r\n    border-radius: 10px;\r\n    background-color: white;\r\n  }\r\n\r\n  .screenContrainter2{\r\n    border: 1px solid #ccc;\r\n    width: 100%;\r\n    height:400px;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin-bottom: 5px;\r\n    border-radius: 10px;\r\n    background-color: white;\r\n  }\r\n\r\n  .screenContrainter3{\r\n    border: 1px solid #ccc;\r\n    width: 100%;\r\n    height:400px;\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    margin-bottom: 5px;\r\n    border-radius: 10px;\r\n    background-color: white;\r\n  }\r\n\r\n\r\n  .shareScreenContent{\r\n    width:640px;\r\n    height:360px;\r\n    overflow: hidden;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: relative;\r\n  }\r\n  .shareScreenContentWrapper{\r\n    width:100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .shareScreenContent2{\r\n    width:640px;\r\n    height:360px;\r\n    overflow: hidden;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .shareScreenContentWrapper2{\r\n    width:100%;\r\n    height:100%;\r\n    overflow: hidden;\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .shareScreenContentWrapper3{\r\n    width:100%;\r\n    height:100%;\r\n    overflow: hidden;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .recordBtn{\r\n    width:100%;\r\n    height:100px;\r\n    display:flex;\r\n    flex-direction: row;\r\n    justify-content:center;\r\n    align-items: center;\r\n  }\r\n\r\n\r\n  .shareScreenContent .shareScreenCanvas, .shareScreenRecord{\r\n    /*border: 1px solid #ccc;*/\r\n    line-height: 360px;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .shareScreenRecord{\r\n    object-fit: inherit;\r\n  }\r\n\r\n  .shareScreenVideo{\r\n    margin:0 auto;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .show{\r\n    display:none;\r\n  }\r\n\r\n  .recordBttonWrapper{\r\n    width: 100%;\r\n    height:50px;\r\n    display: flex;\r\n    justify-content: center;\r\n    background-color: #dde3e3;\r\n    border-radius: 5px;\r\n  }\r\n  .recordBtton{\r\n    width: 60%;\r\n    height: 50px;\r\n    display:flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n  }\r\n  .recordBtn{\r\n    margin: 5px;\r\n  }\r\n  select{\r\n    width: 200px;\r\n    height: 40px;\r\n    border:none;\r\n    outline:none;\r\n    text-align: center;\r\n    border-radius: 5px;\r\n    margin: 5px;\r\n    /*padding: 8px 10px;*/\r\n  }\r\n\r\n  button{\r\n    width: 100px;\r\n    height: 40px;\r\n    border-radius: 5px;\r\n    border:none;\r\n    margin: 5px;\r\n  }\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RecordRegionalScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RecordRegionalScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RecordRegionalScreen.vue?vue&type=template&id=d215185e&scoped=true&\"\nimport script from \"./RecordRegionalScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./RecordRegionalScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecordRegionalScreen.vue?vue&type=style&index=0&id=d215185e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d215185e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"recordMutistream\"},[_c('div',{staticClass:\"recordContainer\"},[_c('h1',{ref:\"text\"},[_vm._v(\"Simple Gif Recording using RecordRTC\")]),_c('div',{ref:\"downLoadBtn\",staticClass:\"downLoadBtn\",staticStyle:{\"text-align\":\"center\",\"display\":\"none\"}},[_c('button',{staticClass:\"save-to-disk\",on:{\"click\":_vm.downLoad}},[_vm._v(\"Save To Disk\")]),_c('button',{staticClass:\"open-new-tab\",on:{\"click\":_vm.startNewTab}},[_vm._v(\"Open New Tab\")])]),_c('div',{staticClass:\"mutistreamContent\"},[_c('img',{ref:\"img\",staticClass:\"mutistreamVideo\",staticStyle:{\"transform\":\"scale(1)\"},attrs:{\"width\":\"320\"}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"recordMutistream\">\r\n    <div class=\"recordContainer\">\r\n      <h1 ref=\"text\">Simple Gif Recording using RecordRTC</h1>\r\n      <div class=\"downLoadBtn\" style=\"text-align: center; display:none;\" ref=\"downLoadBtn\">\r\n        <button class=\"save-to-disk\" @click=\"downLoad\">Save To Disk</button>\r\n        <button class=\"open-new-tab\" @click=\"startNewTab\">Open New Tab</button>\r\n      </div>\r\n      <div class=\"mutistreamContent\" >\r\n        <!--<video class=\"mutistreamVideo\" ref=\"mutistreamVideo\" style=\"width: 100%;\"></video>-->\r\n        <img class=\"mutistreamVideo\" ref=\"img\" width=\"320\"  style=\"transform: scale(1)\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import beautyDate from '@/api/day.js'\r\n    import RecordRTC from 'recordrtc'\r\n    import {Bus} from \"@/common/Bus.js\"\r\n    export default {\r\n        name: \"GifRecord.vue\",\r\n      mounted(){\r\n          this.text = this.$refs.text\r\n          this.image = this.$refs.img\r\n          Bus.$on('gifRecording',(data)=>{\r\n            this.button = data.element\r\n            this.button.value = data.value\r\n            this.startRecording()\r\n          })\r\n      },\r\n        methods:{\r\n          startRecording(){\r\n            let This = this\r\n            if(This.button.value === 'Stop Recording'){\r\n              This.button.disabled = true;\r\n              This.button.disableStateWaiting = true;\r\n              setTimeout(function() {\r\n                This.button.disabled = false;\r\n                This.button.disableStateWaiting = false;\r\n              }, 2000);\r\n\r\n              This.recorder.stopRecording(This.stopRecordingCallback)\r\n              return\r\n             }\r\n            This.$refs.downLoadBtn.style.display = \"none\"\r\n            This.captureCamera(function(camera) {\r\n              Bus.$emit(\"gifRecordingValue\", {isRecording: true, value: 'Stop Recording'})\r\n              This.text.innerHTML = 'Waiting for Gif Recorder to start...';\r\n              This.recorder = RecordRTC(camera, {\r\n                type: 'gif',\r\n                frameRate: 10,\r\n                quality: 1,\r\n                width: 360,\r\n                hidden: 240,\r\n                onGifRecordingStarted: function() {\r\n                  This.text.innerHTML = 'Gif recording started.';\r\n                },\r\n                onGifPreview: function(gifURL) {\r\n                  This.image.src = gifURL;\r\n                }\r\n              });\r\n\r\n              This.recorder.startRecording();\r\n\r\n              This.recorder.camera = camera;\r\n\r\n            });\r\n          },\r\n          captureCamera(callback) {\r\n            navigator.mediaDevices.getUserMedia({ video: true }).then(function(camera) {\r\n              callback(camera);\r\n            }).catch(function(error) {\r\n              alert('Unable to capture your camera. Please check console logs.');\r\n              console.error(error);\r\n            });\r\n          },\r\n          stopRecording(){\r\n            let This = this\r\n            This.stopRecording(This.stopRecordingCallback)\r\n          },\r\n          stopRecordingCallback() {\r\n            let This = this\r\n            This.text.innerHTML = 'Gif recording stopped: ' + This.bytesToSize(This.recorder.getBlob().size);\r\n            This.file = This.recorder.getBlob()\r\n            This.url = URL.createObjectURL(This.file)\r\n            This.image.src = This.url;\r\n            This.recorder.camera.stop();\r\n            This.recorder.destroy();\r\n            This.recorder = null;\r\n            Bus.$emit(\"gifRecordingValue\", {isRecording: true, value: 'Start Recording'})\r\n            This.$refs.downLoadBtn.style.display = \"block\"\r\n          },\r\n          bytesToSize(bytes) {\r\n            var k = 1000;\r\n            var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n            if (bytes === 0) {\r\n              return '0 Bytes';\r\n            }\r\n            var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\r\n            return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\r\n          },\r\n          downLoad(){\r\n            let type\r\n            type = {type: 'video/webm'}\r\n            let logTime = new Date(parseInt((new Date()).getTime()))\r\n            logTime = beautyDate(logTime)\r\n            let a = document.createElement('a');\r\n            a.target = \"_blank\";\r\n            a.style.display = 'none';\r\n            a.href = this.url;\r\n            a.download = 'record- '+ logTime +'.gif';\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            // setTimeout(function() {\r\n            //   document.body.removeChild(a);\r\n            //   window.URL.revokeObjectURL(this.url);\r\n            // }, 100);\r\n          },\r\n          startNewTab(){\r\n            // let logTime = new Date(parseInt((new Date()).getTime()))\r\n            // logTime = beautyDate(logTime)\r\n            // let fileName = 'recorder_'+ logTime +'.gif'\r\n            // let file = new File([this.file], fileName, );\r\n            // window.urld = this.url\r\n            // console.warn(\"file:\",file)\r\n            window.open(this.url);\r\n          },\r\n        },\r\n        beforeDestroy(){\r\n          Bus.$off('gifRecording')\r\n        },\r\n\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n  .recordMutistream{\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n  }\r\n  .recordBtn{\r\n    background-color: #dde3e3;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    text-align:center;\r\n    marign: 5px;\r\n    width: 100%;\r\n  }\r\n  button{\r\n    width: 100px;\r\n    height: 40px;\r\n    border-radius: 5px;\r\n    border:none;\r\n  }\r\n  .recordContainer{\r\n    border: 1px solid #ccc;\r\n    width: 100%;\r\n    height:500px;\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    margin: 5px;\r\n    border-radius: 10px;\r\n    background-color: white;\r\n  }\r\n  .downLoadBtn{\r\n    width:100%;\r\n    height: 50px;\r\n  }\r\n  .mutistreamContent{\r\n    width:640px;\r\n    height:360px;\r\n    overflow: hidden;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .mutistreamVideo{\r\n    z-index: 999;\r\n  }\r\n  .save-to-disk{\r\n    margin: 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n  .open-new-tab{\r\n    margin: 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GifRecord.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GifRecord.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GifRecord.vue?vue&type=template&id=01001e39&scoped=true&\"\nimport script from \"./GifRecord.vue?vue&type=script&lang=js&\"\nexport * from \"./GifRecord.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GifRecord.vue?vue&type=style&index=0&id=01001e39&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01001e39\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"recordMutistream\"},[_c('div',{staticClass:\"recordContainer\"},[_c('div',{ref:\"downLoadBtn\",staticClass:\"downLoadBtn\",staticStyle:{\"text-align\":\"center\",\"display\":\"none\"}},[_c('button',{staticClass:\"save-to-disk\",on:{\"click\":_vm.downLoad}},[_vm._v(\"Save To Disk\")]),_c('button',{staticClass:\"open-new-tab\",on:{\"click\":_vm.startNewTab}},[_vm._v(\"Open New Tab\")])]),_c('h2',{ref:\"H2\",staticStyle:{\"display\":\"block\"}}),_c('div',{staticClass:\"mutistreamContent\"},[_c('audio',{ref:\"mutistreamAudio\",staticClass:\"mutistreamVideo\",staticStyle:{\"transform\":\"scale(1)\"},attrs:{\"width\":\"720\"}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","function FileSelector() {\r\n  var selector = this;\r\n\r\n  var noFileSelectedCallback = function() {};\r\n\r\n  selector.selectSingleFile = function(callback, failure) {\r\n    if (failure) {\r\n      noFileSelectedCallback = failure;\r\n    }\r\n\r\n    selectFile(callback);\r\n  };\r\n  selector.selectMultipleFiles = function(callback, failure) {\r\n    if (failure) {\r\n      noFileSelectedCallback = failure;\r\n    }\r\n\r\n    selectFile(callback, true);\r\n  };\r\n  selector.selectDirectory = function(callback, failure) {\r\n    if (failure) {\r\n      noFileSelectedCallback = failure;\r\n    }\r\n\r\n    selectFile(callback, true, true);\r\n  };\r\n\r\n  selector.accept = '*.*';\r\n\r\n  function selectFile(callback, multiple, directory) {\r\n    callback = callback || function() {};\r\n\r\n    var file = document.createElement('input');\r\n    file.type = 'file';\r\n\r\n    if (multiple) {\r\n      file.multiple = true;\r\n    }\r\n\r\n    if (directory) {\r\n      file.webkitdirectory = true;\r\n    }\r\n\r\n    file.accept = selector.accept;\r\n\r\n    file.onclick = function() {\r\n      file.clickStarted = true;\r\n    };\r\n\r\n    document.body.onfocus = function() {\r\n      setTimeout(function() {\r\n        if (!file.clickStarted) return;\r\n        file.clickStarted = false;\r\n\r\n        if (!file.value) {\r\n          noFileSelectedCallback();\r\n        }\r\n      }, 500);\r\n    };\r\n\r\n    file.onchange = function() {\r\n      if (multiple) {\r\n        if (!file.files.length) {\r\n          console.error('No file selected.');\r\n          return;\r\n        }\r\n\r\n        var arr = [];\r\n        Array.from(file.files).forEach(function(file) {\r\n          file.url = file.webkitRelativePath;\r\n          arr.push(file);\r\n        });\r\n        callback(arr);\r\n        return;\r\n      }\r\n\r\n      if (!file.files[0]) {\r\n        console.error('No file selected.');\r\n        return;\r\n      }\r\n\r\n      callback(file.files[0]);\r\n\r\n      file.parentNode.removeChild(file);\r\n    };\r\n    file.style.display = 'none';\r\n    (document.body || document.documentElement).appendChild(file);\r\n    fireClickEvent(file);\r\n  }\r\n\r\n  function getValidFileName(fileName) {\r\n    if (!fileName) {\r\n      fileName = 'file' + (new Date).toISOString().replace(/:|\\.|-/g, '')\r\n    }\r\n\r\n    var a = fileName;\r\n    a = a.replace(/^.*[\\\\\\/]([^\\\\\\/]*)$/i, \"$1\");\r\n    a = a.replace(/\\s/g, \"_\");\r\n    a = a.replace(/,/g, '');\r\n    a = a.toLowerCase();\r\n    return a;\r\n  }\r\n\r\n  function fireClickEvent(element) {\r\n    if (typeof element.click === 'function') {\r\n      element.click();\r\n      return;\r\n    }\r\n\r\n    if (typeof element.change === 'function') {\r\n      element.change();\r\n      return;\r\n    }\r\n\r\n    if (typeof document.createEvent('Event') !== 'undefined') {\r\n      var event = document.createEvent('Event');\r\n\r\n      if (typeof event.initEvent === 'function' && typeof element.dispatchEvent === 'function') {\r\n        event.initEvent('click', true, true);\r\n        element.dispatchEvent(event);\r\n        return;\r\n      }\r\n    }\r\n\r\n    var event = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    element.dispatchEvent(event);\r\n  }\r\n}\r\n\r\nexport default FileSelector\r\n","function StereoAudioRecorder(mediaStream, config) {\r\n  if (!getTracks(mediaStream, 'audio').length) {\r\n    throw 'Your stream has no audio tracks.';\r\n  }\r\n\r\n  config = config || {};\r\n\r\n  var self = this;\r\n\r\n  // variables\r\n  var leftchannel = [];\r\n  var rightchannel = [];\r\n  var recording = false;\r\n  var recordingLength = 0;\r\n  var jsAudioNode;\r\n\r\n  var numberOfAudioChannels = 2;\r\n\r\n  /**\r\n   * Set sample rates such as 8K or 16K. Reference: http://stackoverflow.com/a/28977136/552182\r\n   * @property {number} desiredSampRate - Desired Bits per sample * 1000\r\n   * @memberof StereoAudioRecorder\r\n   * @instance\r\n   * @example\r\n   * var recorder = StereoAudioRecorder(mediaStream, {\r\n     *   desiredSampRate: 16 * 1000 // bits-per-sample * 1000\r\n     * });\r\n   */\r\n  var desiredSampRate = config.desiredSampRate;\r\n\r\n  // backward compatibility\r\n  if (config.leftChannel === true) {\r\n    numberOfAudioChannels = 1;\r\n  }\r\n\r\n  if (config.numberOfAudioChannels === 1) {\r\n    numberOfAudioChannels = 1;\r\n  }\r\n\r\n  if (!numberOfAudioChannels || numberOfAudioChannels < 1) {\r\n    numberOfAudioChannels = 2;\r\n  }\r\n\r\n  if (!config.disableLogs) {\r\n    console.log('StereoAudioRecorder is set to record number of channels: ' + numberOfAudioChannels);\r\n  }\r\n\r\n  // if any Track within the MediaStream is muted or not enabled at any time,\r\n  // the browser will only record black frames\r\n  // or silence since that is the content produced by the Track\r\n  // so we need to stopRecording as soon as any single track ends.\r\n  if (typeof config.checkForInactiveTracks === 'undefined') {\r\n    config.checkForInactiveTracks = true;\r\n  }\r\n\r\n  function isMediaStreamActive() {\r\n    if (config.checkForInactiveTracks === false) {\r\n      // always return \"true\"\r\n      return true;\r\n    }\r\n\r\n    if ('active' in mediaStream) {\r\n      if (!mediaStream.active) {\r\n        return false;\r\n      }\r\n    } else if ('ended' in mediaStream) { // old hack\r\n      if (mediaStream.ended) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * This method records MediaStream.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.record();\r\n   */\r\n  this.record = function() {\r\n    if (isMediaStreamActive() === false) {\r\n      throw 'Please make sure MediaStream is active.';\r\n    }\r\n\r\n    resetVariables();\r\n\r\n    isAudioProcessStarted = isPaused = false;\r\n    recording = true;\r\n\r\n    if (typeof config.timeSlice !== 'undefined') {\r\n      looper();\r\n    }\r\n  };\r\n\r\n  function mergeLeftRightBuffers(config, callback) {\r\n    function mergeAudioBuffers(config, cb) {\r\n      var numberOfAudioChannels = config.numberOfAudioChannels;\r\n\r\n      // todo: \"slice(0)\" --- is it causes loop? Should be removed?\r\n      var leftBuffers = config.leftBuffers.slice(0);\r\n      var rightBuffers = config.rightBuffers.slice(0);\r\n      var sampleRate = config.sampleRate;\r\n      var internalInterleavedLength = config.internalInterleavedLength;\r\n      var desiredSampRate = config.desiredSampRate;\r\n\r\n      if (numberOfAudioChannels === 2) {\r\n        leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\r\n        rightBuffers = mergeBuffers(rightBuffers, internalInterleavedLength);\r\n\r\n        if (desiredSampRate) {\r\n          leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\r\n          rightBuffers = interpolateArray(rightBuffers, desiredSampRate, sampleRate);\r\n        }\r\n      }\r\n\r\n      if (numberOfAudioChannels === 1) {\r\n        leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\r\n\r\n        if (desiredSampRate) {\r\n          leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\r\n        }\r\n      }\r\n\r\n      // set sample rate as desired sample rate\r\n      if (desiredSampRate) {\r\n        sampleRate = desiredSampRate;\r\n      }\r\n\r\n      // for changing the sampling rate, reference:\r\n      // http://stackoverflow.com/a/28977136/552182\r\n      function interpolateArray(data, newSampleRate, oldSampleRate) {\r\n        var fitCount = Math.round(data.length * (newSampleRate / oldSampleRate));\r\n        var newData = [];\r\n        var springFactor = Number((data.length - 1) / (fitCount - 1));\r\n        newData[0] = data[0];\r\n        for (var i = 1; i < fitCount - 1; i++) {\r\n          var tmp = i * springFactor;\r\n          var before = Number(Math.floor(tmp)).toFixed();\r\n          var after = Number(Math.ceil(tmp)).toFixed();\r\n          var atPoint = tmp - before;\r\n          newData[i] = linearInterpolate(data[before], data[after], atPoint);\r\n        }\r\n        newData[fitCount - 1] = data[data.length - 1];\r\n        return newData;\r\n      }\r\n\r\n      function linearInterpolate(before, after, atPoint) {\r\n        return before + (after - before) * atPoint;\r\n      }\r\n\r\n      function mergeBuffers(channelBuffer, rLength) {\r\n        var result = new Float64Array(rLength);\r\n        var offset = 0;\r\n        var lng = channelBuffer.length;\r\n\r\n        for (var i = 0; i < lng; i++) {\r\n          var buffer = channelBuffer[i];\r\n          result.set(buffer, offset);\r\n          offset += buffer.length;\r\n        }\r\n\r\n        return result;\r\n      }\r\n\r\n      function interleave(leftChannel, rightChannel) {\r\n        var length = leftChannel.length + rightChannel.length;\r\n\r\n        var result = new Float64Array(length);\r\n\r\n        var inputIndex = 0;\r\n\r\n        for (var index = 0; index < length;) {\r\n          result[index++] = leftChannel[inputIndex];\r\n          result[index++] = rightChannel[inputIndex];\r\n          inputIndex++;\r\n        }\r\n        return result;\r\n      }\r\n\r\n      function writeUTFBytes(view, offset, string) {\r\n        var lng = string.length;\r\n        for (var i = 0; i < lng; i++) {\r\n          view.setUint8(offset + i, string.charCodeAt(i));\r\n        }\r\n      }\r\n\r\n      // interleave both channels together\r\n      var interleaved;\r\n\r\n      if (numberOfAudioChannels === 2) {\r\n        interleaved = interleave(leftBuffers, rightBuffers);\r\n      }\r\n\r\n      if (numberOfAudioChannels === 1) {\r\n        interleaved = leftBuffers;\r\n      }\r\n\r\n      var interleavedLength = interleaved.length;\r\n\r\n      // create wav file\r\n      var resultingBufferLength = 44 + interleavedLength * 2;\r\n\r\n      var buffer = new ArrayBuffer(resultingBufferLength);\r\n\r\n      var view = new DataView(buffer);\r\n\r\n      // RIFF chunk descriptor/identifier\r\n      writeUTFBytes(view, 0, 'RIFF');\r\n\r\n      // RIFF chunk length\r\n      // changed \"44\" to \"36\" via #401\r\n      view.setUint32(4, 36 + interleavedLength * 2, true);\r\n\r\n      // RIFF type\r\n      writeUTFBytes(view, 8, 'WAVE');\r\n\r\n      // format chunk identifier\r\n      // FMT sub-chunk\r\n      writeUTFBytes(view, 12, 'fmt ');\r\n\r\n      // format chunk length\r\n      view.setUint32(16, 16, true);\r\n\r\n      // sample format (raw)\r\n      view.setUint16(20, 1, true);\r\n\r\n      // stereo (2 channels)\r\n      view.setUint16(22, numberOfAudioChannels, true);\r\n\r\n      // sample rate\r\n      view.setUint32(24, sampleRate, true);\r\n\r\n      // byte rate (sample rate * block align)\r\n      view.setUint32(28, sampleRate * numberOfAudioChannels * 2, true);\r\n\r\n      // block align (channel count * bytes per sample)\r\n      view.setUint16(32, numberOfAudioChannels * 2, true);\r\n\r\n      // bits per sample\r\n      view.setUint16(34, 16, true);\r\n\r\n      // data sub-chunk\r\n      // data chunk identifier\r\n      writeUTFBytes(view, 36, 'data');\r\n\r\n      // data chunk length\r\n      view.setUint32(40, interleavedLength * 2, true);\r\n\r\n      // write the PCM samples\r\n      var lng = interleavedLength;\r\n      var index = 44;\r\n      var volume = 1;\r\n      for (var i = 0; i < lng; i++) {\r\n        view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\r\n        index += 2;\r\n      }\r\n\r\n      if (cb) {\r\n        return cb({\r\n          buffer: buffer,\r\n          view: view\r\n        });\r\n      }\r\n\r\n      postMessage({\r\n        buffer: buffer,\r\n        view: view\r\n      });\r\n    }\r\n\r\n    if (config.noWorker) {\r\n      mergeAudioBuffers(config, function(data) {\r\n        callback(data.buffer, data.view);\r\n      });\r\n      return;\r\n    }\r\n\r\n\r\n    var webWorker = processInWebWorker(mergeAudioBuffers);\r\n\r\n    webWorker.onmessage = function(event) {\r\n      callback(event.data.buffer, event.data.view);\r\n\r\n      // release memory\r\n      URL.revokeObjectURL(webWorker.workerURL);\r\n\r\n      // kill webworker (or Chrome will kill your page after ~25 calls)\r\n      webWorker.terminate();\r\n    };\r\n\r\n    webWorker.postMessage(config);\r\n  }\r\n\r\n  function processInWebWorker(_function) {\r\n    var workerURL = URL.createObjectURL(new Blob([_function.toString(),\r\n      ';this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n    ], {\r\n      type: 'application/javascript'\r\n    }));\r\n\r\n    var worker = new Worker(workerURL);\r\n    worker.workerURL = workerURL;\r\n    return worker;\r\n  }\r\n\r\n  /**\r\n   * This method stops recording MediaStream.\r\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n   */\r\n  this.stop = function(callback) {\r\n    callback = callback || function() {};\r\n\r\n    // stop recording\r\n    recording = false;\r\n\r\n    mergeLeftRightBuffers({\r\n      desiredSampRate: desiredSampRate,\r\n      sampleRate: sampleRate,\r\n      numberOfAudioChannels: numberOfAudioChannels,\r\n      internalInterleavedLength: recordingLength,\r\n      leftBuffers: leftchannel,\r\n      rightBuffers: numberOfAudioChannels === 1 ? [] : rightchannel,\r\n      noWorker: config.noWorker\r\n    }, function(buffer, view) {\r\n      /**\r\n       * @property {Blob} blob - The recorded blob object.\r\n       * @memberof StereoAudioRecorder\r\n       * @example\r\n       * recorder.stop(function(){\r\n             *     var blob = recorder.blob;\r\n             * });\r\n       */\r\n      self.blob = new Blob([view], {\r\n        type: 'audio/wav'\r\n      });\r\n\r\n      /**\r\n       * @property {ArrayBuffer} buffer - The recorded buffer object.\r\n       * @memberof StereoAudioRecorder\r\n       * @example\r\n       * recorder.stop(function(){\r\n             *     var buffer = recorder.buffer;\r\n             * });\r\n       */\r\n      self.buffer = new ArrayBuffer(view.buffer.byteLength);\r\n\r\n      /**\r\n       * @property {DataView} view - The recorded data-view object.\r\n       * @memberof StereoAudioRecorder\r\n       * @example\r\n       * recorder.stop(function(){\r\n             *     var view = recorder.view;\r\n             * });\r\n       */\r\n      self.view = view;\r\n\r\n      self.sampleRate = desiredSampRate || sampleRate;\r\n      self.bufferSize = bufferSize;\r\n\r\n      // recorded audio length\r\n      self.length = recordingLength;\r\n\r\n      isAudioProcessStarted = false;\r\n\r\n      if (callback) {\r\n        callback(self.blob);\r\n      }\r\n    });\r\n  };\r\n\r\n  if (typeof RecordRTC.Storage === 'undefined') {\r\n    RecordRTC.Storage = {\r\n      AudioContextConstructor: null,\r\n      AudioContext: window.AudioContext || window.webkitAudioContext\r\n    };\r\n  }\r\n\r\n  if (!RecordRTC.Storage.AudioContextConstructor || RecordRTC.Storage.AudioContextConstructor.state === 'closed') {\r\n    RecordRTC.Storage.AudioContextConstructor = new RecordRTC.Storage.AudioContext();\r\n  }\r\n\r\n  var context = RecordRTC.Storage.AudioContextConstructor;\r\n\r\n  // creates an audio node from the microphone incoming stream\r\n  var audioInput = context.createMediaStreamSource(mediaStream);\r\n\r\n  var legalBufferValues = [0, 256, 512, 1024, 2048, 4096, 8192, 16384];\r\n\r\n  /**\r\n   * From the spec: This value controls how frequently the audioprocess event is\r\n   * dispatched and how many sample-frames need to be processed each call.\r\n   * Lower values for buffer size will result in a lower (better) latency.\r\n   * Higher values will be necessary to avoid audio breakup and glitches\r\n   * The size of the buffer (in sample-frames) which needs to\r\n   * be processed each time onprocessaudio is called.\r\n   * Legal values are (256, 512, 1024, 2048, 4096, 8192, 16384).\r\n   * @property {number} bufferSize - Buffer-size for how frequently the audioprocess event is dispatched.\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder = new StereoAudioRecorder(mediaStream, {\r\n     *     bufferSize: 4096\r\n     * });\r\n   */\r\n\r\n    // \"0\" means, let chrome decide the most accurate buffer-size for current platform.\r\n  var bufferSize = typeof config.bufferSize === 'undefined' ? 4096 : config.bufferSize;\r\n\r\n  if (legalBufferValues.indexOf(bufferSize) === -1) {\r\n    if (!config.disableLogs) {\r\n      console.log('Legal values for buffer-size are ' + JSON.stringify(legalBufferValues, null, '\\t'));\r\n    }\r\n  }\r\n\r\n  if (context.createJavaScriptNode) {\r\n    jsAudioNode = context.createJavaScriptNode(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\r\n  } else if (context.createScriptProcessor) {\r\n    jsAudioNode = context.createScriptProcessor(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\r\n  } else {\r\n    throw 'WebAudio API has no support on this browser.';\r\n  }\r\n\r\n  // connect the stream to the script processor\r\n  audioInput.connect(jsAudioNode);\r\n\r\n  if (!config.bufferSize) {\r\n    bufferSize = jsAudioNode.bufferSize; // device buffer-size\r\n  }\r\n\r\n  /**\r\n   * The sample rate (in sample-frames per second) at which the\r\n   * AudioContext handles audio. It is assumed that all AudioNodes\r\n   * in the context run at this rate. In making this assumption,\r\n   * sample-rate converters or \"varispeed\" processors are not supported\r\n   * in real-time processing.\r\n   * The sampleRate parameter describes the sample-rate of the\r\n   * linear PCM audio data in the buffer in sample-frames per second.\r\n   * An implementation must support sample-rates in at least\r\n   * the range 22050 to 96000.\r\n   * @property {number} sampleRate - Buffer-size for how frequently the audioprocess event is dispatched.\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder = new StereoAudioRecorder(mediaStream, {\r\n     *     sampleRate: 44100\r\n     * });\r\n   */\r\n  var sampleRate = typeof config.sampleRate !== 'undefined' ? config.sampleRate : context.sampleRate || 44100;\r\n\r\n  if (sampleRate < 22050 || sampleRate > 96000) {\r\n    // Ref: http://stackoverflow.com/a/26303918/552182\r\n    if (!config.disableLogs) {\r\n      console.log('sample-rate must be under range 22050 and 96000.');\r\n    }\r\n  }\r\n\r\n  if (!config.disableLogs) {\r\n    if (config.desiredSampRate) {\r\n      console.log('Desired sample-rate: ' + config.desiredSampRate);\r\n    }\r\n  }\r\n\r\n  var isPaused = false;\r\n  /**\r\n   * This method pauses the recording process.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.pause();\r\n   */\r\n  this.pause = function() {\r\n    isPaused = true;\r\n  };\r\n\r\n  /**\r\n   * This method resumes the recording process.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.resume();\r\n   */\r\n  this.resume = function() {\r\n    if (isMediaStreamActive() === false) {\r\n      throw 'Please make sure MediaStream is active.';\r\n    }\r\n\r\n    if (!recording) {\r\n      if (!config.disableLogs) {\r\n        console.log('Seems recording has been restarted.');\r\n      }\r\n      this.record();\r\n      return;\r\n    }\r\n\r\n    isPaused = false;\r\n  };\r\n\r\n  /**\r\n   * This method resets currently recorded data.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.clearRecordedData();\r\n   */\r\n  this.clearRecordedData = function() {\r\n    config.checkForInactiveTracks = false;\r\n\r\n    if (recording) {\r\n      this.stop(clearRecordedDataCB);\r\n    }\r\n\r\n    clearRecordedDataCB();\r\n  };\r\n\r\n  function resetVariables() {\r\n    leftchannel = [];\r\n    rightchannel = [];\r\n    recordingLength = 0;\r\n    isAudioProcessStarted = false;\r\n    recording = false;\r\n    isPaused = false;\r\n    context = null;\r\n\r\n    self.leftchannel = leftchannel;\r\n    self.rightchannel = rightchannel;\r\n    self.numberOfAudioChannels = numberOfAudioChannels;\r\n    self.desiredSampRate = desiredSampRate;\r\n    self.sampleRate = sampleRate;\r\n    self.recordingLength = recordingLength;\r\n\r\n    intervalsBasedBuffers = {\r\n      left: [],\r\n      right: [],\r\n      recordingLength: 0\r\n    };\r\n  }\r\n\r\n  function clearRecordedDataCB() {\r\n    if (jsAudioNode) {\r\n      jsAudioNode.onaudioprocess = null;\r\n      jsAudioNode.disconnect();\r\n      jsAudioNode = null;\r\n    }\r\n\r\n    if (audioInput) {\r\n      audioInput.disconnect();\r\n      audioInput = null;\r\n    }\r\n\r\n    resetVariables();\r\n  }\r\n\r\n  // for debugging\r\n  this.name = 'StereoAudioRecorder';\r\n  this.toString = function() {\r\n    return this.name;\r\n  };\r\n\r\n  var isAudioProcessStarted = false;\r\n\r\n  function onAudioProcessDataAvailable(e) {\r\n    if (isPaused) {\r\n      return;\r\n    }\r\n\r\n    if (isMediaStreamActive() === false) {\r\n      if (!config.disableLogs) {\r\n        console.log('MediaStream seems stopped.');\r\n      }\r\n      jsAudioNode.disconnect();\r\n      recording = false;\r\n    }\r\n\r\n    if (!recording) {\r\n      if (audioInput) {\r\n        audioInput.disconnect();\r\n        audioInput = null;\r\n      }\r\n      return;\r\n    }\r\n\r\n    /**\r\n     * This method is called on \"onaudioprocess\" event's first invocation.\r\n     * @method {function} onAudioProcessStarted\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.onAudioProcessStarted: function() { };\r\n     */\r\n    if (!isAudioProcessStarted) {\r\n      isAudioProcessStarted = true;\r\n      if (config.onAudioProcessStarted) {\r\n        config.onAudioProcessStarted();\r\n      }\r\n\r\n      if (config.initCallback) {\r\n        config.initCallback();\r\n      }\r\n    }\r\n\r\n    var left = e.inputBuffer.getChannelData(0);\r\n\r\n    // we clone the samples\r\n    var chLeft = new Float32Array(left);\r\n    leftchannel.push(chLeft);\r\n\r\n    if (numberOfAudioChannels === 2) {\r\n      var right = e.inputBuffer.getChannelData(1);\r\n      var chRight = new Float32Array(right);\r\n      rightchannel.push(chRight);\r\n    }\r\n\r\n    recordingLength += bufferSize;\r\n\r\n    // export raw PCM\r\n    self.recordingLength = recordingLength;\r\n\r\n    if (typeof config.timeSlice !== 'undefined') {\r\n      intervalsBasedBuffers.recordingLength += bufferSize;\r\n      intervalsBasedBuffers.left.push(chLeft);\r\n\r\n      if (numberOfAudioChannels === 2) {\r\n        intervalsBasedBuffers.right.push(chRight);\r\n      }\r\n    }\r\n  }\r\n\r\n  jsAudioNode.onaudioprocess = onAudioProcessDataAvailable;\r\n\r\n  // to prevent self audio to be connected with speakers\r\n  if (context.createMediaStreamDestination) {\r\n    jsAudioNode.connect(context.createMediaStreamDestination());\r\n  } else {\r\n    jsAudioNode.connect(context.destination);\r\n  }\r\n\r\n  // export raw PCM\r\n  this.leftchannel = leftchannel;\r\n  this.rightchannel = rightchannel;\r\n  this.numberOfAudioChannels = numberOfAudioChannels;\r\n  this.desiredSampRate = desiredSampRate;\r\n  this.sampleRate = sampleRate;\r\n  self.recordingLength = recordingLength;\r\n\r\n  // helper for intervals based blobs\r\n  var intervalsBasedBuffers = {\r\n    left: [],\r\n    right: [],\r\n    recordingLength: 0\r\n  };\r\n\r\n  // this looper is used to support intervals based blobs (via timeSlice+ondataavailable)\r\n  function looper() {\r\n    if (!recording || typeof config.ondataavailable !== 'function' || typeof config.timeSlice === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    if (intervalsBasedBuffers.left.length) {\r\n      mergeLeftRightBuffers({\r\n        desiredSampRate: desiredSampRate,\r\n        sampleRate: sampleRate,\r\n        numberOfAudioChannels: numberOfAudioChannels,\r\n        internalInterleavedLength: intervalsBasedBuffers.recordingLength,\r\n        leftBuffers: intervalsBasedBuffers.left,\r\n        rightBuffers: numberOfAudioChannels === 1 ? [] : intervalsBasedBuffers.right\r\n      }, function(buffer, view) {\r\n        var blob = new Blob([view], {\r\n          type: 'audio/wav'\r\n        });\r\n        config.ondataavailable(blob);\r\n\r\n        setTimeout(looper, config.timeSlice);\r\n      });\r\n\r\n      intervalsBasedBuffers = {\r\n        left: [],\r\n        right: [],\r\n        recordingLength: 0\r\n      };\r\n    } else {\r\n      setTimeout(looper, config.timeSlice);\r\n    }\r\n  }\r\n\r\n  function getTracks(stream, kind) {\r\n    if (!stream || !stream.getTracks) {\r\n      return [];\r\n    }\r\n\r\n    return stream.getTracks().filter(function(t) {\r\n      return t.kind === (kind || 'audio');\r\n    });\r\n  }\r\n}\r\n\r\nexport default StereoAudioRecorder\r\n","<template>\r\n  <div class=\"recordMutistream\">\r\n    <div class=\"recordContainer\">\r\n      <div class=\"downLoadBtn\" style=\"text-align: center; display:none;\" ref=\"downLoadBtn\">\r\n        <button class=\"save-to-disk\" @click=\"downLoad\">Save To Disk</button>\r\n        <button class=\"open-new-tab\" @click=\"startNewTab\">Open New Tab</button>\r\n      </div>\r\n      <h2 style=\"display: block;\" ref=\"H2\"></h2>\r\n      <div class=\"mutistreamContent\" >\r\n\r\n        <audio class=\"mutistreamVideo\" ref=\"mutistreamAudio\" width=\"720\"  style=\"transform: scale(1)\"></audio>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import beautyDate from '@/api/day.js'\r\n    import FileSelector from  '@/api/fileSelector.js'\r\n    import StereoAudioRecorder from \"@/api/StereoAudioRecorder\"\r\n    import MultiStreamsMixer from 'multistreamsmixer';\r\n    import RecordRTC from 'recordrtc'\r\n    import {Bus} from \"@/common/Bus.js\"\r\n    export default {\r\n        name: \"MicrophoneAndMp3Record\",\r\n        mounted(){\r\n          let This = this\r\n          This.video = This.$refs.mutistreamAudio;\r\n          This.h2 = This.$refs.H2\r\n          This.isMute = This.$store.getters.getMuteState\r\n          Bus.$on('microphoneMp3Recording',(data)=>{\r\n            This.button = data.element\r\n            This.button.value = data.value\r\n            This.startRecording()\r\n          })\r\n          Bus.$on(\"isMute\",(data)=>{\r\n            This.isMute = data.value\r\n            if(This.audioStream){\r\n              This.streamMuteSwitch({stream: This.audioStream, type: 'audio', mute: This.isMute})\r\n            }\r\n          })\r\n        },\r\n        methods:{\r\n          startRecording(){\r\n            let This = this\r\n            if(This.button.value === 'Stop Recording'){\r\n              This.button.disabled = true;\r\n              This.button.disableStateWaiting = true;\r\n              setTimeout(function() {\r\n                This.button.disabled = false;\r\n                This.button.disableStateWaiting = false;\r\n              }, 2000);\r\n\r\n              This.recorder.stopRecording(This.stopRecordingCallback)\r\n              return\r\n            }\r\n            This.$refs.downLoadBtn.style.display = \"none\"\r\n            This.getMp3Stream(function(mp3Stream) {\r\n              This.mp3Stream = mp3Stream\r\n              let constraints = {\r\n                audio: {\r\n                  exact: {\r\n                    deviceId: This.$store.getters.getCurrentAudioSource,\r\n                  },\r\n                  noiseSuppression: true,\r\n                  echoCancellation: true\r\n                }\r\n              }\r\n              navigator.mediaDevices.getUserMedia(constraints).then(function(microphoneStream) {\r\n                This.audioStream = microphoneStream\r\n                if(This.audioStream){\r\n                  This.streamMuteSwitch({stream: This.audioStream, type: 'audio', mute: This.isMute})\r\n                }\r\n                let mixer = new MultiStreamsMixer([microphoneStream, mp3Stream]);\r\n                // mixer.useGainNode = false;\r\n                var audioPreview = document.createElement('audio');\r\n                audioPreview.controls = true;\r\n                audioPreview.autoplay = true;\r\n\r\n                audioPreview.srcObject = mixer.getMixedStream();\r\n\r\n                This.video.replaceWith(audioPreview);\r\n                This.video = audioPreview;\r\n\r\n                var secondsLeft = 3;\r\n                (function looper() {\r\n                  secondsLeft--;\r\n\r\n                  if(secondsLeft < 0) {\r\n                    This.h2.innerHTML = 'Mixed Microphone+Mp3!';\r\n                    return;\r\n                  }\r\n                  This.h2.innerHTML = 'Seconds left: ' + secondsLeft;\r\n                  setTimeout(looper, 1000);\r\n                })();\r\n\r\n                This.recorder = RecordRTC(mixer.getMixedStream(), {\r\n                  // recorderType: StereoAudioRecorder\r\n                  mimeType: 'audio/webm',\r\n                  timeSlice: 1000,\r\n                  type: 'audio',\r\n                });\r\n                Bus.$emit(\"startRecordingMp3\", {isRecording: false, value: 'Stop Recording'})\r\n                This.recorder.startRecording();\r\n\r\n                // setTimeout(function() {\r\n                //   This.recorder.stopRecording(function() {\r\n                //     audioPreview.removeAttribute('srcObject');\r\n                //     audioPreview.removeAttribute('src');\r\n                //     This.file = This.recorder.getBlob()\r\n                //     This.url = URL.createObjectURL(This.file)\r\n                //     audioPreview.src = This.url;\r\n                //   });\r\n                // }, 5000)\r\n              });\r\n            });\r\n          },\r\n          getMp3Stream(callback) {\r\n            var selector = new FileSelector();\r\n            selector.accept = '*.mp3'|| '*.wav';\r\n            selector.selectSingleFile(function(mp3File) {\r\n              window.AudioContext = window.AudioContext || window.webkitAudioContext;\r\n              var context = new AudioContext();\r\n              var gainNode = context.createGain();\r\n              gainNode.connect(context.destination);\r\n              gainNode.gain.value = 0; // don't play for self\r\n\r\n              var reader = new FileReader();\r\n              reader.onload = (function(e) {\r\n                // Import callback function\r\n                // provides PCM audio data decoded as an audio buffer\r\n                context.decodeAudioData(e.target.result, createSoundSource);\r\n              });\r\n              reader.readAsArrayBuffer(mp3File);\r\n\r\n              function createSoundSource(buffer) {\r\n                var soundSource = context.createBufferSource();\r\n                soundSource.buffer = buffer;\r\n                soundSource.start(0, 0 / 1000);\r\n                soundSource.connect(gainNode);\r\n                var destination = context.createMediaStreamDestination();\r\n                soundSource.connect(destination);\r\n\r\n                // durtion=second*1000 (milliseconds)\r\n                callback(destination.stream, buffer.duration * 1000);\r\n              }\r\n            }, function() {\r\n              document.querySelector('#btn-get-mixed-stream').disabled = false;\r\n              alert('Please select mp3 file.');\r\n            });\r\n          },\r\n          streamMuteSwitch(data) {\r\n            if (data && data.stream && data.type === 'audio' && data.stream.getAudioTracks().length > 0) {\r\n              for (let i = 0; i < data.stream.getAudioTracks().length; i++) {\r\n                console.warn(\"data.mute:\",data.mute)\r\n                if (data.mute) {\r\n                  if (data.stream.getAudioTracks()[i].enabled === true) {\r\n                    console.info('MuteStream exec mute audio')\r\n                    data.stream.getAudioTracks()[i].enabled = false\r\n                    this.isMute = true\r\n                  }\r\n                } else {\r\n                  if (data.stream.getAudioTracks()[i].enabled === false) {\r\n                    console.info('MuteStream exec unmute audio')\r\n                    data.stream.getAudioTracks()[i].enabled = true\r\n                    this.isMute = false\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          },\r\n          stopRecordingCallback(){\r\n            let This = this\r\n            This.file = This.recorder.getBlob();\r\n            This.video.srcObject = null;\r\n            This.url = URL.createObjectURL(This.file)\r\n            This.video.src = This.url;\r\n            This.video.muted = false;\r\n            This.video.play()\r\n            This.video.controls = true;\r\n\r\n            This.recorder.destroy()\r\n            This.recorder = null\r\n            // This.button.innerHTML = \"start Recording\"\r\n            This.button.value = 'Start Recording'\r\n            Bus.$emit(\"startRecordingMp3\", {isRecording: true, value: 'Start Recording'})\r\n            This.$refs.downLoadBtn.style.display = \"block\"\r\n            let mutiStream = [This.mp3Stream, This.audioStream]\r\n            mutiStream.forEach(function(stream) {\r\n              stream.getTracks().forEach(function(track) {\r\n                track.stop();\r\n              });\r\n            });\r\n            This.mp3Stream = This.audioStream = null\r\n          },\r\n          downLoad(){\r\n            let type\r\n            type = {type: 'video/webm'}\r\n            let logTime = new Date(parseInt((new Date()).getTime()))\r\n            logTime = beautyDate(logTime)\r\n            let a = document.createElement('a');\r\n            a.target = \"_blank\";\r\n            a.style.display = 'none';\r\n            a.href = this.url;\r\n            a.download = 'record- '+ logTime +'.mp4';\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            // setTimeout(function() {\r\n            //   document.body.removeChild(a);\r\n            //   window.URL.revokeObjectURL(this.url);\r\n            // }, 100);\r\n          },\r\n          startNewTab(){\r\n            let logTime = new Date(parseInt((new Date()).getTime()))\r\n            logTime = beautyDate(logTime)\r\n            let fileName = 'recorder_'+ logTime +'.webm'\r\n            let file = new File([this.file], fileName, { type: 'video/webm'});\r\n            window.open(URL.createObjectURL(file));\r\n          },\r\n        },\r\n        beforeDestroy(){\r\n          Bus.$off('microphoneMp3Recording')\r\n          Bus.$off(\"isMute\")\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n  .recordMutistream{\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n  }\r\n  .recordBtn{\r\n    background-color: #dde3e3;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    text-align:center;\r\n    marign: 5px;\r\n    width: 100%;\r\n  }\r\n  button{\r\n    width: 100px;\r\n    height: 40px;\r\n    border-radius: 5px;\r\n    border:none;\r\n  }\r\n  .recordContainer{\r\n    border: 1px solid #ccc;\r\n    width: 100%;\r\n    height:500px;\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    margin: 5px;\r\n    border-radius: 10px;\r\n    background-color: white;\r\n  }\r\n  .downLoadBtn{\r\n    width:100%;\r\n    height: 50px;\r\n  }\r\n  .mutistreamContent{\r\n    width:640px;\r\n    height:360px;\r\n    overflow: hidden;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .mutistreamVideo{\r\n    z-index: 999;\r\n  }\r\n  .save-to-disk{\r\n    margin: 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n  .open-new-tab{\r\n    margin: 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MicrophoneAndMp3Record.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MicrophoneAndMp3Record.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MicrophoneAndMp3Record.vue?vue&type=template&id=a95f0938&scoped=true&\"\nimport script from \"./MicrophoneAndMp3Record.vue?vue&type=script&lang=js&\"\nexport * from \"./MicrophoneAndMp3Record.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MicrophoneAndMp3Record.vue?vue&type=style&index=0&id=a95f0938&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a95f0938\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"advanceRecord\">\r\n    <div class=\"recordBttonWrapper\">\r\n      <div class=\"recordBtton\">\r\n        <select class=\"recording-media\" @change=\"getAdavncedRecordMedia\" ref=\"advancedRecordMedia\">\r\n          <option v-for=\"(item,index) in advancedRecordingMedia\" :key=\"index\" :value=\"item.value\">{{item.text}}</option>\r\n        </select>\r\n\r\n        <div class=\"recordBtn\" v-show=\"currentRecordType === 'record-regionalScreen' \" ref=\"shareScreenBtn\">\r\n          <button ref=\"shareScreenBtn\" @click=\"handleShareStream\">开启共享</button>\r\n\r\n          <!--<button v-if=\"currentRecordType === 'record-regionalScreen' \" @click=\"getDisplayMedia\">开启共享</button>-->\r\n          <!--<button class=\"startBtn\" @click=\"handleRecord\" ref=\"startBtn\"> Start Recording</button>-->\r\n        </div>\r\n\r\n        <div class=\"recordBtn\">\r\n          <!--<button class=\"startBtn\"  ref=\"startBtn\" >Start Recording</button>-->\r\n          <button class=\"startBtn\"  ref=\"startBtn\" @click=\"handleRecord\">Start Recording</button>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n    <div class=\"recordContent\">\r\n      <div v-if=\"currentRecordType === 'record-camera-plus-screen' \">\r\n        <MutiStream ></MutiStream>\r\n      </div>\r\n      <div v-if=\"currentRecordType === 'record-regionalScreen' \">\r\n        <RegionalStream></RegionalStream>\r\n      </div>\r\n      <div v-if=\"currentRecordType === 'gif-record' \">\r\n        <GifRecord></GifRecord>\r\n      </div>\r\n      <div v-if=\"currentRecordType === 'microphone-mp3' \">\r\n        <MicrophoneMp3></MicrophoneMp3>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import MutiStream from \"@/views/recordType/RecordMutistream.vue\"\r\n    import RegionalStream from \"@/views/recordType/RecordRegionalScreen.vue\"\r\n    import GifRecord from \"@/views/recordType/GifRecord.vue\"\r\n    import MicrophoneMp3 from \"@/views/recordType/MicrophoneAndMp3Record.vue\"\r\n    import {Bus} from \"@/common/Bus.js\"\r\n    // import debounce from \"@/common/getStream/index.js\"\r\n    export default {\r\n        name: \"AdvanceRecord\",\r\n        data(){\r\n          return{\r\n            currentRecordType: '',          // 当前录制的类型\r\n          }\r\n        },\r\n       props:['advancedRecordingMedia'],\r\n       components:{ MicrophoneMp3, GifRecord,RegionalStream, MutiStream},\r\n       mounted(){\r\n         this.currentRecordType = this.$store.state.currentRecordMethod === 'advanced-Recorded' ?  this.advancedRecordingMedia[0].value : null\r\n         this.startRecordingBtn = this.$refs.startBtn\r\n         this.shareScreenBtn = this.$refs.shareScreenBtn\r\n         Bus.$on(\"startRecordingValue\", (data)=>{\r\n           console.warn(\"data:\",data)\r\n           this.startRecordingBtn.innerHTML = data.value\r\n         })\r\n         Bus.$on(\"recordingValue\", (data)=>{\r\n           this.startRecordingBtn.innerHTML = data.value\r\n         })\r\n         Bus.$on(\"gifRecordingValue\", (data)=>{\r\n           this.startRecordingBtn.innerHTML = data.value\r\n         })\r\n         Bus.$on(\"startRecordingMp3\",(data)=>{\r\n           this.startRecordingBtn.innerHTML = data.value\r\n         })\r\n         Bus.$on(\"isDisplayBtn\", (data)=>{\r\n           if(data.value){\r\n             this.shareScreenBtn.style.display = 'block'\r\n           }else{\r\n             this.shareScreenBtn.style.display = 'none'\r\n           }\r\n         })\r\n       },\r\n       methods:{\r\n         getAdavncedRecordMedia(){\r\n           this.currentRecordType = this.$store.state.currentRecordMethod === 'advanced-Recorded' ? this.$refs.advancedRecordMedia.value : null\r\n         },\r\n         handleRecord(){\r\n           if(this.currentRecordType === 'record-regionalScreen'){\r\n             Bus.$emit(\"startRecordingScreen\", {isRecording: true, element: this.startRecordingBtn, value: this.startRecordingBtn.innerHTML })\r\n           }else if(this.currentRecordType === 'record-camera-plus-screen'){\r\n             Bus.$emit(\"startRecording\", {isRecording: true, element: this.startRecordingBtn, value: this.startRecordingBtn.innerHTML })\r\n           }else if(this.currentRecordType === 'gif-record'){\r\n             Bus.$emit(\"gifRecording\",{isRecording: true, element: this.startRecordingBtn, value: this.startRecordingBtn.innerHTML })\r\n           }else if(this.currentRecordType === 'microphone-mp3'){\r\n             Bus.$emit(\"microphoneMp3Recording\",{isRecording: true, element: this.startRecordingBtn, value: this.startRecordingBtn.innerHTML })\r\n           }\r\n         },\r\n         handleShareStream(){\r\n           Bus.$emit(\"shareScreen\", {isShare: true, element: this.shareScreenBtn , value: this.shareScreenBtn.innerHTML })\r\n         },\r\n       },\r\n       beforeDestroy() {\r\n         Bus.$off('startRecordingValue')\r\n         Bus.$off('recordingValue')\r\n         Bus.$off('isDisplayBtn')\r\n         Bus.$off('shareScreen')\r\n         Bus.$off('startRecording')\r\n       }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n  /** 关于高级录制的样式 **/\r\n  .recordWrapper{\r\n    width:100%;\r\n    height: 100%;\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content:center;\r\n    align-items: center;\r\n  }\r\n  .recordBttonWrapper{\r\n    width: 100%;\r\n    height:50px;\r\n    display: flex;\r\n    justify-content: center;\r\n    background-color: #dde3e3;\r\n    border-radius: 5px;\r\n  }\r\n  .recordBtton{\r\n    width: 60%;\r\n    height: 50px;\r\n    display:flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n  }\r\n  .recordBtn{\r\n    margin: 5px;\r\n  }\r\n  select{\r\n    width: 200px;\r\n    height: 40px;\r\n    border:none;\r\n    outline:none;\r\n    text-align: center;\r\n    border-radius: 5px;\r\n    margin: 5px;\r\n    /*padding: 8px 10px;*/\r\n  }\r\n\r\n  button{\r\n    width: 100px;\r\n    height: 40px;\r\n    border-radius: 5px;\r\n    border:none;\r\n  }\r\n\r\n  .save-to-disk{\r\n    margin: 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n  .open-new-tab{\r\n    margin: 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n  .shareScreenContent{\r\n    width:640px;\r\n    height:360px;\r\n    overflow: hidden;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .shareScreenVideo{\r\n    margin:0 auto;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    object-fit: inherit;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdvanceRecord.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdvanceRecord.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdvanceRecord.vue?vue&type=template&id=565d1bfd&scoped=true&\"\nimport script from \"./AdvanceRecord.vue?vue&type=script&lang=js&\"\nexport * from \"./AdvanceRecord.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdvanceRecord.vue?vue&type=style&index=0&id=565d1bfd&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"565d1bfd\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"recordWrapper\"},[_c('div',{staticClass:\"recordBttonWrapper\"},[_c('div',{staticClass:\"recordBtton\"},[_c('div',[_c('select',{ref:\"normalRecordMedia\",staticClass:\"recording-media\",on:{\"change\":_vm.getNormalRecordMedia}},_vm._l((_vm.normalRecordingMedia),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.text))])}),0)]),_c('div',[_c('select',{ref:\"normalMediaResolutions\",staticClass:\"media-resolutions\",on:{\"change\":_vm.getNormalMediaResolution}},_vm._l((_vm.mediaResolutions),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.text))])}),0)]),_c('div',[_c('select',{ref:\"normalMediaFramerates\",staticClass:\"media-framerates\",on:{\"change\":_vm.getNormalMediaFramerates}},_vm._l((_vm.mediaFramerates),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.text))])}),0)]),_c('div',{staticClass:\"recordBtn\"},[_c('button',{ref:\"startBtn\",staticClass:\"startBtn\",on:{\"click\":_vm.handleRecord}},[_vm._v(\" Start Recording\")])])])]),_c('div',{staticClass:\"recordContent\"},[_c('div',{ref:\"recordingPlayer\",attrs:{\"id\":\"recording-player\"}},[_c('div',{ref:\"downLoadBtn\",staticStyle:{\"text-align\":\"center\",\"display\":\"none\",\"height\":\"50px\"}},[_c('button',{staticClass:\"save-to-disk\",on:{\"click\":_vm.downLoad}},[_vm._v(\"Save To Disk\")]),_c('button',{staticClass:\"open-new-tab\",on:{\"click\":_vm.startNewTab}},[_vm._v(\"Open New Tab\")])]),_c('div',{ref:\"videoContent\",staticClass:\"shareScreenContent\"},[_c('video',{ref:\"recorderVideo\",staticClass:\"shareScreenVideo\",staticStyle:{\"transform\":\"scale(1)\",\"width\":\"100%\"}})])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"recordWrapper\">\r\n    <div class=\"recordBttonWrapper\">\r\n      <div class=\"recordBtton\">\r\n        <div>\r\n          <select class=\"recording-media\" @change=\"getNormalRecordMedia\" ref=\"normalRecordMedia\">\r\n            <option v-for=\"(item,index) in normalRecordingMedia\" :key=\"index\" :value=\"item.value\">{{item.text}}</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <select class=\"media-resolutions\" @change=\"getNormalMediaResolution\" ref=\"normalMediaResolutions\">\r\n            <option v-for=\"(item,index) in mediaResolutions\" :key=\"index\" :value=\"item.value\">{{item.text}}</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <select class=\"media-framerates\" @change=\"getNormalMediaFramerates\" ref=\"normalMediaFramerates\">\r\n            <option v-for=\"(item,index) in mediaFramerates\" :key=\"index\" :value=\"item.value\">{{item.text}}</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div class=\"recordBtn\">\r\n          <button class=\"startBtn\" @click=\"handleRecord\" ref=\"startBtn\"> Start Recording</button>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n    <div class=\"recordContent\">\r\n      <div id=\"recording-player\" ref=\"recordingPlayer\">\r\n        <div style=\"text-align: center; display:none; height:50px;\" ref=\"downLoadBtn\">\r\n          <button class=\"save-to-disk\" @click=\"downLoad\">Save To Disk</button>\r\n          <button class=\"open-new-tab\" @click=\"startNewTab\">Open New Tab</button>\r\n        </div>\r\n        <div class=\"shareScreenContent\" ref=\"videoContent\">\r\n          <video  class=\"shareScreenVideo\" ref=\"recorderVideo\"  style=\"transform: scale(1); width:100%;\"></video>\r\n          <!--<video v-if=\"currentRecordType !== 'record-audio'\" class=\"shareScreenVideo\" ref=\"recorderVideo\"  style=\"transform: scale(1); width:100%;\"></video>-->\r\n          <!--<audio v-if=\"currentRecordType === 'record-audio'\" class=\"shareScreenAudio\" ref=\"recorderAudio\"  style=\"transform: scale(1)\"></audio>-->\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import RecordRTC from 'recordrtc';\r\n    import beautyDate from '@/api/day.js'\r\n    export default {\r\n        name: \"AbnormalRecord\",\r\n        data() {\r\n          return {\r\n            mediaResolutions: [\r\n              {\r\n                index: 0,\r\n                text: 'Default resolutions',\r\n                value: 'Default'\r\n              },\r\n              {\r\n                index: 1,\r\n                text: '1080p',\r\n                value: '1920x1080'\r\n              },\r\n              {\r\n                index: 2,\r\n                text: '720p',\r\n                value: '1280x720'\r\n              },\r\n              {\r\n                index: 3,\r\n                text: '480p',\r\n                value: '640x480'\r\n              },\r\n              {\r\n                index: 4,\r\n                text: '360p',\r\n                value: '640x360'\r\n              }\r\n            ],\r\n            mediaFramerates: [\r\n              {\r\n                index: 0,\r\n                text: 'Default framerates',\r\n                value: 'default',\r\n              },\r\n              {\r\n                index: 1,\r\n                text: '5 fps',\r\n                value: '5',\r\n              },\r\n              {\r\n                index: 2,\r\n                text: '15 fps',\r\n                value: '15',\r\n              },\r\n              {\r\n                index: 3,\r\n                text: '24 fps',\r\n                value: '24',\r\n              },\r\n              {\r\n                index: 4,\r\n                text: '30 fps',\r\n                value: '30',\r\n              }\r\n            ],\r\n\r\n\r\n            // currentMethod: '',          // 页面当前选择录制的方式，如 normal-Recorded、advanced-Recorded\r\n            currentRecordType: '',      // 当前录制的类型\r\n            currentResolutions: '',     // 当前取流分辨率\r\n            currentFramerates: '',      // 当前取流帧率\r\n          }\r\n        },\r\n        props:['normalRecordingMedia'],\r\n        mounted() {\r\n          this.$nextTick(function () {\r\n            this.video = this.$refs.recorderVideo\r\n            this.audio = this.$refs.recorderAudio\r\n            this.currentRecordType = this.$store.state.currentRecordMethod === 'normal-Recorded' ? this.normalRecordingMedia[0].value : this.advancedRecordingMedia[0].value\r\n            this.currentResolutions = this.mediaResolutions[0].value\r\n            this.currentFramerates = this.mediaFramerates[0].value\r\n          })\r\n        },\r\n        methods: {\r\n\r\n        //初始化内容\r\n        init(){\r\n          let This = this\r\n          if(This.currentRecordType === 'record-audio'){\r\n            This.type = \"audio/webm\"\r\n          }else{\r\n            This.type = \"video/webm\"\r\n          }\r\n          This.button =  this.$refs.startBtn\r\n\r\n          if(This.button.innerHTML === 'Stop Recording') {\r\n            // btnPauseRecording.style.display = 'none';\r\n            This.button.disabled = true;\r\n\r\n            This.button.disableStateWaiting = true;\r\n            setTimeout(function() {\r\n              This.button.disabled = false;\r\n              This.button.disableStateWaiting = false;\r\n            }, 2000);\r\n\r\n            This.button.innerHTML = 'Start Recording';\r\n            This.recorder.stopRecording(This.stopRecordingCallback)\r\n            return;\r\n          }\r\n\r\n          if(!event) return;\r\n          This.button.disabled = true;\r\n          This.$refs.downLoadBtn.style.display = \"none\"\r\n          This.button.mediaCapturedCallback = function() {\r\n            console.warn(\" button.mediaCapturedCallback  button.mediaCapturedCallback  button.mediaCapturedCallback \")\r\n            let options = {\r\n              mimeType: This.type,\r\n              timeSlice: 1000,\r\n              type: 'video',\r\n            };\r\n\r\n            This.recorder = RecordRTC(This.button.stream, options);\r\n\r\n            This.recorder.startRecording()\r\n          }\r\n\r\n          let commonConfig = {\r\n            onMediaCaptured: function(stream) {\r\n              This.button.stream  = stream;\r\n              window.stream = stream\r\n              This.video.src = This.video.srcObject = null;\r\n              if(This.currentRecordType === 'record-audio'){\r\n\r\n                // This.audio.srcObject = stream\r\n                // This.video.muted= true\r\n                // This.video.play()\r\n\r\n                var audioPreview = document.createElement('audio');\r\n                audioPreview.controls = true;\r\n                audioPreview.autoplay = true;\r\n                audioPreview.srcObject = stream\r\n                This.video.replaceWith(audioPreview);\r\n                This.video = audioPreview;\r\n\r\n              }else{\r\n                let {width, height} = stream.getVideoTracks()[0].getConstraints()\r\n                console.warn(\"getContraints :\",width , height )\r\n\r\n                This.video.srcObject = stream\r\n                This.video.muted= true\r\n\r\n                This.video.oncanplay = function(){\r\n                  This.video.play()\r\n                }\r\n                This.video.onloadedmetadata = async function () {\r\n                  await This.video.play()\r\n                  This.video.muted = true\r\n                  if(width && (width.max > 1280 ||width.exact > 1280)){\r\n                    This.video.style.width = width &&(width.max ||width.exact) / 3 + 'px'\r\n                    This.video.style.height = height && (height.max || width.exact) / 3 + 'px'\r\n                  }else if(width && (width.max === 1280 || width.exact === 1280)){\r\n                    This.video.style.width = width &&(width.max ||width.exact) / 2 + 'px'\r\n                    This.video.style.height = height && (height.max || width.exact) / 2 + 'px'\r\n                  }else{\r\n                    This.video.style.width = (width.max || width.exact) + 'px'\r\n                    This.video.style.height = (height.max || height.exact) + 'px'\r\n                  }\r\n                }\r\n              }\r\n              if(This.button.mediaCapturedCallback) {\r\n                This.button.mediaCapturedCallback();\r\n              }\r\n\r\n              This.button.innerHTML = 'Stop Recording';\r\n              This.button.disabled = false;\r\n\r\n              // chkFixSeeking.parentNode.style.display = 'none';\r\n            },\r\n            onMediaStopped: function() {\r\n              console.warn(\"stop stop stream\")\r\n              This.button.innerHTML = 'Start Recording';\r\n\r\n              if(!This.button.disableStateWaiting) {\r\n                This.button.disabled = false;\r\n              }\r\n              if(This.button.stream){\r\n                This.recorder.stopRecording(This.stopRecordingCallback)\r\n              }\r\n\r\n              // chkFixSeeking.parentNode.style.display = 'inline-block';\r\n            },\r\n            onMediaCapturingFailed: function(error) {\r\n              console.error('onMediaCapturingFailed:', error);\r\n              alert('onMediaCapturingFailed:', error)\r\n\r\n              if(error.toString().indexOf('no audio or video tracks available') !== -1) {\r\n                alert('RecordRTC failed to start because there are no audio or video tracks available.');\r\n              }\r\n\r\n              // if(error.name === 'PermissionDeniedError' && DetectRTC.browser.name === 'Firefox') {\r\n              //   alert('Firefox requires version >= 52. Firefox also requires HTTPs.');\r\n              // }\r\n\r\n              commonConfig.onMediaStopped();\r\n            }\r\n          };\r\n          if(This.currentRecordType === 'record-audio-plus-video'){\r\n            captureAudioPlusVideo(commonConfig)\r\n            function captureAudioPlusVideo(config) {\r\n              This.captureUserMedia({video: true, audio: true}, function(audioVideoStream) {\r\n\r\n                config.onMediaCaptured(audioVideoStream);\r\n\r\n                if(audioVideoStream instanceof Array) {\r\n                  audioVideoStream.forEach(function(stream) {\r\n                    This.addStreamStopListener(stream, function() {\r\n                      config.onMediaStopped();\r\n                    });\r\n                  });\r\n                  return;\r\n                }\r\n\r\n                This.addStreamStopListener(audioVideoStream, function() {\r\n                  config.onMediaStopped();\r\n                });\r\n              }, function(error) {\r\n                config.onMediaCapturingFailed(error);\r\n              });\r\n            }\r\n          }else if(This.currentRecordType === 'record-audio'){\r\n            captureAudio(commonConfig);\r\n            function captureAudio(config) {\r\n              This.captureUserMedia({audio: true}, function(audioStream){\r\n                config.onMediaCaptured(audioStream);\r\n\r\n                This.addStreamStopListener(audioStream, function() {\r\n                  config.onMediaStopped();\r\n                });\r\n              }, function(error) {\r\n                config.onMediaCapturingFailed(error);\r\n              });\r\n            }\r\n          }else if(This.currentRecordType === 'record-screen'){\r\n            captureScreen(commonConfig)\r\n            function captureScreen(config){\r\n              if (navigator.getDisplayMedia) {\r\n                navigator.getDisplayMedia({\r\n                  audio: true,\r\n                  video: {\r\n                    width: { max:  1920 },\r\n                    height: { max:  1080 },\r\n                    frameRate: { max: 15 },\r\n                  }\r\n                }).then(screenStream => {\r\n                  config.onMediaCaptured(screenStream);\r\n\r\n                  This.addStreamStopListener(screenStream, function() {\r\n                    config.onMediaStopped();\r\n                  });\r\n\r\n                  setVideoURL(screenStream, true);\r\n                }).catch(function(error) {\r\n                  config.onMediaCapturingFailed(error);\r\n                });\r\n              } else if (navigator.mediaDevices.getDisplayMedia) {\r\n                navigator.mediaDevices.getDisplayMedia({\r\n                  audio: true,\r\n                  video: {\r\n                    width: { max:  1920 },\r\n                    height: { max:  1080 },\r\n                    frameRate: { max: 15 },\r\n                  }\r\n                }).then(screenStream => {\r\n                  config.onMediaCaptured(screenStream);\r\n\r\n                  This.addStreamStopListener(screenStream, function() {\r\n                    config.onMediaStopped();\r\n                  });\r\n                }).catch(function(error) {\r\n                  config.onMediaCapturingFailed(error);\r\n                });\r\n              } else {\r\n                var error = 'getDisplayMedia API are not supported in this browser.';\r\n                config.onMediaCapturingFailed(error);\r\n                alert(error);\r\n              }\r\n            }\r\n\r\n          }else if(This.currentRecordType === 'record-audio-plus-screen'){\r\n            captureAudioPlusScreen(commonConfig);\r\n            function captureAudioPlusScreen(config){\r\n              if (navigator.getDisplayMedia) {\r\n                navigator.getDisplayMedia({\r\n                  audio: true,\r\n                  video: {\r\n                    width: { max:  1920 },\r\n                    height: { max:  1080 },\r\n                    frameRate: { max: 15 },\r\n                  }\r\n                }).then(screenStream => {\r\n                  This.captureUserMedia({audio:true},function(mic){\r\n                    This.audio = mic\r\n                    // screenStream.addTrack(mic.getTracks()[0]);\r\n                    let stream\r\n                    let mixStream = []\r\n                    if(screenStream.getAudioTracks().length > 0){\r\n\r\n                      let audioTrack = This.mixingStream(screenStream, This.audio).getAudioTracks()[0]\r\n                      mixStream.push(audioTrack)\r\n                      mixStream.push(screenStream.getVideoTracks()[0])\r\n                      stream = new MediaStream(mixStream)\r\n                    }else{\r\n                      mixStream.push(This.audio.getAudioTracks()[0])\r\n                      mixStream.push(screenStream.getVideoTracks()[0])\r\n                      stream = new MediaStream(mixStream)\r\n                    }\r\n                    config.onMediaCaptured(stream);\r\n                    This.addStreamStopListener(screenStream, function() {\r\n                      config.onMediaStopped();\r\n                    });\r\n                  },function(error){\r\n                    console.warn(\"音频取流失败：\",error)\r\n                    alert(\"音频取流失败：\", error )\r\n                  })\r\n                }).catch(function(error) {\r\n                  config.onMediaCapturingFailed(error);\r\n                });\r\n              } else if (navigator.mediaDevices.getDisplayMedia) {\r\n                navigator.mediaDevices.getDisplayMedia({\r\n                  audio:true,\r\n                  video: {\r\n                    width: { max:  1920 },\r\n                    height: { max:  1080 },\r\n                    frameRate: { max: 15 },\r\n                  }\r\n                }).then(screenStream => {\r\n                  This.captureUserMedia({audio:true},function(mic){\r\n                    This.audio = mic\r\n                    // screenStream.addTrack(mic.getTracks()[0]);\r\n\r\n                    let stream\r\n                    let mixStream = []\r\n                    if(screenStream.getAudioTracks().length > 0){\r\n\r\n                      let audioTrack = This.mixingStream(screenStream, This.audio).getAudioTracks()[0]\r\n                      mixStream.push(audioTrack)\r\n                      mixStream.push(screenStream.getVideoTracks()[0])\r\n                      stream = new MediaStream(mixStream)\r\n                    }else{\r\n                      mixStream.push(This.audio.getAudioTracks()[0])\r\n                      mixStream.push(screenStream.getVideoTracks()[0])\r\n                      stream = new MediaStream(mixStream)\r\n                    }\r\n                    config.onMediaCaptured(stream);\r\n                    This.addStreamStopListener(screenStream, function() {\r\n                      config.onMediaStopped();\r\n                    });\r\n                  },function(error){\r\n                    console.warn(\"音频取流失败：\",error)\r\n                    alert(\"音频取流失败：\", error )\r\n                  })\r\n                }).catch(function(error) {\r\n                  config.onMediaCapturingFailed(error);\r\n                });\r\n              } else {\r\n                var error = 'getDisplayMedia API are not supported in this browser.';\r\n                config.onMediaCapturingFailed(error);\r\n                alert(error);\r\n              }\r\n            }\r\n          }\r\n\r\n        },\r\n        // 获取当前录制类型\r\n        getNormalRecordMedia(){\r\n          this.currentRecordType = this.$store.state.currentRecordMethod === 'normal-Recorded' ? this.$refs.normalRecordMedia.value : null\r\n        },\r\n        // 获取当前的录制类型的流\r\n        getNormalMediaResolution(){\r\n          this.currentResolutions = this.$store.state.currentRecordMethod === 'normal-Recorded' ? this.$refs.normalMediaResolutions.value : null\r\n        },\r\n        getNormalMediaFramerates(){\r\n          this.currentFramerates = this.$store.state.currentRecordMethod === 'normal-Recorded' ? this.$refs.normalMediaFramerates.value : null\r\n        },\r\n        handleRecord(){\r\n          this.init()\r\n        },\r\n        // 处理当前录制时的stream\r\n        captureUserMedia(mediaConstraints, successCallback, errorCallback) {\r\n\r\n          mediaConstraints = this.getVideoResolutions(mediaConstraints);\r\n          mediaConstraints = this.getFrameRates(mediaConstraints);\r\n\r\n          console.warn(\"mediaConstraints:\",mediaConstraints)\r\n\r\n          navigator.mediaDevices.getUserMedia(mediaConstraints).then(function(stream) {\r\n            successCallback(stream);\r\n            // setVideoURL(stream, true);\r\n          }).catch(function(error) {\r\n            if(error && (error.name === 'ConstraintNotSatisfiedError' || error.name === 'OverconstrainedError')) {\r\n              alert('Your camera or browser does NOT supports selected resolutions or frame-rates. \\n\\nPlease select \"default\" resolutions.');\r\n            }\r\n            else if(error && error.message) {\r\n              alert(error.message);\r\n            }\r\n            else {\r\n              alert('Unable to make getUserMedia request. Please check browser console logs.');\r\n            }\r\n\r\n            errorCallback(error);\r\n          });\r\n        },\r\n        addStreamStopListener(stream, callback) {\r\n          stream.addEventListener('ended', function() {\r\n            callback();\r\n            callback = function() {};\r\n          }, false);\r\n          stream.addEventListener('inactive', function() {\r\n            callback();\r\n            callback = function() {};\r\n          }, false);\r\n          stream.getTracks().forEach(function(track) {\r\n            track.addEventListener('ended', function() {\r\n              callback();\r\n              callback = function() {};\r\n            }, false);\r\n            track.addEventListener('inactive', function() {\r\n              callback();\r\n              callback = function() {};\r\n            }, false);\r\n          });\r\n        },\r\n        // 获取分辨率\r\n        getVideoResolutions(mediaConstraints) {\r\n          let defaultWidth , defaultHeight ;\r\n          if(mediaConstraints.video == true) {\r\n            mediaConstraints.video = {};\r\n          }\r\n          if(mediaConstraints.audio == true) {\r\n            mediaConstraints.audio = {};\r\n          }\r\n\r\n          if(!mediaConstraints.audio.deviceId) {\r\n            mediaConstraints.audio.deviceId = {};\r\n            let audioDeviceId = this.$store.getters.getCurrentAudioSource\r\n            mediaConstraints.audio.deviceId = {\r\n              exact: audioDeviceId  ,\r\n            }\r\n          }\r\n\r\n          if(!mediaConstraints.video) {\r\n            return mediaConstraints;\r\n          }\r\n\r\n          if(!mediaConstraints.video.width || !mediaConstraints.video.height) {\r\n            mediaConstraints.video.width = {};\r\n            mediaConstraints.video.height = {};\r\n            let camereDeviceId = this.$store.getters.getCurrentVideoSource\r\n            mediaConstraints.video.deviceId = {\r\n              exact: camereDeviceId  ,\r\n            }\r\n          }\r\n\r\n          let value = this.currentResolutions\r\n\r\n          if(value == 'Default' || value == 'default' ) {\r\n            defaultWidth = 640\r\n            defaultHeight = 360\r\n          }else{\r\n            value = value.split('x');\r\n            defaultWidth = parseInt(value[0]);\r\n            defaultHeight = parseInt(value[1]);\r\n          }\r\n\r\n\r\n          var isScreen = this.currentRecordType.toString().toLowerCase().indexOf('screen') != -1;\r\n\r\n          if(isScreen) {\r\n            mediaConstraints.video.width = { max: defaultWidth};\r\n            mediaConstraints.video.height = { max: defaultHeight};\r\n          }\r\n          else {\r\n            mediaConstraints.video.width = { exact: defaultWidth};\r\n            mediaConstraints.video.height = { exact: defaultHeight};\r\n          }\r\n\r\n          console.warn(\" mediaConstraints:\", mediaConstraints)\r\n          return mediaConstraints;\r\n        },\r\n        // 获取帧率\r\n        getFrameRates(mediaConstraints) {\r\n          if(!mediaConstraints.video) {\r\n            return mediaConstraints;\r\n          }\r\n\r\n          let value = this.currentFramerates\r\n\r\n          if(value == 'default') {\r\n            return mediaConstraints;\r\n          }\r\n\r\n          value = parseInt(value);\r\n\r\n\r\n          if(!mediaConstraints.video.width || !mediaConstraints.video.height) {\r\n            mediaConstraints.video.width = {};\r\n            mediaConstraints.video.height = {};\r\n          }\r\n\r\n          var isScreen = this.currentRecordType.toString().toLowerCase().indexOf('screen') != -1;\r\n          if(isScreen) {\r\n            mediaConstraints.video.frameRate = { max: value}\r\n          }\r\n          else {\r\n            mediaConstraints.video.frameRate = { exact: value};\r\n          }\r\n          return mediaConstraints;\r\n        },\r\n        stopRecordingCallback() {\r\n          let This = this\r\n          This.$refs.downLoadBtn.style.display = \"block\"\r\n          This.file = This.recorder.getBlob()\r\n          This.url = URL.createObjectURL(This.file)\r\n\r\n          This.video.src = This.video.srcObject = null\r\n          This.video.src = This.url\r\n          This.video.muted = false\r\n          This.video.controls = true;\r\n          This.video.play()\r\n\r\n          // This.video.controls = true;\r\n          // This.video.muted = false\r\n\r\n          This.recorder.destroy()\r\n          This.recorder = null\r\n\r\n          let mutiStream = [This.button.stream]\r\n          if(This.audio){\r\n            mutiStream.push(This.audio)\r\n          }\r\n          mutiStream.forEach(function(stream) {\r\n            stream.getTracks().forEach(function(track) {\r\n              track.stop();\r\n            });\r\n          });\r\n          This.button.stream = null\r\n        },\r\n        mixingStream (stream1, stream2) {\r\n            console.info('mixing audio stream')\r\n            if(!stream1 || !stream2){\r\n              console.info(\"invalid parameters to mixStream\")\r\n              return\r\n            }\r\n            let This = this\r\n            // 混音参数\r\n            window.AudioContext = (window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext)\r\n\r\n            if (window.AudioContext) {\r\n              if(This.mixStreamContext){\r\n                This.mixStreamContext.close()\r\n                This.mixStreamContext = null\r\n              }\r\n              This.mixStreamContext = new window.AudioContext()\r\n            } else {\r\n              console.error('not support web audio api')\r\n            }\r\n\r\n            // 混音\r\n            let destinationParticipant1 = This.mixStreamContext.createMediaStreamDestination()\r\n            if (stream1) {\r\n              let source1 = This.mixStreamContext.createMediaStreamSource(stream1)\r\n              source1.connect(destinationParticipant1)\r\n            }\r\n            if (stream2) {\r\n              let source2 = This.mixStreamContext.createMediaStreamSource(stream2)\r\n              source2.connect(destinationParticipant1)\r\n            }\r\n\r\n            return destinationParticipant1.stream\r\n          },\r\n        closeStream(stream){\r\n          if (!stream) {\r\n            console.info('closeStream:stream is null')\r\n            return\r\n          } else {\r\n            console.info('close stream id: ' + stream.id)\r\n          }\r\n\r\n          try {\r\n            stream.oninactive = null\r\n            let tracks = stream.getTracks()\r\n            for (let track in tracks) {\r\n              tracks[track].onended = null\r\n              console.info('close stream')\r\n              tracks[track].stop()\r\n            }\r\n          } catch (error) {\r\n            console.info('closeStream: Failed to close stream')\r\n            console.info(error)\r\n          }\r\n        },\r\n        downLoad(){\r\n          let logTime = new Date(parseInt((new Date()).getTime()))\r\n          logTime = beautyDate(logTime)\r\n          let a = document.createElement('a');\r\n          a.target = \"_blank\";\r\n          a.style.display = 'none';\r\n          a.href = this.url;\r\n          a.download = 'record - '+ logTime +'.mp4';\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          // setTimeout(function() {\r\n          //   document.body.removeChild(a);\r\n          //   window.URL.revokeObjectURL(this.url);\r\n          // }, 100);\r\n        },\r\n        startNewTab(){\r\n          let logTime = new Date(parseInt((new Date()).getTime()))\r\n          logTime = beautyDate(logTime)\r\n          let fileName = 'recorder_'+ logTime +'.webm'\r\n          let file = new File([this.file], fileName, { type: this.type});\r\n          window.open(URL.createObjectURL(file));\r\n        }\r\n      },\r\n        beforeDestroy(){\r\n          if(this.mixStreamContext){\r\n            this.mixStreamContext.close()\r\n            this.mixStreamContext = null\r\n          }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  /** 关于普通录制的样式 **/\r\n  .recordWrapper{\r\n    width:100%;\r\n    height: 100%;\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content:center;\r\n    align-items: center;\r\n  }\r\n  .recordBttonWrapper{\r\n    width: 100%;\r\n    height:50px;\r\n    display: flex;\r\n    justify-content: center;\r\n    background-color: #dde3e3;\r\n    border-radius: 5px;\r\n  }\r\n  .recordBtton{\r\n    width: 60%;\r\n    height: 50px;\r\n    display:flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n  }\r\n  .recordBtn{\r\n    margin: 5px;\r\n  }\r\n  select{\r\n    width: 200px;\r\n    height: 40px;\r\n    border:none;\r\n    outline:none;\r\n    text-align: center;\r\n    border-radius: 5px;\r\n    margin: 5px;\r\n    /*padding: 8px 10px;*/\r\n  }\r\n\r\n  button{\r\n    width: 100px;\r\n    height: 40px;\r\n    border-radius: 5px;\r\n    border:none;\r\n  }\r\n\r\n  .save-to-disk{\r\n    margin: 0 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n  .open-new-tab{\r\n    margin: 0 5px;\r\n    background-color: skyblue;\r\n    color: white;\r\n  }\r\n  .shareScreenContent{\r\n    width:640px;\r\n    height:360px;\r\n    overflow: hidden;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .shareScreenVideo{\r\n    /*margin:0 auto;*/\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    object-fit: inherit;\r\n  }\r\n\r\n  .recordContent{\r\n    border: 1px solid #ccc;\r\n    width: 100%;\r\n    height: 500px;\r\n    margin: 5px;\r\n    border-radius: 10px;\r\n    background-color: white;\r\n  }\r\n  #recording-player{\r\n    width: 100%;\r\n    height: 100%;\r\n    display:flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NormalRecord.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NormalRecord.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NormalRecord.vue?vue&type=template&id=595621c7&scoped=true&\"\nimport script from \"./NormalRecord.vue?vue&type=script&lang=js&\"\nexport * from \"./NormalRecord.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NormalRecord.vue?vue&type=style&index=0&id=595621c7&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"595621c7\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"record\">\n\n    <div v-if=\"currentRecordMethod ==='normal-Recorded'\" class=\"recordWrapper\">\n      <!--#region-->\n      <!--<div class=\"recordBttonWrapper\">-->\n        <!--<div class=\"recordBtton\">-->\n          <!--<div>-->\n            <!--<select class=\"recording-media\" @change=\"getNormalRecordMedia\" ref=\"normalRecordMedia\">-->\n              <!--<option v-for=\"(item,index) in normalRecordingMedia\" :key=\"index\" :value=\"item.value\">{{item.text}}</option>-->\n\n            <!--</select>-->\n          <!--</div>-->\n\n          <!--<div>-->\n            <!--<select class=\"media-resolutions\" @change=\"getNormalMediaResolution\" ref=\"normalMediaResolutions\">-->\n              <!--<option v-for=\"(item,index) in mediaResolutions\" :key=\"index\" :value=\"item.value\">{{item.text}}</option>-->\n            <!--</select>-->\n          <!--</div>-->\n\n          <!--<div>-->\n            <!--<select class=\"media-framerates\" @change=\"getNormalMediaFramerates\" ref=\"normalMediaFramerates\">-->\n              <!--<option v-for=\"(item,index) in mediaFramerates\" :key=\"index\" :value=\"item.value\">{{item.text}}</option>-->\n            <!--</select>-->\n          <!--</div>-->\n\n          <!--<div class=\"recordBtn\">-->\n            <!--<button class=\"startBtn\" @click=\"handleRecord\" ref=\"startBtn\"> Start Recording</button>-->\n          <!--</div>-->\n          <!--&lt;!&ndash;<div class=\"recordBtn\">&ndash;&gt;-->\n          <!--&lt;!&ndash;<button class=\"stopBtn\"> stop Record</button>&ndash;&gt;-->\n          <!--&lt;!&ndash;</div>&ndash;&gt;-->\n        <!--</div>-->\n      <!--</div>-->\n\n      <!--<div class=\"recordContent\">-->\n        <!--<div id=\"recording-player\" ref=\"recordingPlayer\">-->\n          <!--&lt;!&ndash;<h2>三餐四季</h2>&ndash;&gt;-->\n          <!--<div style=\"text-align: center; display:none; height:50px;\" ref=\"downLoadBtn\">-->\n            <!--<button class=\"save-to-disk\" @click=\"downLoad\">Save To Disk</button>-->\n            <!--&lt;!&ndash;<button id=\"upload-to-php\">Upload to PHP</button>&ndash;&gt;-->\n            <!--<button class=\"open-new-tab\" @click=\"startNewTab\">Open New Tab</button>-->\n          <!--</div>-->\n          <!--<div class=\"shareScreenContent\" ref=\"videoContent\">-->\n            <!--<video v-if=\"currentRecordType !== 'record-audio'\" class=\"shareScreenVideo\" ref=\"recorderVideo\"  style=\"transform: scale(1); width:100%;\"></video>-->\n            <!--&lt;!&ndash;&lt;!&ndash;<video v-show=\"currentRecordType !== 'record-audio'\" class=\"shareScreenVideo\" ref=\"recorderVideo\" width=\"1280\" height=\"720\"  style=\"transform: scale(1)\"></video>&ndash;&gt;&ndash;&gt;-->\n            <!--<audio v-if=\"currentRecordType === 'record-audio'\" class=\"shareScreenAudio\" ref=\"recorderAudio\"  style=\"transform: scale(1)\"></audio>-->\n          <!--</div>-->\n        <!--</div>-->\n      <!--</div>-->\n      <!--#endregion-->\n      <NormalRecord :normalRecordingMedia =\"normalRecordingMedia\"></NormalRecord>\n    </div>\n\n    <div v-if=\"currentRecordMethod ==='advanced-Recorded'\">\n      <AdvanceRecord :advancedRecordingMedia=\"advancedRecordingMedia\"></AdvanceRecord>\n    </div>\n  </div>\n</template>\n\n<script>\n  import AdvanceRecord from \"@/views/AdvanceRecord.vue\"\n  import NormalRecord from \"@/views/NormalRecord.vue\"\n  import { mapState, mapGetters} from 'vuex'\n  export default {\n    name: 'Record',\n    components:{ NormalRecord, AdvanceRecord},\n    data(){\n      return {\n        // 标准录制\n        normalRecordingMedia:[\n          {\n            index: 0,\n            text: 'Microphone+Camera',\n            value: 'record-audio-plus-video'\n          },\n          {\n            index: 1,\n            text: 'Microphone',\n            value: 'record-audio'\n          },\n          {\n            index: 2,\n            text: 'Full Screen',\n            value: 'record-screen'\n          },\n          {\n            index: 3,\n            text: 'Microphone+Screen',\n            value: 'record-audio-plus-screen'\n          }\n        ],\n        // 高级录制\n        advancedRecordingMedia:[\n          {\n            index: 0,\n            text: 'Screen+Camera',\n            value: 'record-camera-plus-screen'\n          },\n          {\n            index: 1,\n            text: 'Regional Screen',\n            value: 'record-regionalScreen'\n          },\n          {\n            index: 2,\n            text: 'gif-record',\n            value: 'gif-record'\n          },\n          {\n            index: 3,\n            text: 'microphone-mp3',\n            value: 'microphone-mp3'\n          }\n        ],\n        currentRecordType: '',      // 当前录制的类型\n      }\n    },\n    created(){\n\n    },\n    computed: {\n      ...mapState(['currentRecordMethod'])\n    },\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Record.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Record.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Record.vue?vue&type=template&id=7aae6fd3&scoped=true&\"\nimport script from \"./Record.vue?vue&type=script&lang=js&\"\nexport * from \"./Record.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7aae6fd3\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"app\">\r\n    <el-container>\r\n      <el-aside class=\"el-aside\"  width=\"260px\">\r\n        <Aside></Aside>\r\n      </el-aside>\r\n      <el-container>\r\n        <!--<el-header>录制内容</el-header>-->\r\n        <el-main >\r\n          <Record></Record>\r\n        </el-main>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import Aside from \"@/components/AsideView\"\r\n    import Record from \"@/components/Record\"\r\n    export default {\r\n        name: \"HomePage\",\r\n        components:{Aside, Record},\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n  .el-header, .el-footer {\r\n    background-color: #bec2b8;\r\n    color: #ffffff;\r\n    font-weight: bolder;\r\n    /*text-align: center;*/\r\n    line-height: 60px;\r\n  }\r\n  span{\r\n    font-family: FZLTHK, FZLTHK-Regular;\r\n  }\r\n\r\n  .el-aside {\r\n    background-color: #2c3e50;\r\n    height:100vh;\r\n    color: #ffffff;\r\n    overflow: hidden;\r\n    /*text-align: center;*/\r\n    font-family:\"Microsoft YaHei UI\",Arial,\"Times New Roman\";\r\n\r\n    /*line-height: 100vh;*/\r\n  }\r\n\r\n\r\n  .el-main {\r\n    background-color: #E9EEF3;\r\n    color: #333;\r\n    text-align: center;\r\n    /*line-height: 160px;*/\r\n  }\r\n\r\n  body > .el-container {\r\n    margin-bottom: 40px;\r\n  }\r\n\r\n  .el-container:nth-child(5) .el-aside,\r\n  .el-container:nth-child(6) .el-aside {\r\n    line-height: 260px;\r\n  }\r\n\r\n  .el-container:nth-child(7) .el-aside {\r\n    line-height: 320px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomePage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomePage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomePage.vue?vue&type=template&id=6dcaecc6&scoped=true&\"\nimport script from \"./HomePage.vue?vue&type=script&lang=js&\"\nexport * from \"./HomePage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HomePage.vue?vue&type=style&index=0&id=6dcaecc6&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6dcaecc6\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport MainView from '../components/index/HomePage.vue'\n\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    name: 'mainView',\n    component: MainView\n  },\n\n]\n\nconst router = new VueRouter({\n  routes\n})\n\nexport default router\n","export default {\r\n    shareScreen: true,       // 确定是否共享\r\n    shareType:  '',          // 共享屏幕类型\r\n    slidesStream: '',        // 演示流\r\n    audioStream: '',         // 音频流\r\n    mainStream: '',          // 视频流\r\n\r\n    // recordStream: '',      // 录制流\r\n    setMuteState: false,            // 是否静音\r\n\r\n    currentAudioSource: '',  // 当前麦克风输入设备\r\n    currentAudioutput: '',   // 当前麦克风输出设备\r\n    currentVideoSource: '',  // 当前摄像头设备\r\n    currentRecordMethod: '', // 当前录制方式\r\n}\r\n","export default{\r\n    getShareScreen:(state)=>{\r\n        return state.shareScreen\r\n    },\r\n\r\n    getShareType:(state)=>{\r\n      return state.shareType\r\n    },\r\n\r\n    getSlidesStream:(state)=>{\r\n      return state.slidesStream\r\n    },\r\n    getMainStream:(state)=>{\r\n      return state.mainStream\r\n    },\r\n    getAudioStream:(state)=>{\r\n      return state.audioStream\r\n    },\r\n\r\n    getRecordStream:(state)=>{\r\n      return state.slidesStream\r\n    },\r\n\r\n    getCurrentAudioSource:(state)=>{\r\n       return state.currentAudioSource\r\n    },\r\n    getCurrentAudioutput:(state)=>{\r\n       return state.currentAudioutput\r\n    },\r\n    getCurrentVideoSource:(state)=>{\r\n       return state.currentVideoSource\r\n    },\r\n    getCurrentRecordMethod:(state)=>{\r\n      return state.currentRecordMethod\r\n    },\r\n    getMuteState:(state)=>{\r\n      return state.setMuteState\r\n    }\r\n}\r\n","import {Bus} from \"@/common/Bus.js\"\r\nexport default{\r\n    async modifyShareScreen(context) {\r\n      // console.warn(\"state:\",state)\r\n      // setTimeout(()=>{\r\n        await context.commit(\"setShareScreen\", {content: 'false'})\r\n      // },1000)\r\n    },\r\n   async modifySlidesStream(context){\r\n      await context.commit(\"setSlidesStream\",{content: null})\r\n   },\r\n   async modifyShareType(context){\r\n     await context.commit(\"setShareType\",{content: null})\r\n   },\r\n\r\n   async modifyAudioSource(context,data){\r\n     await context.commit(\"setCurrentAudioSource\",{content: data.content})\r\n   },\r\n   async modifyAudioOutput(context,data){\r\n     await context.commit(\"setCurrentAudioOutput\",{content: data.content})\r\n   },\r\n   async modifyVideoSource(context,data){\r\n      await context.commit(\"setCurrentVideoSource\",{content: data.content})\r\n   },\r\n   async modifyRecordMethod(context,data){\r\n     await context.commit(\"setCurrentRecordMethod\",{content: data.content})\r\n   },\r\n   async modifyMuteState(context,data){\r\n      await context.commit(\"setMuteState\",{context:data.content})\r\n      Bus.$emit(\"isMute\",{value:data.content})\r\n   }\r\n\r\n}\r\n","export default{\r\n    setShareType:(state, payload) =>{\r\n       state.shareType = payload.content\r\n    },\r\n\r\n    setShareScreen:(state, payload)=>{\r\n      state.shareScreen  = payload.content\r\n    },\r\n\r\n    setSlidesStream:(state,payload)=>{\r\n      state.slidesStream = payload.content\r\n    },\r\n\r\n    setMainStream:(state,payload)=>{\r\n      state.mainStream = payload.content\r\n    },\r\n    setAudioStream:(state,payload)=>{\r\n      state.audioStream = payload.content\r\n      console.warn(\"state：\",state)\r\n    },\r\n\r\n    setRecordStream:(state,payload)=>{\r\n      state.recordStream = payload.content\r\n    },\r\n    setCurrentAudioSource:(state, payload)=>{\r\n       state.currentAudioSource = payload.content\r\n    },\r\n    setCurrentAudioOutput:(state,payload)=>{\r\n       state.currentAudioutput = payload.content\r\n    },\r\n    setCurrentVideoSource:(state,payload)=>{\r\n       state.currentVideoSource = payload.content\r\n    },\r\n    setCurrentRecordMethod:(state,payload)=>{\r\n      state.currentRecordMethod = payload.content\r\n    },\r\n    setMuteState:(state,payload)=>{\r\n      state.setMuteState = payload.content\r\n    }\r\n\r\n}\r\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport state from \"@/store/state/state.js\"\nimport getters from \"@/store/state/getters.js\"\nimport actions from \"@/store/state/actions.js\"\nimport mutations from \"@/store/state/mutations.js\"\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state,\n  getters,\n  mutations,\n  actions,\n  modules: {\n\n  }\n})\n","export const mixins = {\r\n  // data() {\r\n  //   return {\r\n  //     msg: \"我是小猪课堂\",\r\n  //   };\r\n  // },\r\n  // computed: {},\r\n  // created() {\r\n  //   console.log(\"我是mixin中的created生命周期函数\");\r\n  // },\r\n  // mounted() {\r\n  //   console.log(\"我是mixin中的mounted生命周期函数\");\r\n  // },\r\n  methods: {\r\n    getUserMedia(content) {\r\n      window.content = content\r\n      console.warn(\"content:\",content.event)\r\n      let This = this\r\n      if(content.event.target.innerText === '标准'){\r\n        This.$store.commit({type:'setShareType',content:'标准'})\r\n      }else if(content.event.target.innerText === '高级'){\r\n        This.$store.commit({type:'setShareType',content:'高级'})\r\n      }\r\n\r\n      let constraints,data;\r\n      if(content.type === 'screenShare'){\r\n        constraints={\r\n          audio: true,\r\n          video: {\r\n            width: { max:  1920 },\r\n            height: { max:  1080 },\r\n            frameRate: { max: 15 },\r\n            // displaySurface: 'monitor', // monitor, window, application, browser\r\n            // logicalSurface: true,\r\n            // cursor: 'always' // never, always, motion\r\n          }\r\n        }\r\n\r\n        data ={\r\n          streamType: content.type,\r\n          callback:function(event){\r\n            if(event.stream){\r\n              let stream = event.stream\r\n              This.$store.commit({type: 'setSlidesStream',content: stream})\r\n              This.$store.dispatch(\"modifyShareScreen\")\r\n\r\n            }else{\r\n              console.warn(\"error:\",event.error)\r\n            }\r\n          }\r\n        }\r\n      }\r\n      getMedia(data,constraints)\r\n      function getMedia (data, constraints) {\r\n        console.warn('getMedia')\r\n        function onGetStreamSuccess (stream) {\r\n          console.info('get stream success constraints: ' + JSON.stringify(constraints, null, '  '))\r\n          data.callback({stream: stream ||data.stream})\r\n        }\r\n\r\n        function onGetStreamFailed (error) {\r\n          data.error = error\r\n          console.warn('get stream failed: ' + JSON.stringify(constraints, null, '  '))\r\n          console.warn('onGetStreamFailed error message: ' + error.message)\r\n          console.warn('error name: ' + error.name)\r\n          console.warn('error constraint: ' + error.constraints)\r\n          if (error.name === 'OverconstrainedError' || error.name === 'ConstraintNotSatisfiedError' || error.name === 'Error') {\r\n            // constraints can not be satisfied by avb.device\r\n            console.info('constraints can not be satisfied by avb.device')\r\n            data.callback({ error: error, constraints: constraints})\r\n          } else {\r\n            if (error.name === 'NotFoundError' || error.name === 'DeviceNotFoundError') {\r\n              // require track is missing\r\n              console.info('require track is missing')\r\n            } else if (error.name === 'NotReadableError' || error.name === 'TrackStartError') {\r\n              // webcam or mic are already in use\r\n              console.info('webcam or mic are already in use')\r\n            } else if (error.name === 'NotAllowedError' || error.name === 'PermissionDeniedError' || error.name === 'PermissionDismissedError') {\r\n              // permission denied in browser\r\n              console.info('permission denied in browser')\r\n            } else if (error.name === 'TypeError') {\r\n              // empty constraints object\r\n              console.info('empty constraints object')\r\n            } else {\r\n              // other errors\r\n              console.info('other errors ' + error.name)\r\n            }\r\n            data.callback({ error: error })\r\n          }\r\n        }\r\n\r\n        if (data.streamType === 'audio' ) {\r\n          navigator.mediaDevices.getUserMedia(constraints).then(onGetStreamSuccess).catch(onGetStreamFailed)\r\n          // this.getUserMediaWithTimeout(constraints).then(onGetStreamSuccess).catch(onGetStreamFailed)\r\n        } else if(data.streamType === 'video'){\r\n          if (!data.isFirefox && data.stream && data.stream.getVideoTracks().length && data.stream.active) {\r\n            let videoTrack\r\n            let constraintsOfApply = {\r\n              width:{exact: constraints.video.width.exact},\r\n              height:{exact: constraints.video.height.exact},\r\n            }\r\n            videoTrack = data.stream.getVideoTracks()[0]\r\n            if (videoTrack && videoTrack.applyConstraints) {\r\n              console.info('applyConstraints constraints: ' + JSON.stringify(constraintsOfApply, null, '    '))\r\n              videoTrack.applyConstraints(constraintsOfApply).then(function(){\r\n                console.info('video applyConstraints success!')\r\n                data.callback({ stream: data.stream})\r\n              }).catch(onGetStreamFailed)\r\n            }\r\n          }else{\r\n            navigator.mediaDevices.getUserMedia(constraints).then(onGetStreamSuccess).catch(onGetStreamFailed)\r\n            // this.getUserMediaWithTimeout(constraints).then(onGetStreamSuccess).catch(onGetStreamFailed)\r\n          }\r\n        } else if (data.streamType === 'screenShare') {\r\n          if(window.ipcRenderer){\r\n            console.info('ipcRenderer getUserMedia for screen')\r\n            navigator.mediaDevices.getUserMedia(constraints).then(onGetStreamSuccess).catch(onGetStreamFailed)\r\n          }else {\r\n            if (navigator.getDisplayMedia) {\r\n              // for Edge old version\r\n              navigator.getDisplayMedia(constraints).then(onGetStreamSuccess).catch(onGetStreamFailed)\r\n            } else if (navigator.mediaDevices.getDisplayMedia) {\r\n              // for all supported getDisplayMedia browser versions\r\n              navigator.mediaDevices.getDisplayMedia(constraints).then(onGetStreamSuccess).catch(onGetStreamFailed)\r\n            } else if (navigator.mediaDevices.getUserMedia) {\r\n              navigator.mediaDevices.getUserMedia(constraints).then(onGetStreamSuccess).catch(onGetStreamFailed)\r\n            } else {\r\n              console.info('getDisplayMedia is not supported by current browser')\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    closeStream(stream){\r\n      if (!stream) {\r\n        log.info('closeStream:stream is null')\r\n        return\r\n      } else {\r\n        log.info('close stream id: ' + stream.id)\r\n      }\r\n\r\n      try {\r\n        stream.oninactive = null\r\n        let tracks = stream.getTracks()\r\n        for (let track in tracks) {\r\n          tracks[track].onended = null\r\n          log.info('close stream')\r\n          tracks[track].stop()\r\n        }\r\n      } catch (error) {\r\n        log.info('closeStream: Failed to close stream')\r\n        log.info(error)\r\n      }\r\n      stream = null\r\n    },\r\n    streamMuteSwitch(data) {\r\n      if (data && data.stream && data.type === 'audio' && data.stream.getAudioTracks().length > 0) {\r\n        for (let i = 0; i < data.stream.getAudioTracks().length; i++) {\r\n          console.warn(\"data.mute:\",data.mute)\r\n          if (data.mute) {\r\n            if (data.stream.getAudioTracks()[i].enabled === true) {\r\n              console.info('MuteStream exec mute audio')\r\n              data.stream.getAudioTracks()[i].enabled = false\r\n              this.isMute = true\r\n            }\r\n          } else {\r\n            if (data.stream.getAudioTracks()[i].enabled === false) {\r\n              console.info('MuteStream exec unmute audio')\r\n              data.stream.getAudioTracks()[i].enabled = true\r\n              this.isMute = false\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\nimport '@/assets/css/common.css'\r\n\r\nimport ElementUI from 'element-ui';\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\nVue.use(ElementUI)\r\n\r\nimport { mixins } from \"./mixmin/mixmin\";\r\nVue.mixin(mixins)\r\n\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkrecord_demo\"] = self[\"webpackChunkrecord_demo\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(8314); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","staticClass","staticRenderFns","name","component","attrs","_v","ref","on","getAudioSource","_l","audioSourceOption","item","index","key","domProps","value","_s","text","getAudiooutput","audioOutputOption","getCamera","videoSourceOption","directives","rawName","currentRecordMethod","expression","isSetMute","muteData","getRecordMethod","recordMethodOption","data","currentAudioSource","currentAudioutput","currentVideoSource","isMute","mounted","type","content","methods","handleOpen","console","handleClose","getDevices","navigator","then","catch","err","showDevice","deviceInfos","This","attachSinkId","element","error","errorMessage","audioOutputSelect","audio","exact","deviceId","noiseSuppression","echoCancellation","stream","mute","streamMuteSwitch","normalRecordingMedia","_e","advancedRecordingMedia","getAdavncedRecordMedia","currentRecordType","handleShareStream","handleRecord","staticStyle","downLoad","startNewTab","beautyDate","date","yyyy","getFullYear","m","getMonth","d","getDate","h","getHours","mi","getMinutes","sec","getSeconds","msec","getMilliseconds","mm","dd","hh","min","ss","mss","concat","Bus","Vue","created","$on","startRecording","setTimeout","screen","camera","isRecording","mimeType","previewStream","window","alert","captureScreen","callback","captureCamera","video","invokeGetDisplayMedia","displaySurface","logicalSurface","cursor","displaymediastreamconstraints","addStreamStopListener","track","keepStreamActive","stopRecordingCallback","mutiStream","logTime","a","document","beforeDestroy","handleMouseMove","handleMouseUP","$event","download","openNewTab","timer","isOpenShareScreen","shareScreenStream","getDisplayMedia","width","max","height","frameRate","canvas","ev","startX","startY","oDiv","container","ctx","playCanvas","startDraw","mixingStream","source1","source2","stopRecording","quality","hidden","onGifRecordingStarted","onGifPreview","bytesToSize","FileSelector","selector","noFileSelectedCallback","selectFile","multiple","directory","file","createElement","webkitdirectory","accept","onclick","clickStarted","body","onfocus","onchange","files","length","arr","Array","from","forEach","url","webkitRelativePath","push","parentNode","removeChild","style","display","documentElement","appendChild","fireClickEvent","click","change","createEvent","event","initEvent","dispatchEvent","MouseEvent","view","bubbles","cancelable","selectSingleFile","failure","selectMultipleFiles","selectDirectory","audioPreview","secondsLeft","timeSlice","getMp3Stream","gainNode","soundSource","reader","context","props","components","MicrophoneMp3","GifRecord","RegionalStream","MutiStream","isShare","getNormalRecordMedia","getNormalMediaResolution","mediaResolutions","getNormalMediaFramerates","mediaFramerates","currentResolutions","currentFramerates","init","onMediaCaptured","onMediaStopped","onMediaCapturingFailed","commonConfig","config","audioVideoStream","captureAudioPlusVideo","captureAudio","screenStream","setVideoURL","mixStream","captureAudioPlusScreen","captureUserMedia","mediaConstraints","successCallback","errorCallback","getVideoResolutions","defaultWidth","defaultHeight","getFrameRates","closeStream","tracks","NormalRecord","AdvanceRecord","computed","Aside","Record","VueRouter","routes","path","MainView","router","shareScreen","shareType","slidesStream","audioStream","mainStream","setMuteState","getShareScreen","state","getShareType","getSlidesStream","getMainStream","getAudioStream","getRecordStream","getCurrentAudioSource","getCurrentAudioutput","getCurrentVideoSource","getCurrentRecordMethod","getMuteState","async","commit","$emit","setShareType","payload","setShareScreen","setSlidesStream","setMainStream","setAudioStream","warn","setRecordStream","recordStream","setCurrentAudioSource","setCurrentAudioOutput","setCurrentVideoSource","setCurrentRecordMethod","Vuex","getters","mutations","actions","modules","mixins","getUserMedia","constraints","getMedia","onGetStreamSuccess","info","JSON","stringify","onGetStreamFailed","message","streamType","mediaDevices","isFirefox","getVideoTracks","active","videoTrack","constraintsOfApply","applyConstraints","ipcRenderer","target","innerText","$store","dispatch","log","id","oninactive","getTracks","onended","stop","getAudioTracks","i","enabled","ElementUI","store","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","splice","r","n","getter","__esModule","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}